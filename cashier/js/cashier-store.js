/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("@deriv/components"), require("@deriv/shared"), require("@deriv/translations"), require("mobx"), require("react"));
	else if(typeof define === 'function' && define.amd)
		define(["@deriv/components", "@deriv/shared", "@deriv/translations", "mobx", "react"], factory);
	else if(typeof exports === 'object')
		exports["@deriv/cashier"] = factory(require("@deriv/components"), require("@deriv/shared"), require("@deriv/translations"), require("mobx"), require("react"));
	else
		root["@deriv/cashier"] = factory(root["@deriv/components"], root["@deriv/shared"], root["@deriv/translations"], root["mobx"], root["react"]);
})(self, function(__WEBPACK_EXTERNAL_MODULE__deriv_components__, __WEBPACK_EXTERNAL_MODULE__deriv_shared__, __WEBPACK_EXTERNAL_MODULE__deriv_translations__, __WEBPACK_EXTERNAL_MODULE_mobx__, __WEBPACK_EXTERNAL_MODULE_react__) {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./Stores/cashier-store.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ CashierStore)\n});\n\n// EXTERNAL MODULE: external \"mobx\"\nvar external_mobx_ = __webpack_require__(\"mobx\");\n// EXTERNAL MODULE: external \"@deriv/shared\"\nvar shared_ = __webpack_require__(\"@deriv/shared\");\n;// CONCATENATED MODULE: ./Stores/account-prompt-dialog-store.js\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\nvar AccountPromptDialogStore = (_dec = external_mobx_.action.bound, _dec2 = external_mobx_.action.bound, _dec3 = external_mobx_.action.bound, _dec4 = external_mobx_.action.bound, _dec5 = external_mobx_.action.bound, _dec6 = external_mobx_.action.bound, (_class = /*#__PURE__*/function () {\n  function AccountPromptDialogStore(root_store) {\n    _classCallCheck(this, AccountPromptDialogStore);\n\n    _initializerDefineProperty(this, \"should_show\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"is_confirmed\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"last_location\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"current_location\", _descriptor4, this);\n\n    this.root_store = root_store;\n  }\n\n  _createClass(AccountPromptDialogStore, [{\n    key: \"shouldNavigateAfterPrompt\",\n    value: function shouldNavigateAfterPrompt(next_location, current_location) {\n      if (!this.is_confirmed) {\n        this.last_location = next_location;\n        this.should_show = true;\n        this.current_location = current_location;\n      }\n    }\n  }, {\n    key: \"resetLastLocation\",\n    value: function resetLastLocation() {\n      this.last_location = null;\n    }\n  }, {\n    key: \"resetIsConfirmed\",\n    value: function resetIsConfirmed() {\n      this.is_confirmed = false;\n    }\n  }, {\n    key: \"onConfirm\",\n    value: function () {\n      var _onConfirm = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$root_store, client, modules, accounts_list, has_fiat_account;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                accounts_list = modules.cashier.account_transfer.accounts_list;\n                this.should_show = false;\n                this.is_confirmed = true;\n                has_fiat_account = accounts_list.some(function (x) {\n                  return !x.is_crypto;\n                });\n\n                if (!((0,shared_.isCryptocurrency)(client === null || client === void 0 ? void 0 : client.currency) && has_fiat_account)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 8;\n                return this.doSwitch();\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onConfirm() {\n        return _onConfirm.apply(this, arguments);\n      }\n\n      return onConfirm;\n    }()\n  }, {\n    key: \"doSwitch\",\n    value: function () {\n      var _doSwitch = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this$root_store2, client, modules, _modules$cashier, account_transfer, general_store, non_crypto_accounts, loginid;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$root_store2 = this.root_store, client = _this$root_store2.client, modules = _this$root_store2.modules;\n                _modules$cashier = modules.cashier, account_transfer = _modules$cashier.account_transfer, general_store = _modules$cashier.general_store;\n                non_crypto_accounts = account_transfer.accounts_list.filter(function (x) {\n                  return !x.is_crypto;\n                });\n                loginid = non_crypto_accounts.map(function (x) {\n                  return x.value;\n                })[0];\n                _context2.next = 6;\n                return client.switchAccount(loginid);\n\n              case 6:\n                if (this.current_location === 'deposit') {\n                  general_store.setIsDeposit(true);\n                }\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function doSwitch() {\n        return _doSwitch.apply(this, arguments);\n      }\n\n      return doSwitch;\n    }()\n  }, {\n    key: \"onCancel\",\n    value: function onCancel() {\n      this.should_show = false;\n    }\n  }, {\n    key: \"continueRoute\",\n    value: function continueRoute() {\n      if (this.is_confirmed && this.last_location) {\n        this.root_store.common.routeTo(this.last_location);\n      }\n    }\n  }]);\n\n  return AccountPromptDialogStore;\n}(), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"should_show\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"is_confirmed\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"last_location\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"current_location\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"shouldNavigateAfterPrompt\", [_dec], Object.getOwnPropertyDescriptor(_class.prototype, \"shouldNavigateAfterPrompt\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"resetLastLocation\", [_dec2], Object.getOwnPropertyDescriptor(_class.prototype, \"resetLastLocation\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"resetIsConfirmed\", [_dec3], Object.getOwnPropertyDescriptor(_class.prototype, \"resetIsConfirmed\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"onConfirm\", [_dec4], Object.getOwnPropertyDescriptor(_class.prototype, \"onConfirm\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"onCancel\", [_dec5], Object.getOwnPropertyDescriptor(_class.prototype, \"onCancel\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"continueRoute\", [_dec6], Object.getOwnPropertyDescriptor(_class.prototype, \"continueRoute\"), _class.prototype)), _class));\n\n// EXTERNAL MODULE: external \"react\"\nvar external_react_ = __webpack_require__(\"react\");\nvar external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);\n// EXTERNAL MODULE: external \"@deriv/translations\"\nvar translations_ = __webpack_require__(\"@deriv/translations\");\n;// CONCATENATED MODULE: ./Constants/constants.js\nvar containers = {\n  account_transfer: 'account_transfer',\n  deposit: 'deposit',\n  payment_agent: 'payment_agent',\n  payment_agent_transfer: 'payment_agent_transfer',\n  withdraw: 'withdraw'\n};\nvar map_action = {\n  withdraw: 'payment_withdraw',\n  payment_agent: 'payment_agent_withdraw'\n};\n/* harmony default export */ const constants = ({\n  containers: containers,\n  map_action: map_action\n});\n;// CONCATENATED MODULE: ./Stores/error-store.js\nvar error_store_dec, error_store_dec2, error_store_dec3, error_store_dec4, error_store_dec5, error_store_dec6, _dec7, error_store_class, error_store_descriptor, error_store_descriptor2, error_store_descriptor3, error_store_descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction error_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction error_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction error_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction error_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) error_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) error_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction error_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction error_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\nvar ErrorStore = (error_store_dec = external_mobx_.action.bound, error_store_dec2 = external_mobx_.action.bound, error_store_dec3 = external_mobx_.action.bound, error_store_dec4 = external_mobx_.action.bound, error_store_dec5 = external_mobx_.action.bound, error_store_dec6 = external_mobx_.action.bound, _dec7 = external_mobx_.action.bound, (error_store_class = /*#__PURE__*/function () {\n  function ErrorStore() {\n    error_store_classCallCheck(this, ErrorStore);\n\n    error_store_initializerDefineProperty(this, \"message\", error_store_descriptor, this);\n\n    error_store_initializerDefineProperty(this, \"code\", error_store_descriptor2, this);\n\n    error_store_initializerDefineProperty(this, \"fields\", error_store_descriptor3, this);\n\n    error_store_initializerDefineProperty(this, \"is_show_full_page\", error_store_descriptor4, this);\n\n    error_store_initializerDefineProperty(this, \"onClickButton\", _descriptor5, this);\n\n    error_store_initializerDefineProperty(this, \"is_ask_uk_funds_protection\", _descriptor6, this);\n\n    error_store_initializerDefineProperty(this, \"is_self_exclusion_max_turnover_set\", _descriptor7, this);\n\n    error_store_initializerDefineProperty(this, \"is_ask_authentication\", _descriptor8, this);\n\n    error_store_initializerDefineProperty(this, \"is_ask_financial_risk_approval\", _descriptor9, this);\n  }\n\n  error_store_createClass(ErrorStore, [{\n    key: \"setErrorMessage\",\n    value: function setErrorMessage(error, onClickButton, is_show_full_page) {\n      // for errors that need to show a button, reset the form\n      var error_object = _objectSpread({\n        onClickButton: onClickButton,\n        code: error.code,\n        message: error.message,\n        is_show_full_page: is_show_full_page || /InvalidToken|WrongResponse/.test(error.code)\n      }, (0,shared_.getPropertyValue)(error, ['details', 'fields']) && {\n        fields: error.details.fields\n      });\n\n      this.onClickButton = error_object.onClickButton;\n      this.code = error_object.code;\n      this.message = error_object.message;\n      this.is_show_full_page = error_object.is_show_full_page;\n      this.fields = error_object.fields;\n      this.is_ask_uk_funds_protection = error_object === null || error_object === void 0 ? void 0 : error_object.is_ask_uk_funds_protection;\n      this.is_self_exclusion_max_turnover_set = error_object === null || error_object === void 0 ? void 0 : error_object.is_self_exclusion_max_turnover_set;\n      this.is_ask_authentication = error_object === null || error_object === void 0 ? void 0 : error_object.is_ask_authentication;\n      this.is_ask_financial_risk_approval = error_object === null || error_object === void 0 ? void 0 : error_object.is_ask_financial_risk_approval;\n    }\n  }, {\n    key: \"handleCashierError\",\n    value: function handleCashierError(error) {\n      switch (error.code) {\n        case 'ASK_TNC_APPROVAL':\n          this.setErrorMessage(error, null, true);\n          break;\n\n        case 'ASK_FIX_DETAILS':\n          this.setErrorMessage(error, null, true);\n          break;\n\n        case 'ASK_UK_FUNDS_PROTECTION':\n          this.setIsAskUkFundsProtection(true);\n          break;\n\n        case 'ASK_SELF_EXCLUSION_MAX_TURNOVER_SET':\n          this.setIsSelfExclusionMaxTurnoverSet(true);\n          break;\n\n        case 'ASK_AUTHENTICATE':\n        case 'ASK_AGE_VERIFICATION':\n          this.setIsAskAuthentication(true);\n          break;\n\n        case 'ASK_FINANCIAL_RISK_APPROVAL':\n          this.setIsAskFinancialRiskApproval(true);\n          break;\n\n        default:\n          this.setErrorMessage(error);\n          this.setIsAskUkFundsProtection(false);\n          this.setIsSelfExclusionMaxTurnoverSet(false);\n          this.setIsAskAuthentication(false);\n          this.setIsAskFinancialRiskApproval(false);\n      }\n    }\n  }, {\n    key: \"setMessage\",\n    value: function setMessage(value) {\n      this.message = value;\n    }\n  }, {\n    key: \"setIsAskUkFundsProtection\",\n    value: function setIsAskUkFundsProtection(value) {\n      this.is_ask_uk_funds_protection = value;\n    }\n  }, {\n    key: \"setIsSelfExclusionMaxTurnoverSet\",\n    value: function setIsSelfExclusionMaxTurnoverSet(value) {\n      this.is_self_exclusion_max_turnover_set = value;\n    }\n  }, {\n    key: \"setIsAskAuthentication\",\n    value: function setIsAskAuthentication(value) {\n      this.is_ask_authentication = value;\n    }\n  }, {\n    key: \"setIsAskFinancialRiskApproval\",\n    value: function setIsAskFinancialRiskApproval(value) {\n      this.is_ask_financial_risk_approval = value;\n    }\n  }]);\n\n  return ErrorStore;\n}(), (error_store_descriptor = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"message\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), error_store_descriptor2 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"code\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), error_store_descriptor3 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"fields\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), error_store_descriptor4 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"is_show_full_page\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor5 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"onClickButton\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor6 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"is_ask_uk_funds_protection\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor7 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"is_self_exclusion_max_turnover_set\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor8 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"is_ask_authentication\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor9 = error_store_applyDecoratedDescriptor(error_store_class.prototype, \"is_ask_financial_risk_approval\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), error_store_applyDecoratedDescriptor(error_store_class.prototype, \"setErrorMessage\", [error_store_dec], Object.getOwnPropertyDescriptor(error_store_class.prototype, \"setErrorMessage\"), error_store_class.prototype), error_store_applyDecoratedDescriptor(error_store_class.prototype, \"handleCashierError\", [error_store_dec2], Object.getOwnPropertyDescriptor(error_store_class.prototype, \"handleCashierError\"), error_store_class.prototype), error_store_applyDecoratedDescriptor(error_store_class.prototype, \"setMessage\", [error_store_dec3], Object.getOwnPropertyDescriptor(error_store_class.prototype, \"setMessage\"), error_store_class.prototype), error_store_applyDecoratedDescriptor(error_store_class.prototype, \"setIsAskUkFundsProtection\", [error_store_dec4], Object.getOwnPropertyDescriptor(error_store_class.prototype, \"setIsAskUkFundsProtection\"), error_store_class.prototype), error_store_applyDecoratedDescriptor(error_store_class.prototype, \"setIsSelfExclusionMaxTurnoverSet\", [error_store_dec5], Object.getOwnPropertyDescriptor(error_store_class.prototype, \"setIsSelfExclusionMaxTurnoverSet\"), error_store_class.prototype), error_store_applyDecoratedDescriptor(error_store_class.prototype, \"setIsAskAuthentication\", [error_store_dec6], Object.getOwnPropertyDescriptor(error_store_class.prototype, \"setIsAskAuthentication\"), error_store_class.prototype), error_store_applyDecoratedDescriptor(error_store_class.prototype, \"setIsAskFinancialRiskApproval\", [_dec7], Object.getOwnPropertyDescriptor(error_store_class.prototype, \"setIsAskFinancialRiskApproval\"), error_store_class.prototype)), error_store_class));\n\n;// CONCATENATED MODULE: ./Stores/account-transfer-store.js\nvar account_transfer_store_dec, account_transfer_store_dec2, account_transfer_store_dec3, account_transfer_store_dec4, account_transfer_store_dec5, account_transfer_store_dec6, account_transfer_store_dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _dec21, _dec22, _dec23, _dec24, account_transfer_store_class, account_transfer_store_descriptor, account_transfer_store_descriptor2, account_transfer_store_descriptor3, account_transfer_store_descriptor4, account_transfer_store_descriptor5, account_transfer_store_descriptor6, account_transfer_store_descriptor7, account_transfer_store_descriptor8, account_transfer_store_descriptor9, _descriptor10, _descriptor11, _descriptor12, _descriptor13, _descriptor14, _descriptor15, _descriptor16;\n\nfunction account_transfer_store_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction account_transfer_store_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { account_transfer_store_ownKeys(Object(source), true).forEach(function (key) { account_transfer_store_defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { account_transfer_store_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction account_transfer_store_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction account_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction account_transfer_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { account_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { account_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction account_transfer_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction account_transfer_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction account_transfer_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction account_transfer_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) account_transfer_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) account_transfer_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction account_transfer_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction account_transfer_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\n\n\n\n\nvar hasTransferNotAllowedLoginid = function hasTransferNotAllowedLoginid(loginid) {\n  return loginid.startsWith('MX');\n};\n\nvar getSelectedError = function getSelectedError(selected_value, is_from_account) {\n  if (is_from_account) {\n    return /*#__PURE__*/external_react_default().createElement(translations_.Localize, {\n      i18n_default_text: \"Transfer from {{selected_value}} is not allowed, Please choose another account from dropdown\",\n      values: {\n        selected_value: selected_value\n      }\n    });\n  }\n\n  return /*#__PURE__*/external_react_default().createElement(translations_.Localize, {\n    i18n_default_text: \"Transfer to {{selected_value}} is not allowed, Please choose another account from dropdown\",\n    values: {\n      selected_value: selected_value\n    }\n  });\n};\n\nvar AccountTransferStore = (account_transfer_store_dec = external_mobx_.action.bound, account_transfer_store_dec2 = external_mobx_.action.bound, account_transfer_store_dec3 = external_mobx_.action.bound, account_transfer_store_dec4 = external_mobx_.action.bound, account_transfer_store_dec5 = external_mobx_.action.bound, account_transfer_store_dec6 = external_mobx_.action.bound, account_transfer_store_dec7 = external_mobx_.action.bound, _dec8 = external_mobx_.action.bound, _dec9 = external_mobx_.action.bound, _dec10 = external_mobx_.action.bound, _dec11 = external_mobx_.action.bound, _dec12 = external_mobx_.action.bound, _dec13 = external_mobx_.action.bound, _dec14 = external_mobx_.action.bound, _dec15 = external_mobx_.action.bound, _dec16 = external_mobx_.action.bound, _dec17 = external_mobx_.action.bound, _dec18 = external_mobx_.action.bound, _dec19 = external_mobx_.action.bound, _dec20 = external_mobx_.action.bound, _dec21 = external_mobx_.action.bound, _dec22 = external_mobx_.action.bound, _dec23 = external_mobx_.action.bound, _dec24 = external_mobx_.action.bound, (account_transfer_store_class = /*#__PURE__*/function () {\n  function AccountTransferStore(_ref) {\n    var _this = this;\n\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    account_transfer_store_classCallCheck(this, AccountTransferStore);\n\n    account_transfer_store_initializerDefineProperty(this, \"accounts_list\", account_transfer_store_descriptor, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"container\", account_transfer_store_descriptor2, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"error\", account_transfer_store_descriptor3, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"has_no_account\", account_transfer_store_descriptor4, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"has_no_accounts_balance\", account_transfer_store_descriptor5, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"is_transfer_confirm\", account_transfer_store_descriptor6, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"is_transfer_successful\", account_transfer_store_descriptor7, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"is_mt5_transfer_in_progress\", account_transfer_store_descriptor8, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"minimum_fee\", account_transfer_store_descriptor9, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"receipt\", _descriptor10, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"selected_from\", _descriptor11, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"selected_to\", _descriptor12, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"account_transfer_amount\", _descriptor13, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"transfer_fee\", _descriptor14, this);\n\n    account_transfer_store_initializerDefineProperty(this, \"transfer_limit\", _descriptor15, this);\n\n    this.requestTransferBetweenAccounts = /*#__PURE__*/function () {\n      var _ref3 = account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref2) {\n        var amount, _this$root_store, client, modules, setLoading, is_logged_in, responseMt5LoginList, responseTradingPlatformAccountsList, setAccountStatus, setBalanceOtherAccounts, is_mt_transfer, currency, transfer_between_accounts, account_status_response;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                amount = _ref2.amount;\n                _this$root_store = _this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                setLoading = modules.cashier.general_store.setLoading;\n                is_logged_in = client.is_logged_in, responseMt5LoginList = client.responseMt5LoginList, responseTradingPlatformAccountsList = client.responseTradingPlatformAccountsList, setAccountStatus = client.setAccountStatus, setBalanceOtherAccounts = client.setBalanceOtherAccounts;\n\n                if (is_logged_in) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", null);\n\n              case 6:\n                setLoading(true);\n\n                _this.error.setErrorMessage('');\n\n                is_mt_transfer = _this.selected_from.is_mt || _this.selected_to.is_mt;\n                if (is_mt_transfer) _this.setIsMT5TransferInProgress(true);\n                currency = _this.selected_from.currency;\n                _context.next = 13;\n                return _this.WS.authorized.transferBetweenAccounts(_this.selected_from.value, _this.selected_to.value, currency, amount);\n\n              case 13:\n                transfer_between_accounts = _context.sent;\n                if (is_mt_transfer) _this.setIsMT5TransferInProgress(false);\n\n                if (!transfer_between_accounts.error) {\n                  _context.next = 24;\n                  break;\n                }\n\n                if (!(transfer_between_accounts.error.code === 'Fiat2CryptoTransferOverLimit')) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.next = 19;\n                return _this.WS.authorized.getAccountStatus();\n\n              case 19:\n                account_status_response = _context.sent;\n\n                if (!account_status_response.error) {\n                  setAccountStatus(account_status_response.get_account_status);\n                }\n\n              case 21:\n                _this.error.setErrorMessage(transfer_between_accounts.error);\n\n                _context.next = 28;\n                break;\n\n              case 24:\n                _this.setReceiptTransfer({\n                  amount: (0,shared_.formatMoney)(currency, amount, true)\n                });\n\n                transfer_between_accounts.accounts.forEach(function (account) {\n                  _this.setBalanceByLoginId(account.loginid, account.balance);\n\n                  if (account.loginid === _this.selected_from.value) {\n                    _this.setBalanceSelectedFrom(account.balance);\n                  } else if (account.loginid === _this.selected_to.value) {\n                    _this.setBalanceSelectedTo(account.balance);\n                  } // if one of the accounts was mt5\n\n\n                  if (account.account_type === shared_.CFD_PLATFORMS.MT5) {\n                    Promise.all([_this.WS.mt5LoginList(), _this.WS.balanceAll()]).then(function (_ref4) {\n                      var _ref5 = _slicedToArray(_ref4, 2),\n                          mt5_login_list_response = _ref5[0],\n                          balance_response = _ref5[1];\n\n                      // update the balance for account switcher by renewing the mt5_login_list response\n                      responseMt5LoginList(mt5_login_list_response); // update total balance since MT5 total only comes in non-stream balance call\n\n                      setBalanceOtherAccounts(balance_response.balance);\n                    });\n                  } // if one of the accounts was dxtrade\n\n\n                  if (account.account_type === shared_.CFD_PLATFORMS.DXTRADE) {\n                    Promise.all([_this.WS.tradingPlatformAccountsList(shared_.CFD_PLATFORMS.DXTRADE), _this.WS.balanceAll()]).then(function (_ref6) {\n                      var _ref7 = _slicedToArray(_ref6, 2),\n                          dxtrade_login_list_response = _ref7[0],\n                          balance_response = _ref7[1];\n\n                      // update the balance for account switcher by renewing the dxtrade_login_list_response\n                      responseTradingPlatformAccountsList(dxtrade_login_list_response); // update total balance since Dxtrade total only comes in non-stream balance call\n\n                      setBalanceOtherAccounts(balance_response.balance);\n                    });\n                  }\n                });\n\n                _this.setAccountTransferAmount(null);\n\n                _this.setIsTransferConfirm(true);\n\n              case 28:\n                setLoading(false);\n                return _context.abrupt(\"return\", transfer_between_accounts);\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    account_transfer_store_initializerDefineProperty(this, \"resetAccountTransfer\", _descriptor16, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  account_transfer_store_createClass(AccountTransferStore, [{\n    key: \"is_account_transfer_visible\",\n    get: function get() {\n      var _this$root_store$clie = this.root_store.client,\n          has_maltainvest_account = _this$root_store$clie.has_maltainvest_account,\n          landing_company_shortcode = _this$root_store$clie.landing_company_shortcode,\n          residence = _this$root_store$clie.residence; // cashier Transfer account tab is hidden for iom clients\n      // check for residence to hide the tab before creating a real money account\n\n      return residence !== 'im' && (landing_company_shortcode !== 'malta' || has_maltainvest_account);\n    }\n  }, {\n    key: \"is_transfer_locked\",\n    get: function get() {\n      var _this$root_store$clie2 = this.root_store.client,\n          is_financial_account = _this$root_store$clie2.is_financial_account,\n          is_financial_information_incomplete = _this$root_store$clie2.is_financial_information_incomplete,\n          is_trading_experience_incomplete = _this$root_store$clie2.is_trading_experience_incomplete,\n          account_status = _this$root_store$clie2.account_status;\n      if (!account_status.status) return false;\n      var need_financial_assessment = is_financial_account && (is_financial_information_incomplete || is_trading_experience_incomplete);\n      return need_financial_assessment && this.error.is_ask_financial_risk_approval;\n    }\n  }, {\n    key: \"setBalanceByLoginId\",\n    value: function setBalanceByLoginId(loginid, balance) {\n      this.accounts_list.find(function (acc) {\n        return loginid === acc.value;\n      }).balance = balance;\n    }\n  }, {\n    key: \"setBalanceSelectedFrom\",\n    value: function setBalanceSelectedFrom(balance) {\n      this.selected_from.balance = balance;\n    }\n  }, {\n    key: \"setBalanceSelectedTo\",\n    value: function setBalanceSelectedTo(balance) {\n      this.selected_to.balance = balance;\n    } // possible transfers:\n    // 1. fiat to crypto & vice versa\n    // 2. fiat to mt & vice versa\n    // 3. crypto to mt & vice versa\n\n  }, {\n    key: \"onMountAccountTransfer\",\n    value: function () {\n      var _onMountAccountTransfer = account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this$root_store2, client, modules, _modules$cashier$gene, onMountCommon, setLoading, active_accounts, is_logged_in, has_updated_account_balance, _this$accounts_list, transfer_between_accounts, cfd_transfer_to_login_id, obj_values;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$root_store2 = this.root_store, client = _this$root_store2.client, modules = _this$root_store2.modules;\n                _modules$cashier$gene = modules.cashier.general_store, onMountCommon = _modules$cashier$gene.onMountCommon, setLoading = _modules$cashier$gene.setLoading;\n                active_accounts = client.active_accounts, is_logged_in = client.is_logged_in;\n                setLoading(true);\n                this.onRemount = this.onMountAccountTransfer;\n                _context2.next = 7;\n                return onMountCommon();\n\n              case 7:\n                _context2.next = 9;\n                return this.WS.wait('website_status');\n\n              case 9:\n                // check if some balance update has come in since the last mount\n                has_updated_account_balance = this.has_no_accounts_balance && Object.keys(active_accounts).find(function (account) {\n                  return !active_accounts[account].is_virtual && active_accounts[account].balance;\n                });\n\n                if (has_updated_account_balance) {\n                  this.setHasNoAccountsBalance(false);\n                } // various issues happen when loading from cache\n                // e.g. new account may have been created, transfer may have been done elsewhere, etc\n                // so on load of this page just call it again\n\n\n                if (!is_logged_in) {\n                  _context2.next = 27;\n                  break;\n                }\n\n                _context2.next = 14;\n                return this.WS.authorized.transferBetweenAccounts();\n\n              case 14:\n                transfer_between_accounts = _context2.sent;\n\n                if (!transfer_between_accounts.error) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                this.error.setErrorMessage(transfer_between_accounts.error, this.onMountAccountTransfer);\n                setLoading(false);\n                return _context2.abrupt(\"return\");\n\n              case 19:\n                if (this.canDoAccountTransfer(transfer_between_accounts.accounts)) {\n                  _context2.next = 21;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 21:\n                _context2.next = 23;\n                return this.sortAccountsTransfer(transfer_between_accounts);\n\n              case 23:\n                this.setTransferFee();\n                this.setMinimumFee();\n                this.setTransferLimit();\n\n                if (((_this$accounts_list = this.accounts_list) === null || _this$accounts_list === void 0 ? void 0 : _this$accounts_list.length) > 0) {\n                  cfd_transfer_to_login_id = sessionStorage.getItem('cfd_transfer_to_login_id');\n                  sessionStorage.removeItem('cfd_transfer_to_login_id');\n                  obj_values = this.accounts_list.find(function (account) {\n                    return account.value === cfd_transfer_to_login_id;\n                  });\n\n                  if (obj_values) {\n                    if (hasTransferNotAllowedLoginid(obj_values.value)) {\n                      // check if selected to is not allowed account\n                      obj_values.error = getSelectedError(obj_values.value);\n                    }\n\n                    this.setSelectedTo(obj_values);\n                  }\n                }\n\n              case 27:\n                setLoading(false);\n\n              case 28:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function onMountAccountTransfer() {\n        return _onMountAccountTransfer.apply(this, arguments);\n      }\n\n      return onMountAccountTransfer;\n    }()\n  }, {\n    key: \"canDoAccountTransfer\",\n    value: function canDoAccountTransfer(accounts) {\n      var can_transfer = true; // should have at least one account with balance\n\n      if (!accounts.find(function (account) {\n        return +account.balance > 0;\n      })) {\n        can_transfer = false;\n        this.setHasNoAccountsBalance(true);\n      } else {\n        this.setHasNoAccountsBalance(false);\n      } // should have at least two real-money accounts\n\n\n      if (accounts.length <= 1) {\n        can_transfer = false;\n        this.setHasNoAccount(true);\n      } else {\n        this.setHasNoAccount(false);\n      }\n\n      if (!can_transfer) {\n        this.root_store.modules.cashier.general_store.setLoading(false);\n      }\n\n      return can_transfer;\n    }\n  }, {\n    key: \"setHasNoAccountsBalance\",\n    value: function setHasNoAccountsBalance(has_no_accounts_balance) {\n      this.has_no_accounts_balance = has_no_accounts_balance;\n    }\n  }, {\n    key: \"setHasNoAccount\",\n    value: function setHasNoAccount(has_no_account) {\n      this.has_no_account = has_no_account;\n    }\n  }, {\n    key: \"setTransferFee\",\n    value: function setTransferFee() {\n      var transfer_fee = (0,shared_.getPropertyValue)((0,shared_.getCurrencies)(), [this.selected_from.currency, 'transfer_between_accounts', 'fees', this.selected_to.currency]);\n      this.transfer_fee = Number(transfer_fee || 0);\n    }\n  }, {\n    key: \"setMinimumFee\",\n    value: function setMinimumFee() {\n      var decimals = (0,shared_.getDecimalPlaces)(this.selected_from.currency); // we need .toFixed() so that it doesn't display in scientific notation, e.g. 1e-8 for currencies with 8 decimal places\n\n      this.minimum_fee = (1 / Math.pow(10, decimals)).toFixed(decimals);\n    }\n  }, {\n    key: \"setTransferLimit\",\n    value: function setTransferLimit() {\n      var is_mt_transfer = this.selected_from.is_mt || this.selected_to.is_mt;\n      var is_dxtrade_transfer = this.selected_from.is_dxtrade || this.selected_to.is_dxtrade;\n      var limits_key;\n\n      if (is_mt_transfer) {\n        limits_key = 'limits_mt5';\n      } else if (is_dxtrade_transfer) {\n        limits_key = 'limits_dxtrade';\n      } else {\n        limits_key = 'limits';\n      }\n\n      var transfer_limit = (0,shared_.getPropertyValue)((0,shared_.getCurrencies)(), [this.selected_from.currency, 'transfer_between_accounts', limits_key]);\n      var balance = this.selected_from.balance;\n      var decimal_places = (0,shared_.getDecimalPlaces)(this.selected_from.currency); // we need .toFixed() so that it doesn't display in scientific notation, e.g. 1e-8 for currencies with 8 decimal places\n\n      this.transfer_limit = {\n        max: !(transfer_limit !== null && transfer_limit !== void 0 && transfer_limit.max) || +balance >= ((transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.min) || 0) && +balance <= (transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.max) ? balance : transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.max.toFixed(decimal_places),\n        min: transfer_limit !== null && transfer_limit !== void 0 && transfer_limit.min ? (+(transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.min)).toFixed(decimal_places) : null\n      };\n    }\n  }, {\n    key: \"sortAccountsTransfer\",\n    value: function () {\n      var _sortAccountsTransfer = account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(response_accounts) {\n        var _yield$this$WS$storag,\n            _yield$this$WS$tradin,\n            _this2 = this;\n\n        var transfer_between_accounts, mt5_login_list, dxtrade_accounts_list, accounts, arr_accounts;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.t0 = response_accounts;\n\n                if (_context3.t0) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                _context3.next = 4;\n                return this.WS.authorized.transferBetweenAccounts();\n\n              case 4:\n                _context3.t0 = _context3.sent;\n\n              case 5:\n                transfer_between_accounts = _context3.t0;\n\n                if (this.accounts_list.length) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                if (!transfer_between_accounts.error) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 9:\n                _context3.next = 11;\n                return this.WS.storage.mt5LoginList();\n\n              case 11:\n                _context3.t2 = _yield$this$WS$storag = _context3.sent;\n                _context3.t1 = _context3.t2 === null;\n\n                if (_context3.t1) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                _context3.t1 = _yield$this$WS$storag === void 0;\n\n              case 15:\n                if (!_context3.t1) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                _context3.t3 = void 0;\n                _context3.next = 20;\n                break;\n\n              case 19:\n                _context3.t3 = _yield$this$WS$storag.mt5_login_list;\n\n              case 20:\n                mt5_login_list = _context3.t3;\n                _context3.next = 23;\n                return this.WS.tradingPlatformAccountsList(shared_.CFD_PLATFORMS.DXTRADE);\n\n              case 23:\n                _context3.t5 = _yield$this$WS$tradin = _context3.sent;\n                _context3.t4 = _context3.t5 === null;\n\n                if (_context3.t4) {\n                  _context3.next = 27;\n                  break;\n                }\n\n                _context3.t4 = _yield$this$WS$tradin === void 0;\n\n              case 27:\n                if (!_context3.t4) {\n                  _context3.next = 31;\n                  break;\n                }\n\n                _context3.t6 = void 0;\n                _context3.next = 32;\n                break;\n\n              case 31:\n                _context3.t6 = _yield$this$WS$tradin.trading_platform_accounts;\n\n              case 32:\n                dxtrade_accounts_list = _context3.t6;\n                // TODO: remove this temporary mapping when API adds market_type and sub_account_type to transfer_between_accounts\n                accounts = transfer_between_accounts.accounts.map(function (account) {\n                  if (account.account_type === shared_.CFD_PLATFORMS.MT5 && Array.isArray(mt5_login_list) && mt5_login_list.length) {\n                    // account_type in transfer_between_accounts (mt5|binary)\n                    // gets overridden by account_type in mt5_login_list (demo|real)\n                    // since in cashier all these are real accounts, the mt5 account type is what we want to keep\n                    var found_account = mt5_login_list.find(function (acc) {\n                      return acc.login === account.loginid;\n                    });\n                    if (found_account === undefined) return account;\n                    return account_transfer_store_objectSpread(account_transfer_store_objectSpread(account_transfer_store_objectSpread({}, account), found_account), {}, {\n                      account_type: shared_.CFD_PLATFORMS.MT5\n                    });\n                  }\n\n                  if (account.account_type === shared_.CFD_PLATFORMS.DXTRADE && Array.isArray(dxtrade_accounts_list) && dxtrade_accounts_list.length) {\n                    // account_type in transfer_between_accounts (mt5|binary)\n                    // gets overridden by account_type in dxtrade_accounts_list (demo|real)\n                    // since in cashier all these are real accounts, the mt5 account type is what we want to keep\n                    var _found_account = dxtrade_accounts_list.find(function (acc) {\n                      return acc.account_id === account.loginid;\n                    });\n\n                    if (_found_account === undefined) return account;\n                    return account_transfer_store_objectSpread(account_transfer_store_objectSpread(account_transfer_store_objectSpread({}, account), _found_account), {}, {\n                      account_type: shared_.CFD_PLATFORMS.DXTRADE\n                    });\n                  }\n\n                  return account;\n                }); // sort accounts as follows:\n                // for MT5, synthetic, financial, financial stp\n                // for non-MT5, fiat, crypto (alphabetically by currency)\n                // should have more than one account\n\n                if (transfer_between_accounts.accounts.length > 1) {\n                  accounts.sort(function (a, b) {\n                    var a_is_mt = a.account_type === shared_.CFD_PLATFORMS.MT5;\n                    var b_is_mt = b.account_type === shared_.CFD_PLATFORMS.MT5;\n                    var a_is_crypto = !a_is_mt && (0,shared_.isCryptocurrency)(a.currency);\n                    var b_is_crypto = !b_is_mt && (0,shared_.isCryptocurrency)(b.currency);\n                    var a_is_fiat = !a_is_mt && !a_is_crypto;\n                    var b_is_fiat = !b_is_mt && !b_is_crypto;\n\n                    if (a_is_mt && b_is_mt) {\n                      if (a.market_type === 'gaming' || a.market_type === 'synthetic') {\n                        return -1;\n                      }\n\n                      if (a.sub_account_type === 'financial') {\n                        return b.market_type === 'gaming' || b.market_type === 'synthetic' ? 1 : -1;\n                      }\n\n                      return 1;\n                    } else if (a_is_crypto && b_is_crypto || a_is_fiat && b_is_fiat) {\n                      return a.currency < b.currency ? -1 : 1;\n                    } else if (a_is_crypto && b_is_mt || a_is_fiat && b_is_crypto || a_is_fiat && b_is_mt) {\n                      return -1;\n                    }\n\n                    return a_is_mt ? -1 : 1;\n                  });\n                }\n\n                arr_accounts = [];\n                this.setSelectedTo({}); // set selected to empty each time so we can redetermine its value on reload\n\n                accounts.forEach(function (account) {\n                  var _cfd_platforms$accoun, _cfd_platforms$accoun2;\n\n                  var cfd_platforms = {\n                    mt5: {\n                      name: 'DMT5',\n                      icon: 'IcMt5'\n                    },\n                    dxtrade: {\n                      name: 'Deriv X',\n                      icon: 'IcDxtrade'\n                    }\n                  };\n                  var is_cfd = Object.keys(cfd_platforms).includes(account.account_type);\n                  var cfd_text_display = (_cfd_platforms$accoun = cfd_platforms[account.account_type]) === null || _cfd_platforms$accoun === void 0 ? void 0 : _cfd_platforms$accoun.name;\n                  var cfd_icon_display = \"\".concat((_cfd_platforms$accoun2 = cfd_platforms[account.account_type]) === null || _cfd_platforms$accoun2 === void 0 ? void 0 : _cfd_platforms$accoun2.icon, \"-\").concat((0,shared_.getCFDAccount)({\n                    market_type: account.market_type,\n                    sub_account_type: account.sub_account_type,\n                    platform: account.account_type,\n                    is_eu: _this2.root_store.client.is_eu\n                  }));\n                  var account_text_display = is_cfd ? \"\".concat(cfd_text_display, \" \").concat((0,shared_.getCFDAccountDisplay)({\n                    market_type: account.market_type,\n                    sub_account_type: account.sub_account_type,\n                    platform: account.account_type,\n                    is_eu: _this2.root_store.client.is_eu\n                  })) : (0,shared_.getCurrencyDisplayCode)(account.currency !== 'eUSDT' ? account.currency.toUpperCase() : account.currency);\n\n                  var obj_values = account_transfer_store_objectSpread({\n                    text: account_text_display,\n                    value: account.loginid,\n                    balance: account.balance,\n                    currency: account.currency,\n                    is_crypto: (0,shared_.isCryptocurrency)(account.currency),\n                    is_mt: account.account_type === shared_.CFD_PLATFORMS.MT5,\n                    is_dxtrade: account.account_type === shared_.CFD_PLATFORMS.DXTRADE\n                  }, is_cfd && {\n                    platform_icon: cfd_icon_display,\n                    market_type: (0,shared_.getCFDAccount)({\n                      market_type: account.market_type,\n                      sub_account_type: account.sub_account_type,\n                      platform: account.account_type,\n                      is_eu: _this2.root_store.client.is_eu\n                    })\n                  }); // set current logged in client as the default transfer from account\n\n\n                  if (account.loginid === _this2.root_store.client.loginid) {\n                    // check if selected from is not allowed account\n                    if (hasTransferNotAllowedLoginid(obj_values.value)) {\n                      obj_values.error = getSelectedError(obj_values.value, true);\n                    }\n\n                    _this2.setSelectedFrom(obj_values);\n                  } else if ((0,shared_.isEmptyObject)(_this2.selected_to)) {\n                    if (hasTransferNotAllowedLoginid(obj_values.value)) {\n                      // check if selected to is not allowed account\n                      obj_values.error = getSelectedError(obj_values.value);\n                    } // set the first available account as the default transfer to account\n\n\n                    _this2.setSelectedTo(obj_values);\n                  }\n\n                  arr_accounts.push(obj_values);\n                });\n                this.setAccounts(arr_accounts);\n\n              case 39:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function sortAccountsTransfer(_x2) {\n        return _sortAccountsTransfer.apply(this, arguments);\n      }\n\n      return sortAccountsTransfer;\n    }()\n  }, {\n    key: \"setSelectedFrom\",\n    value: function setSelectedFrom(obj_values) {\n      this.selected_from = obj_values;\n    }\n  }, {\n    key: \"setSelectedTo\",\n    value: function setSelectedTo(obj_values) {\n      this.selected_to = obj_values;\n    }\n  }, {\n    key: \"setAccounts\",\n    value: function setAccounts(arr_accounts) {\n      this.accounts_list = arr_accounts;\n    }\n  }, {\n    key: \"setIsTransferConfirm\",\n    value: function setIsTransferConfirm(is_transfer_confirm) {\n      this.is_transfer_confirm = is_transfer_confirm;\n    }\n  }, {\n    key: \"setAccountTransferAmount\",\n    value: function setAccountTransferAmount(amount) {\n      this.account_transfer_amount = amount;\n    }\n  }, {\n    key: \"setIsTransferSuccessful\",\n    value: function setIsTransferSuccessful(is_transfer_successful) {\n      this.is_transfer_successful = is_transfer_successful;\n    }\n  }, {\n    key: \"setIsMT5TransferInProgress\",\n    value: function setIsMT5TransferInProgress(is_mt5_transfer_in_progress) {\n      this.is_mt5_transfer_in_progress = is_mt5_transfer_in_progress;\n    }\n  }, {\n    key: \"setReceiptTransfer\",\n    value: function setReceiptTransfer(_ref8) {\n      var amount = _ref8.amount;\n      this.receipt = {\n        amount_transferred: amount\n      };\n    }\n  }, {\n    key: \"onChangeTransferFrom\",\n    value: function onChangeTransferFrom(_ref9) {\n      var target = _ref9.target;\n      this.error.setErrorMessage('');\n      this.selected_from.error = '';\n      var accounts = this.accounts_list;\n      var selected_from = accounts.find(function (account) {\n        return account.value === target.value;\n      }); // if new value of selected_from is the same as the current selected_to\n      // switch the value of selected_from and selected_to\n\n      if (selected_from.value === this.selected_to.value) {\n        this.onChangeTransferTo({\n          target: {\n            value: this.selected_from.value\n          }\n        });\n      } else if (selected_from.is_mt && this.selected_to.is_mt || selected_from.is_dxtrade && this.selected_to.is_dxtrade || selected_from.is_dxtrade && this.selected_to.is_mt || selected_from.is_mt && this.selected_to.is_dxtrade) {\n        // not allowed to transfer from MT to MT\n        // not allowed to transfer from Dxtrade to Dxtrade\n        // not allowed to transfer between MT and Dxtrade\n        var first_non_cfd = this.accounts_list.find(function (account) {\n          return !account.is_mt && !account.is_dxtrade;\n        });\n        this.onChangeTransferTo({\n          target: {\n            value: first_non_cfd.value\n          }\n        });\n      }\n\n      if (hasTransferNotAllowedLoginid(selected_from.value)) {\n        selected_from.error = getSelectedError(selected_from.value, true);\n      }\n\n      this.selected_from = selected_from;\n      this.setTransferFee();\n      this.setMinimumFee();\n      this.setTransferLimit();\n    }\n  }, {\n    key: \"onChangeTransferTo\",\n    value: function onChangeTransferTo(_ref10) {\n      var target = _ref10.target;\n      this.error.setErrorMessage('');\n      this.selected_to.error = '';\n      var accounts = this.accounts_list;\n      this.selected_to = accounts.find(function (account) {\n        return account.value === target.value;\n      }) || {};\n\n      if (hasTransferNotAllowedLoginid(this.selected_to.value)) {\n        this.selected_to.error = getSelectedError(this.selected_to.value);\n      }\n\n      this.setTransferFee();\n      this.setMinimumFee();\n      this.setTransferLimit();\n    }\n  }, {\n    key: \"setTransferPercentageSelectorResult\",\n    value: function setTransferPercentageSelectorResult(amount) {\n      var _this$root_store$modu = this.root_store.modules.cashier,\n          crypto_fiat_converter = _this$root_store$modu.crypto_fiat_converter,\n          general_store = _this$root_store$modu.general_store;\n      var selected_from_currency = this.selected_from.currency;\n      var selected_to_currency = this.selected_to.currency;\n\n      if (amount > 0 || +this.selected_from.balance === 0) {\n        crypto_fiat_converter.setConverterFromAmount(amount);\n        this.validateTransferFromAmount();\n        crypto_fiat_converter.onChangeConverterFromAmount({\n          target: {\n            value: amount\n          }\n        }, selected_from_currency, selected_to_currency);\n      } else if (+this.selected_from.balance === 0) {\n        crypto_fiat_converter.setConverterFromAmount(amount);\n        this.validateTransferFromAmount();\n      } else {\n        crypto_fiat_converter.resetConverter();\n      }\n\n      crypto_fiat_converter.setIsTimerVisible(false);\n      general_store.percentageSelectorSelectionStatus(false);\n    }\n  }, {\n    key: \"validateTransferFromAmount\",\n    value: function validateTransferFromAmount() {\n      var _this$root_store$modu2 = this.root_store.modules.cashier.crypto_fiat_converter,\n          converter_from_amount = _this$root_store$modu2.converter_from_amount,\n          setConverterFromError = _this$root_store$modu2.setConverterFromError;\n\n      if (!converter_from_amount) {\n        setConverterFromError((0,translations_.localize)('This field is required.'));\n      } else {\n        var _validNumber = (0,shared_.validNumber)(converter_from_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(this.selected_from.currency),\n          min: this.transfer_limit.min,\n          max: this.transfer_limit.max\n        }),\n            is_ok = _validNumber.is_ok,\n            message = _validNumber.message;\n\n        if (!is_ok) {\n          setConverterFromError(message);\n        } else if (+this.selected_from.balance < +converter_from_amount) {\n          setConverterFromError((0,translations_.localize)('Insufficient funds'));\n        } else {\n          setConverterFromError('');\n        }\n      }\n    }\n  }, {\n    key: \"validateTransferToAmount\",\n    value: function validateTransferToAmount() {\n      var _this$root_store$modu3 = this.root_store.modules.cashier.crypto_fiat_converter,\n          converter_to_amount = _this$root_store$modu3.converter_to_amount,\n          setConverterToError = _this$root_store$modu3.setConverterToError;\n\n      if (converter_to_amount) {\n        var currency = this.selected_to.currency;\n\n        var _validNumber2 = (0,shared_.validNumber)(converter_to_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(currency)\n        }),\n            is_ok = _validNumber2.is_ok,\n            message = _validNumber2.message;\n\n        if (!is_ok) {\n          setConverterToError(message);\n        } else {\n          setConverterToError('');\n        }\n      }\n    }\n  }]);\n\n  return AccountTransferStore;\n}(), (account_transfer_store_descriptor = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"accounts_list\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), account_transfer_store_descriptor2 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"container\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return constants.containers.account_transfer;\n  }\n}), account_transfer_store_descriptor3 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ErrorStore();\n  }\n}), account_transfer_store_descriptor4 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"has_no_account\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), account_transfer_store_descriptor5 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"has_no_accounts_balance\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), account_transfer_store_descriptor6 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"is_transfer_confirm\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), account_transfer_store_descriptor7 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"is_transfer_successful\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), account_transfer_store_descriptor8 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"is_mt5_transfer_in_progress\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), account_transfer_store_descriptor9 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"minimum_fee\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor10 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"receipt\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), _descriptor11 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"selected_from\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), _descriptor12 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"selected_to\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), _descriptor13 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"account_transfer_amount\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor14 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"transfer_fee\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor15 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"transfer_limit\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"is_account_transfer_visible\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"is_account_transfer_visible\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"is_transfer_locked\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"is_transfer_locked\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setBalanceByLoginId\", [account_transfer_store_dec], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setBalanceByLoginId\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setBalanceSelectedFrom\", [account_transfer_store_dec2], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setBalanceSelectedFrom\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setBalanceSelectedTo\", [account_transfer_store_dec3], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setBalanceSelectedTo\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"onMountAccountTransfer\", [account_transfer_store_dec4], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"onMountAccountTransfer\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setHasNoAccountsBalance\", [account_transfer_store_dec5], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setHasNoAccountsBalance\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setHasNoAccount\", [account_transfer_store_dec6], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setHasNoAccount\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setTransferFee\", [account_transfer_store_dec7], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setTransferFee\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setMinimumFee\", [_dec8], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setMinimumFee\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setTransferLimit\", [_dec9], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setTransferLimit\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"sortAccountsTransfer\", [_dec10], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"sortAccountsTransfer\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setSelectedFrom\", [_dec11], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setSelectedFrom\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setSelectedTo\", [_dec12], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setSelectedTo\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setAccounts\", [_dec13], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setAccounts\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setIsTransferConfirm\", [_dec14], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setIsTransferConfirm\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setAccountTransferAmount\", [_dec15], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setAccountTransferAmount\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setIsTransferSuccessful\", [_dec16], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setIsTransferSuccessful\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setIsMT5TransferInProgress\", [_dec17], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setIsMT5TransferInProgress\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setReceiptTransfer\", [_dec18], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setReceiptTransfer\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"onChangeTransferFrom\", [_dec19], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"onChangeTransferFrom\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"onChangeTransferTo\", [_dec20], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"onChangeTransferTo\"), account_transfer_store_class.prototype), _descriptor16 = account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"resetAccountTransfer\", [_dec21], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this3 = this;\n\n    return /*#__PURE__*/account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _this3.setIsTransferConfirm(false);\n\n              _this3.setTransferLimit();\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n  }\n}), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"setTransferPercentageSelectorResult\", [_dec22], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"setTransferPercentageSelectorResult\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"validateTransferFromAmount\", [_dec23], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"validateTransferFromAmount\"), account_transfer_store_class.prototype), account_transfer_store_applyDecoratedDescriptor(account_transfer_store_class.prototype, \"validateTransferToAmount\", [_dec24], Object.getOwnPropertyDescriptor(account_transfer_store_class.prototype, \"validateTransferToAmount\"), account_transfer_store_class.prototype)), account_transfer_store_class));\n\n;// CONCATENATED MODULE: ./Stores/crypto-fiat-converter-store.js\nvar crypto_fiat_converter_store_dec, crypto_fiat_converter_store_dec2, crypto_fiat_converter_store_dec3, crypto_fiat_converter_store_dec4, crypto_fiat_converter_store_dec5, crypto_fiat_converter_store_dec6, crypto_fiat_converter_store_dec7, crypto_fiat_converter_store_dec8, crypto_fiat_converter_store_dec9, crypto_fiat_converter_store_dec10, crypto_fiat_converter_store_dec11, crypto_fiat_converter_store_dec12, crypto_fiat_converter_store_class, crypto_fiat_converter_store_descriptor, crypto_fiat_converter_store_descriptor2, crypto_fiat_converter_store_descriptor3, crypto_fiat_converter_store_descriptor4, crypto_fiat_converter_store_descriptor5;\n\nfunction crypto_fiat_converter_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction crypto_fiat_converter_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { crypto_fiat_converter_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { crypto_fiat_converter_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction crypto_fiat_converter_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction crypto_fiat_converter_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction crypto_fiat_converter_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction crypto_fiat_converter_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) crypto_fiat_converter_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) crypto_fiat_converter_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction crypto_fiat_converter_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction crypto_fiat_converter_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\nvar CryptoFiatConverterStore = (crypto_fiat_converter_store_dec = external_mobx_.action.bound, crypto_fiat_converter_store_dec2 = external_mobx_.action.bound, crypto_fiat_converter_store_dec3 = external_mobx_.action.bound, crypto_fiat_converter_store_dec4 = external_mobx_.action.bound, crypto_fiat_converter_store_dec5 = external_mobx_.action.bound, crypto_fiat_converter_store_dec6 = external_mobx_.action.bound, crypto_fiat_converter_store_dec7 = external_mobx_.action.bound, crypto_fiat_converter_store_dec8 = external_mobx_.action.bound, crypto_fiat_converter_store_dec9 = external_mobx_.action.bound, crypto_fiat_converter_store_dec10 = external_mobx_.action.bound, crypto_fiat_converter_store_dec11 = external_mobx_.action.bound, crypto_fiat_converter_store_dec12 = external_mobx_.action.bound, (crypto_fiat_converter_store_class = /*#__PURE__*/function () {\n  function CryptoFiatConverterStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    crypto_fiat_converter_store_classCallCheck(this, CryptoFiatConverterStore);\n\n    crypto_fiat_converter_store_initializerDefineProperty(this, \"converter_from_amount\", crypto_fiat_converter_store_descriptor, this);\n\n    crypto_fiat_converter_store_initializerDefineProperty(this, \"converter_to_amount\", crypto_fiat_converter_store_descriptor2, this);\n\n    crypto_fiat_converter_store_initializerDefineProperty(this, \"converter_from_error\", crypto_fiat_converter_store_descriptor3, this);\n\n    crypto_fiat_converter_store_initializerDefineProperty(this, \"converter_to_error\", crypto_fiat_converter_store_descriptor4, this);\n\n    crypto_fiat_converter_store_initializerDefineProperty(this, \"is_timer_visible\", crypto_fiat_converter_store_descriptor5, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  crypto_fiat_converter_store_createClass(CryptoFiatConverterStore, [{\n    key: \"setConverterFromAmount\",\n    value: function setConverterFromAmount(amount) {\n      this.converter_from_amount = amount;\n    }\n  }, {\n    key: \"setConverterToAmount\",\n    value: function setConverterToAmount(amount) {\n      this.converter_to_amount = amount;\n    }\n  }, {\n    key: \"setConverterFromError\",\n    value: function setConverterFromError(error) {\n      this.converter_from_error = error;\n    }\n  }, {\n    key: \"setConverterToError\",\n    value: function setConverterToError(error) {\n      this.converter_to_error = error;\n    }\n  }, {\n    key: \"setIsTimerVisible\",\n    value: function setIsTimerVisible(is_timer_visible) {\n      this.is_timer_visible = is_timer_visible;\n    }\n  }, {\n    key: \"resetTimer\",\n    value: function resetTimer() {\n      this.setIsTimerVisible(false);\n    }\n  }, {\n    key: \"getExchangeRate\",\n    value: function () {\n      var _getExchangeRate = crypto_fiat_converter_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(from_currency, to_currency) {\n        var _yield$this$WS$send, exchange_rates;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.WS.send({\n                  exchange_rates: 1,\n                  base_currency: from_currency\n                });\n\n              case 2:\n                _yield$this$WS$send = _context.sent;\n                exchange_rates = _yield$this$WS$send.exchange_rates;\n                return _context.abrupt(\"return\", exchange_rates.rates[to_currency]);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getExchangeRate(_x, _x2) {\n        return _getExchangeRate.apply(this, arguments);\n      }\n\n      return getExchangeRate;\n    }()\n  }, {\n    key: \"validateFromAmount\",\n    value: function validateFromAmount() {\n      var _this$root_store$modu = this.root_store.modules.cashier,\n          account_transfer = _this$root_store$modu.account_transfer,\n          general_store = _this$root_store$modu.general_store,\n          withdraw = _this$root_store$modu.withdraw;\n\n      if (general_store.active_container === account_transfer.container) {\n        account_transfer.validateTransferFromAmount();\n      } else {\n        withdraw.validateWithdrawFromAmount();\n      }\n    }\n  }, {\n    key: \"validateToAmount\",\n    value: function validateToAmount() {\n      var _this$root_store$modu2 = this.root_store.modules.cashier,\n          account_transfer = _this$root_store$modu2.account_transfer,\n          general_store = _this$root_store$modu2.general_store,\n          withdraw = _this$root_store$modu2.withdraw;\n\n      if (general_store.active_container === account_transfer.container) {\n        account_transfer.validateTransferToAmount();\n      } else {\n        withdraw.validateWithdrawToAmount();\n      }\n    }\n  }, {\n    key: \"onChangeConverterFromAmount\",\n    value: function () {\n      var _onChangeConverterFromAmount = crypto_fiat_converter_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref2, from_currency, to_currency) {\n        var target, _this$root_store$modu3, account_transfer, general_store, rate, decimals, amount;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                target = _ref2.target;\n                _this$root_store$modu3 = this.root_store.modules.cashier, account_transfer = _this$root_store$modu3.account_transfer, general_store = _this$root_store$modu3.general_store;\n                this.resetTimer();\n\n                if (!target.value) {\n                  _context2.next = 27;\n                  break;\n                }\n\n                this.setConverterFromAmount(target.value);\n                this.validateFromAmount();\n                general_store.percentageSelectorSelectionStatus(true);\n                general_store.calculatePercentage();\n\n                if (!this.converter_from_error) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                this.setConverterToAmount('');\n                this.setConverterToError('');\n                this.setIsTimerVisible(false);\n                account_transfer.setAccountTransferAmount('');\n                _context2.next = 25;\n                break;\n\n              case 15:\n                _context2.next = 17;\n                return this.getExchangeRate(from_currency, to_currency);\n\n              case 17:\n                rate = _context2.sent;\n                decimals = (0,shared_.getDecimalPlaces)(to_currency);\n                amount = (rate * target.value).toFixed(decimals);\n\n                if (+amount || this.converter_from_amount) {\n                  this.setConverterToAmount(amount);\n                } else {\n                  this.setConverterToAmount('');\n                }\n\n                this.validateToAmount();\n                this.setConverterToError('');\n                this.setIsTimerVisible(true);\n                account_transfer.setAccountTransferAmount(target.value);\n\n              case 25:\n                _context2.next = 28;\n                break;\n\n              case 27:\n                this.resetConverter();\n\n              case 28:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function onChangeConverterFromAmount(_x3, _x4, _x5) {\n        return _onChangeConverterFromAmount.apply(this, arguments);\n      }\n\n      return onChangeConverterFromAmount;\n    }()\n  }, {\n    key: \"onChangeConverterToAmount\",\n    value: function () {\n      var _onChangeConverterToAmount = crypto_fiat_converter_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref3, from_currency, to_currency) {\n        var target, _this$root_store$modu4, account_transfer, general_store, rate, decimals, amount;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                target = _ref3.target;\n                _this$root_store$modu4 = this.root_store.modules.cashier, account_transfer = _this$root_store$modu4.account_transfer, general_store = _this$root_store$modu4.general_store;\n                this.resetTimer();\n\n                if (!target.value) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                this.setConverterToAmount(target.value);\n                this.validateToAmount();\n\n                if (!this.converter_to_error) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                this.setConverterFromAmount('');\n                this.setConverterFromError('');\n                this.setIsTimerVisible(false);\n                account_transfer.setAccountTransferAmount('');\n                _context3.next = 23;\n                break;\n\n              case 13:\n                _context3.next = 15;\n                return this.getExchangeRate(from_currency, to_currency);\n\n              case 15:\n                rate = _context3.sent;\n                decimals = (0,shared_.getDecimalPlaces)(to_currency);\n                amount = (rate * target.value).toFixed(decimals);\n\n                if (+amount || this.converter_to_amount) {\n                  this.setConverterFromAmount(amount);\n                } else {\n                  this.setConverterFromAmount('');\n                }\n\n                general_store.percentageSelectorSelectionStatus(true);\n                general_store.calculatePercentage();\n                this.validateFromAmount();\n\n                if (this.converter_from_error) {\n                  this.setIsTimerVisible(false);\n                  account_transfer.setAccountTransferAmount('');\n                } else {\n                  this.setConverterFromError('');\n                  this.setIsTimerVisible(true);\n                  account_transfer.setAccountTransferAmount(amount);\n                }\n\n              case 23:\n                _context3.next = 26;\n                break;\n\n              case 25:\n                this.resetConverter();\n\n              case 26:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onChangeConverterToAmount(_x6, _x7, _x8) {\n        return _onChangeConverterToAmount.apply(this, arguments);\n      }\n\n      return onChangeConverterToAmount;\n    }()\n  }, {\n    key: \"resetConverter\",\n    value: function resetConverter() {\n      this.setConverterFromAmount('');\n      this.setConverterToAmount('');\n      this.setConverterFromError('');\n      this.setConverterToError('');\n      this.setIsTimerVisible(false);\n      this.root_store.modules.cashier.general_store.percentageSelectorSelectionStatus(true);\n    }\n  }]);\n\n  return CryptoFiatConverterStore;\n}(), (crypto_fiat_converter_store_descriptor = crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"converter_from_amount\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), crypto_fiat_converter_store_descriptor2 = crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"converter_to_amount\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), crypto_fiat_converter_store_descriptor3 = crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"converter_from_error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), crypto_fiat_converter_store_descriptor4 = crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"converter_to_error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), crypto_fiat_converter_store_descriptor5 = crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"is_timer_visible\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterFromAmount\", [crypto_fiat_converter_store_dec], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterFromAmount\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterToAmount\", [crypto_fiat_converter_store_dec2], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterToAmount\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterFromError\", [crypto_fiat_converter_store_dec3], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterFromError\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterToError\", [crypto_fiat_converter_store_dec4], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"setConverterToError\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"setIsTimerVisible\", [crypto_fiat_converter_store_dec5], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"setIsTimerVisible\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"resetTimer\", [crypto_fiat_converter_store_dec6], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"resetTimer\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"getExchangeRate\", [crypto_fiat_converter_store_dec7], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"getExchangeRate\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"validateFromAmount\", [crypto_fiat_converter_store_dec8], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"validateFromAmount\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"validateToAmount\", [crypto_fiat_converter_store_dec9], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"validateToAmount\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"onChangeConverterFromAmount\", [crypto_fiat_converter_store_dec10], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"onChangeConverterFromAmount\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"onChangeConverterToAmount\", [crypto_fiat_converter_store_dec11], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"onChangeConverterToAmount\"), crypto_fiat_converter_store_class.prototype), crypto_fiat_converter_store_applyDecoratedDescriptor(crypto_fiat_converter_store_class.prototype, \"resetConverter\", [crypto_fiat_converter_store_dec12], Object.getOwnPropertyDescriptor(crypto_fiat_converter_store_class.prototype, \"resetConverter\"), crypto_fiat_converter_store_class.prototype)), crypto_fiat_converter_store_class));\n\n;// CONCATENATED MODULE: ./Stores/deposit-store.js\nvar deposit_store_dec, deposit_store_dec2, deposit_store_class, deposit_store_descriptor, deposit_store_descriptor2;\n\nfunction deposit_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction deposit_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { deposit_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { deposit_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction deposit_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction deposit_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction deposit_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction deposit_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) deposit_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) deposit_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction deposit_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction deposit_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\nvar DepositStore = (deposit_store_dec = external_mobx_.action.bound, deposit_store_dec2 = external_mobx_.action.bound, (deposit_store_class = /*#__PURE__*/function () {\n  function DepositStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    deposit_store_classCallCheck(this, DepositStore);\n\n    deposit_store_initializerDefineProperty(this, \"container\", deposit_store_descriptor, this);\n\n    deposit_store_initializerDefineProperty(this, \"error\", deposit_store_descriptor2, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  deposit_store_createClass(DepositStore, [{\n    key: \"onMountDeposit\",\n    value: function () {\n      var _onMountDeposit = deposit_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$root_store, client, modules, _modules$cashier$gene, active_container, is_crypto, onMountCommon, setLoading, setOnRemount, _modules$cashier$ifra, checkIframeLoaded, clearTimeoutCashierUrl, is_session_timeout, setContainerHeight, setIframeUrl, setSessionTimeout, setTimeoutCashierUrl, is_virtual, current_container, response_cashier;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                _modules$cashier$gene = modules.cashier.general_store, active_container = _modules$cashier$gene.active_container, is_crypto = _modules$cashier$gene.is_crypto, onMountCommon = _modules$cashier$gene.onMountCommon, setLoading = _modules$cashier$gene.setLoading, setOnRemount = _modules$cashier$gene.setOnRemount;\n                _modules$cashier$ifra = modules.cashier.iframe, checkIframeLoaded = _modules$cashier$ifra.checkIframeLoaded, clearTimeoutCashierUrl = _modules$cashier$ifra.clearTimeoutCashierUrl, is_session_timeout = _modules$cashier$ifra.is_session_timeout, setContainerHeight = _modules$cashier$ifra.setContainerHeight, setIframeUrl = _modules$cashier$ifra.setIframeUrl, setSessionTimeout = _modules$cashier$ifra.setSessionTimeout, setTimeoutCashierUrl = _modules$cashier$ifra.setTimeoutCashierUrl;\n                is_virtual = client.is_virtual;\n                current_container = active_container;\n                setOnRemount(this.onMountDeposit);\n                _context.next = 8;\n                return onMountCommon();\n\n              case 8:\n                this.error.setErrorMessage('');\n                setContainerHeight(0);\n                setLoading(true);\n\n                if (is_session_timeout) {\n                  _context.next = 14;\n                  break;\n                }\n\n                checkIframeLoaded();\n                return _context.abrupt(\"return\");\n\n              case 14:\n                // if session has timed out reset everything\n                setIframeUrl('');\n\n                if (!is_virtual) {\n                  _context.next = 18;\n                  break;\n                }\n\n                setLoading(false); // if virtual, clear everything and don't proceed further\n                // if no verification code, we should request again\n\n                return _context.abrupt(\"return\");\n\n              case 18:\n                if (is_crypto) {\n                  _context.next = 36;\n                  break;\n                }\n\n                _context.next = 21;\n                return this.WS.authorized.cashier(active_container, {\n                  verification_code: 'undefined'\n                });\n\n              case 21:\n                response_cashier = _context.sent;\n\n                if (!(current_container !== active_container)) {\n                  _context.next = 25;\n                  break;\n                }\n\n                setLoading(false);\n                return _context.abrupt(\"return\");\n\n              case 25:\n                if (!response_cashier.error) {\n                  _context.next = 31;\n                  break;\n                }\n\n                this.error.handleCashierError(response_cashier.error);\n                setSessionTimeout(true);\n                clearTimeoutCashierUrl();\n                _context.next = 36;\n                break;\n\n              case 31:\n                _context.next = 33;\n                return checkIframeLoaded();\n\n              case 33:\n                setIframeUrl(response_cashier.cashier);\n                setSessionTimeout(false);\n                setTimeoutCashierUrl();\n\n              case 36:\n                setLoading(false);\n\n              case 37:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onMountDeposit() {\n        return _onMountDeposit.apply(this, arguments);\n      }\n\n      return onMountDeposit;\n    }()\n  }, {\n    key: \"is_deposit_locked\",\n    get: function get() {\n      var _this$root_store$clie = this.root_store.client,\n          is_authentication_needed = _this$root_store$clie.is_authentication_needed,\n          is_tnc_needed = _this$root_store$clie.is_tnc_needed,\n          is_financial_account = _this$root_store$clie.is_financial_account,\n          is_financial_information_incomplete = _this$root_store$clie.is_financial_information_incomplete,\n          is_trading_experience_incomplete = _this$root_store$clie.is_trading_experience_incomplete,\n          account_status = _this$root_store$clie.account_status,\n          is_eu = _this$root_store$clie.is_eu,\n          mt5_login_list = _this$root_store$clie.mt5_login_list,\n          is_deposit_lock = _this$root_store$clie.is_deposit_lock;\n      if (!(account_status !== null && account_status !== void 0 && account_status.status)) return false;\n      var need_authentication = this.error.is_ask_authentication || is_authentication_needed && is_eu;\n      var need_financial_assessment = is_financial_account && (is_financial_information_incomplete || is_trading_experience_incomplete); // CR can deposit without accepting latest tnc except those with Financial STP\n\n      var need_tnc = (is_eu || mt5_login_list.some(function (item) {\n        return item.account_type === 'real' && item.sub_account_type === 'financial_stp';\n      })) && is_tnc_needed;\n      return is_deposit_lock || need_authentication || need_tnc || need_financial_assessment || this.error.is_ask_financial_risk_approval;\n    }\n  }, {\n    key: \"submitFundsProtection\",\n    value: function submitFundsProtection() {\n      var _this = this;\n\n      this.WS.send({\n        ukgc_funds_protection: 1,\n        tnc_approval: 1\n      }).then(function (response) {\n        if (response.error) {\n          _this.error.setMessage(response.error.message);\n        } else {\n          location.reload();\n        }\n      });\n    }\n  }]);\n\n  return DepositStore;\n}(), (deposit_store_descriptor = deposit_store_applyDecoratedDescriptor(deposit_store_class.prototype, \"container\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return constants.containers.deposit;\n  }\n}), deposit_store_descriptor2 = deposit_store_applyDecoratedDescriptor(deposit_store_class.prototype, \"error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ErrorStore();\n  }\n}), deposit_store_applyDecoratedDescriptor(deposit_store_class.prototype, \"onMountDeposit\", [deposit_store_dec], Object.getOwnPropertyDescriptor(deposit_store_class.prototype, \"onMountDeposit\"), deposit_store_class.prototype), deposit_store_applyDecoratedDescriptor(deposit_store_class.prototype, \"is_deposit_locked\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(deposit_store_class.prototype, \"is_deposit_locked\"), deposit_store_class.prototype), deposit_store_applyDecoratedDescriptor(deposit_store_class.prototype, \"submitFundsProtection\", [deposit_store_dec2], Object.getOwnPropertyDescriptor(deposit_store_class.prototype, \"submitFundsProtection\"), deposit_store_class.prototype)), deposit_store_class));\n\n;// CONCATENATED MODULE: ./Stores/error-dialog-store.js\nvar error_dialog_store_dec, error_dialog_store_dec2, error_dialog_store_dec3, error_dialog_store_dec4, error_dialog_store_dec5, error_dialog_store_dec6, error_dialog_store_dec7, error_dialog_store_class, error_dialog_store_descriptor, error_dialog_store_descriptor2, error_dialog_store_descriptor3, error_dialog_store_descriptor4, error_dialog_store_descriptor5;\n\nfunction error_dialog_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction error_dialog_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction error_dialog_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction error_dialog_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) error_dialog_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) error_dialog_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction error_dialog_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction error_dialog_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\nvar ErrorDialogStore = (error_dialog_store_dec = external_mobx_.action.bound, error_dialog_store_dec2 = external_mobx_.action.bound, error_dialog_store_dec3 = external_mobx_.action.bound, error_dialog_store_dec4 = external_mobx_.action.bound, error_dialog_store_dec5 = external_mobx_.action.bound, error_dialog_store_dec6 = external_mobx_.action.bound, error_dialog_store_dec7 = external_mobx_.action.bound, (error_dialog_store_class = /*#__PURE__*/function () {\n  function ErrorDialogStore() {\n    error_dialog_store_classCallCheck(this, ErrorDialogStore);\n\n    error_dialog_store_initializerDefineProperty(this, \"confirm_button_text\", error_dialog_store_descriptor, this);\n\n    error_dialog_store_initializerDefineProperty(this, \"error_message\", error_dialog_store_descriptor2, this);\n\n    error_dialog_store_initializerDefineProperty(this, \"has_no_close_icon\", error_dialog_store_descriptor3, this);\n\n    error_dialog_store_initializerDefineProperty(this, \"should_show\", error_dialog_store_descriptor4, this);\n\n    error_dialog_store_initializerDefineProperty(this, \"should_not_show_title\", error_dialog_store_descriptor5, this);\n  }\n\n  error_dialog_store_createClass(ErrorDialogStore, [{\n    key: \"setShouldShow\",\n    value: function setShouldShow(value) {\n      this.should_show = value;\n    }\n  }, {\n    key: \"setErrorMessage\",\n    value: function setErrorMessage(message) {\n      this.error_message = message;\n      this.setShouldShow(true);\n    }\n  }, {\n    key: \"setConfirmButtonText\",\n    value: function setConfirmButtonText(text) {\n      this.confirm_button_text = text;\n    }\n  }, {\n    key: \"setShouldNotShowTitle\",\n    value: function setShouldNotShowTitle(value) {\n      this.should_not_show_title = value;\n    }\n  }, {\n    key: \"setHasNoCloseIcon\",\n    value: function setHasNoCloseIcon(value) {\n      this.has_no_close_icon = value;\n    }\n  }, {\n    key: \"openReadMoreDialog\",\n    value: function openReadMoreDialog(error_content, confirm_button_text) {\n      this.setErrorMessage(error_content);\n      this.setConfirmButtonText(confirm_button_text);\n      this.setHasNoCloseIcon(true);\n      this.setShouldNotShowTitle(true);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setConfirmButtonText('');\n      this.setShouldNotShowTitle(false);\n      this.setHasNoCloseIcon(false);\n    }\n  }]);\n\n  return ErrorDialogStore;\n}(), (error_dialog_store_descriptor = error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"confirm_button_text\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), error_dialog_store_descriptor2 = error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"error_message\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), error_dialog_store_descriptor3 = error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"has_no_close_icon\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), error_dialog_store_descriptor4 = error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"should_show\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), error_dialog_store_descriptor5 = error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"should_not_show_title\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"setShouldShow\", [error_dialog_store_dec], Object.getOwnPropertyDescriptor(error_dialog_store_class.prototype, \"setShouldShow\"), error_dialog_store_class.prototype), error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"setErrorMessage\", [error_dialog_store_dec2], Object.getOwnPropertyDescriptor(error_dialog_store_class.prototype, \"setErrorMessage\"), error_dialog_store_class.prototype), error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"setConfirmButtonText\", [error_dialog_store_dec3], Object.getOwnPropertyDescriptor(error_dialog_store_class.prototype, \"setConfirmButtonText\"), error_dialog_store_class.prototype), error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"setShouldNotShowTitle\", [error_dialog_store_dec4], Object.getOwnPropertyDescriptor(error_dialog_store_class.prototype, \"setShouldNotShowTitle\"), error_dialog_store_class.prototype), error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"setHasNoCloseIcon\", [error_dialog_store_dec5], Object.getOwnPropertyDescriptor(error_dialog_store_class.prototype, \"setHasNoCloseIcon\"), error_dialog_store_class.prototype), error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"openReadMoreDialog\", [error_dialog_store_dec6], Object.getOwnPropertyDescriptor(error_dialog_store_class.prototype, \"openReadMoreDialog\"), error_dialog_store_class.prototype), error_dialog_store_applyDecoratedDescriptor(error_dialog_store_class.prototype, \"reset\", [error_dialog_store_dec7], Object.getOwnPropertyDescriptor(error_dialog_store_class.prototype, \"reset\"), error_dialog_store_class.prototype)), error_dialog_store_class));\n\n// EXTERNAL MODULE: ../../../node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(\"../../../node_modules/prop-types/index.js\");\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n// EXTERNAL MODULE: external \"@deriv/components\"\nvar components_ = __webpack_require__(\"@deriv/components\");\n;// CONCATENATED MODULE: ./Containers/cashier-notifications.jsx\n\n\n\n\nvar CashierNotifications = function CashierNotifications(_ref) {\n  var p2p_notification_count = _ref.p2p_notification_count;\n  return /*#__PURE__*/external_react_default().createElement((external_react_default()).Fragment, null, /*#__PURE__*/external_react_default().createElement(components_.Icon, {\n    icon: \"IcCashier\",\n    className: \"header__icon\"\n  }), !!p2p_notification_count && /*#__PURE__*/external_react_default().createElement(components_.Counter, {\n    className: \"cashier__counter\",\n    count: p2p_notification_count\n  }));\n};\n\nCashierNotifications.propTypes = {\n  p2p_notification_count: (prop_types_default()).number\n};\n/* harmony default export */ const cashier_notifications = (CashierNotifications);\n;// CONCATENATED MODULE: ./_common/utility.js\nfunction utility_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar template = function template(string, content) {\n  var to_replace = content;\n\n  if (content && !Array.isArray(content)) {\n    to_replace = [content];\n  }\n\n  return string.replace(/\\[_(\\d+)]/g, function (s, index) {\n    return to_replace[+index - 1];\n  });\n};\n/**\n * Creates a DOM element and adds any attributes to it.\n *\n * @param {String} tag_name: the tag to create, e.g. 'div', 'a', etc\n * @param {Object} attributes: all the attributes to assign, e.g. { id: '...', class: '...', html: '...', ... }\n * @return the created DOM element\n */\n\n\nvar createElement = function createElement(tag_name) {\n  var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var el = document.createElement(tag_name);\n  Object.keys(attributes).forEach(function (attr) {\n    var value = attributes[attr];\n\n    if (attr === 'text') {\n      el.textContent = value;\n    } else if (attr === 'html') {\n      el.html(value);\n    } else {\n      el.setAttribute(attr, value);\n    }\n  });\n  return el;\n};\n\nvar static_hash;\n\nvar getStaticHash = function getStaticHash() {\n  static_hash = static_hash || (document.querySelector('script[src*=\"main\"]').getAttribute('src') || '').split('.')[1];\n  return static_hash;\n};\n\nvar PromiseClass = function PromiseClass() {\n  var _this = this;\n\n  utility_classCallCheck(this, PromiseClass);\n\n  this.promise = new Promise(function (resolve, reject) {\n    _this.reject = reject;\n    _this.resolve = resolve;\n  });\n};\n\nvar copyToClipboard = function copyToClipboard(text) {\n  var textField = document.createElement('textarea');\n  textField.innerText = text;\n  document.body.appendChild(textField);\n  textField.select();\n  document.execCommand('copy');\n  textField.remove();\n}; // eu countries to support\n\n\nvar eu_countries = (/* unused pure expression or super */ null && (['it', 'de', 'fr', 'lu', 'gr', 'mf', 'es', 'sk', 'lt', 'nl', 'at', 'bg', 'si', 'cy', 'be', 'ro', 'hr', 'pt', 'pl', 'lv', 'ee', 'cz', 'fi', 'hu', 'dk', 'se', 'ie', 'im', 'gb', 'mt'])); // check if client is from EU\n\nvar isEuCountry = function isEuCountry(country) {\n  return eu_countries.includes(country);\n}; // check if mlt or dxtrade for account text\n\n\nvar getAccountText = function getAccountText(account) {\n  var account_text = '';\n\n  if (account.is_dxtrade || account.is_mt) {\n    account_text = account.text;\n  } else {\n    account_text = getCurrencyDisplayCode(account.text);\n  }\n\n  return account_text;\n};\n\n\n;// CONCATENATED MODULE: ./Utils/Validator/errors.js\nfunction errors_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction errors_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction errors_createClass(Constructor, protoProps, staticProps) { if (protoProps) errors_defineProperties(Constructor.prototype, protoProps); if (staticProps) errors_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Errors = /*#__PURE__*/function () {\n  function Errors() {\n    errors_classCallCheck(this, Errors);\n\n    this.errors = {};\n  }\n\n  errors_createClass(Errors, [{\n    key: \"add\",\n    value: function add(attribute, message) {\n      if (!this.has(attribute)) {\n        this.errors[attribute] = [];\n      }\n\n      if (this.errors[attribute].indexOf(message) === -1) {\n        this.errors[attribute].push(message);\n      }\n    }\n  }, {\n    key: \"all\",\n    value: function all() {\n      return this.errors;\n    }\n  }, {\n    key: \"first\",\n    value: function first(attribute) {\n      if (this.has(attribute)) {\n        return this.errors[attribute][0];\n      }\n\n      return null;\n    }\n  }, {\n    key: \"get\",\n    value: function get(attribute) {\n      if (this.has(attribute)) {\n        return this.errors[attribute];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"has\",\n    value: function has(attribute) {\n      return Object.prototype.hasOwnProperty.call(this.errors, attribute);\n    }\n  }]);\n\n  return Errors;\n}();\n\n/* harmony default export */ const errors = (Errors);\n;// CONCATENATED MODULE: ./Utils/Validator/validator.js\nfunction validator_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction validator_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction validator_createClass(Constructor, protoProps, staticProps) { if (protoProps) validator_defineProperties(Constructor.prototype, protoProps); if (staticProps) validator_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar Validator = /*#__PURE__*/function () {\n  function Validator(input, rules) {\n    var store = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    validator_classCallCheck(this, Validator);\n\n    this.input = input;\n    this.rules = rules;\n    this.store = store;\n    this.errors = new errors();\n    this.error_count = 0;\n  }\n  /**\n   * Add failure and error message for given rule\n   *\n   * @param {string} attribute\n   * @param {object} rule\n   */\n\n\n  validator_createClass(Validator, [{\n    key: \"addFailure\",\n    value: function addFailure(attribute, rule, error_message) {\n      var message = error_message || rule.options.message || (0,shared_.getPreBuildDVRs)()[rule.name].message();\n\n      if (rule.name === 'length') {\n        message = template(message, [rule.options.min === rule.options.max ? rule.options.min : \"\".concat(rule.options.min, \"-\").concat(rule.options.max)]);\n      } else if (rule.name === 'min') {\n        message = template(message, [rule.options.min]);\n      } else if (rule.name === 'not_equal') {\n        message = template(message, [rule.options.name1, rule.options.name2]);\n      }\n\n      this.errors.add(attribute, message);\n      this.error_count++;\n    }\n    /**\n     * Runs validator\n     *\n     * @return {boolean} Whether it passes; true = passes, false = fails\n     */\n\n  }, {\n    key: \"check\",\n    value: function check() {\n      var _this = this;\n\n      Object.keys(this.input).forEach(function (attribute) {\n        if (!Object.prototype.hasOwnProperty.call(_this.rules, attribute)) {\n          return;\n        }\n\n        _this.rules[attribute].forEach(function (rule) {\n          var ruleObject = Validator.getRuleObject(rule);\n\n          if (!ruleObject.validator && typeof ruleObject.validator !== 'function') {\n            return;\n          }\n\n          if (ruleObject.options.condition && !ruleObject.options.condition(_this.store)) {\n            return;\n          }\n\n          if (_this.input[attribute] === '' && ruleObject.name !== 'req') {\n            return;\n          }\n\n          var is_valid, error_message;\n\n          if (ruleObject.name === 'number') {\n            var _ruleObject$validator = ruleObject.validator(_this.input[attribute], ruleObject.options, _this.store, _this.input),\n                is_ok = _ruleObject$validator.is_ok,\n                message = _ruleObject$validator.message;\n\n            is_valid = is_ok;\n            error_message = message;\n          } else {\n            is_valid = ruleObject.validator(_this.input[attribute], ruleObject.options, _this.store, _this.input);\n          }\n\n          if (!is_valid) {\n            _this.addFailure(attribute, ruleObject, error_message);\n          }\n        });\n      });\n      return !this.error_count;\n    }\n    /**\n     * Determine if validation passes\n     *\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isPassed\",\n    value: function isPassed() {\n      return this.check();\n    }\n    /**\n     * Converts the rule array to an object\n     *\n     * @param {array} rule\n     * @return {object}\n     */\n\n  }], [{\n    key: \"getRuleObject\",\n    value: function getRuleObject(rule) {\n      var is_rule_string = typeof rule === 'string';\n      var rule_object = {\n        name: is_rule_string ? rule : rule[0],\n        options: is_rule_string ? {} : rule[1] || {}\n      };\n      rule_object.validator = rule_object.name === 'custom' ? rule[1].func : (0,shared_.getPreBuildDVRs)()[rule_object.name].func;\n      return rule_object;\n    }\n  }]);\n\n  return Validator;\n}();\n\n/* harmony default export */ const Validator_validator = (Validator);\n;// CONCATENATED MODULE: ./Utils/Validator/index.js\n\n\n;// CONCATENATED MODULE: ./Stores/base-store.js\nvar base_store_dec, base_store_dec2, base_store_dec3, base_store_dec4, base_store_dec5, base_store_dec6, base_store_dec7, base_store_dec8, base_store_dec9, base_store_dec10, base_store_dec11, base_store_dec12, base_store_dec13, base_store_dec14, base_store_dec15, base_store_dec16, base_store_class, base_store_descriptor, base_store_descriptor2, base_store_descriptor3, _class2, _temp;\n\nfunction base_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction base_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { base_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { base_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction base_store_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction base_store_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { base_store_ownKeys(Object(source), true).forEach(function (key) { base_store_defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { base_store_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction base_store_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction base_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction base_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction base_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction base_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) base_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) base_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction base_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction base_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\n/**\n * BaseStore class is the base class for all defined stores in the application. It handles some stuff such as:\n *  1. Creating snapshot object from the store.\n *  2. Saving the store's snapshot in local/session storage and keeping them in sync.\n */\n\nvar BaseStore = (base_store_dec = external_mobx_.action.bound, base_store_dec2 = external_mobx_.action.bound, base_store_dec3 = external_mobx_.action.bound, base_store_dec4 = external_mobx_.action.bound, base_store_dec5 = external_mobx_.action.bound, base_store_dec6 = external_mobx_.action.bound, base_store_dec7 = external_mobx_.action.bound, base_store_dec8 = external_mobx_.action.bound, base_store_dec9 = external_mobx_.action.bound, base_store_dec10 = external_mobx_.action.bound, base_store_dec11 = external_mobx_.action.bound, base_store_dec12 = external_mobx_.action.bound, base_store_dec13 = external_mobx_.action.bound, base_store_dec14 = external_mobx_.action.bound, base_store_dec15 = external_mobx_.action.bound, base_store_dec16 = external_mobx_.action.bound, (base_store_class = (_temp = _class2 = /*#__PURE__*/function () {\n  /**\n   * An enum object to define LOCAL_STORAGE and SESSION_STORAGE\n   */\n\n  /**\n   * Constructor of the base class that gets properties' name of child which should be saved in storages\n   *\n   * @param {Object} options - An object that contains the following properties:\n   *     @property {Object}   root_store - An object that contains the root store of the app.\n   *     @property {String[]} local_storage_properties - A list of properties' names that should be kept in localStorage.\n   *     @property {String[]} session_storage_properties - A list of properties' names that should be kept in sessionStorage.\n   *     @property {Object}   validation_rules - An object that contains the validation rules for each property of the store.\n   *     @property {String}   store_name - Explicit store name for browser application storage (to bypass minification)\n   */\n  function BaseStore() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    base_store_classCallCheck(this, BaseStore);\n\n    base_store_initializerDefineProperty(this, \"validation_errors\", base_store_descriptor, this);\n\n    base_store_initializerDefineProperty(this, \"validation_rules\", base_store_descriptor2, this);\n\n    this.preSwitchAccountDisposer = null;\n    this.pre_switch_account_listener = null;\n    this.switchAccountDisposer = null;\n    this.switch_account_listener = null;\n    this.logoutDisposer = null;\n    this.logout_listener = null;\n    this.clientInitDisposer = null;\n    this.client_init_listener = null;\n    this.networkStatusChangeDisposer = null;\n    this.network_status_change_listener = null;\n    this.themeChangeDisposer = null;\n    this.theme_change_listener = null;\n    this.realAccountSignupEndedDisposer = null;\n    this.real_account_signup_ended_listener = null;\n\n    base_store_initializerDefineProperty(this, \"partial_fetch_time\", base_store_descriptor3, this);\n\n    var root_store = options.root_store,\n        local_storage_properties = options.local_storage_properties,\n        session_storage_properties = options.session_storage_properties,\n        validation_rules = options.validation_rules,\n        store_name = options.store_name;\n    Object.defineProperty(this, 'root_store', {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(this, 'local_storage_properties', {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(this, 'session_storage_properties', {\n      enumerable: false,\n      writable: true\n    });\n    var has_local_or_session_storage = local_storage_properties && local_storage_properties.length || session_storage_properties && session_storage_properties.length;\n\n    if (has_local_or_session_storage) {\n      if (!store_name) {\n        throw new Error('store_name is required for local/session storage');\n      }\n\n      Object.defineProperty(this, 'store_name', {\n        value: store_name,\n        enumerable: false,\n        writable: false\n      });\n    }\n\n    this.root_store = root_store;\n    this.local_storage_properties = local_storage_properties || [];\n    this.session_storage_properties = session_storage_properties || [];\n    this.setValidationRules(validation_rules);\n    this.setupReactionForLocalStorage();\n    this.setupReactionForSessionStorage();\n    this.retrieveFromStorage();\n  }\n  /**\n   * Returns an snapshot of the current store\n   *\n   * @param {String[]} properties - A list of properties' names that should be in the snapshot.\n   *\n   * @return {Object} Returns a cloned object of the store.\n   */\n\n\n  base_store_createClass(BaseStore, [{\n    key: \"getSnapshot\",\n    value: function getSnapshot(properties) {\n      var snapshot = (0,external_mobx_.toJS)(this);\n\n      if (!(0,shared_.isEmptyObject)(this.root_store)) {\n        snapshot.root_store = this.root_store;\n      }\n\n      if (properties && properties.length) {\n        snapshot = properties.reduce(function (result, p) {\n          return Object.assign(result, base_store_defineProperty({}, p, snapshot[p]));\n        }, {});\n      }\n\n      return snapshot;\n    }\n    /**\n     * Sets up a reaction on properties which are mentioned in `local_storage_properties`\n     *  and invokes `saveToStorage` when there are any changes on them.\n     *\n     */\n\n  }, {\n    key: \"setupReactionForLocalStorage\",\n    value: function setupReactionForLocalStorage() {\n      var _this = this;\n\n      if (this.local_storage_properties.length) {\n        (0,external_mobx_.reaction)(function () {\n          return _this.local_storage_properties.map(function (i) {\n            return _this[i];\n          });\n        }, function () {\n          return _this.saveToStorage(_this.local_storage_properties, BaseStore.STORAGES.LOCAL_STORAGE);\n        });\n      }\n    }\n    /**\n     * Sets up a reaction on properties which are mentioned in `session_storage_properties`\n     *  and invokes `saveToStorage` when there are any changes on them.\n     *\n     */\n\n  }, {\n    key: \"setupReactionForSessionStorage\",\n    value: function setupReactionForSessionStorage() {\n      var _this2 = this;\n\n      if (this.session_storage_properties.length) {\n        (0,external_mobx_.reaction)(function () {\n          return _this2.session_storage_properties.map(function (i) {\n            return _this2[i];\n          });\n        }, function () {\n          return _this2.saveToStorage(_this2.session_storage_properties, BaseStore.STORAGES.SESSION_STORAGE);\n        });\n      }\n    }\n    /**\n     * Removes properties that are not passed from the snapshot of the store and saves it to the passed storage\n     *\n     * @param {String[]} properties - A list of the store's properties' names which should be saved in the storage.\n     * @param {Symbol}   storage    - A symbol object that defines the storage which the snapshot should be stored in it.\n     *\n     */\n\n  }, {\n    key: \"saveToStorage\",\n    value: function saveToStorage(properties, storage) {\n      var snapshot = JSON.stringify(this.getSnapshot(properties), function (key, value) {\n        if (value !== null) return value;\n        return undefined;\n      });\n\n      if (storage === BaseStore.STORAGES.LOCAL_STORAGE) {\n        localStorage.setItem(this.store_name, snapshot);\n      } else if (storage === BaseStore.STORAGES.SESSION_STORAGE) {\n        sessionStorage.setItem(this.store_name, snapshot);\n      }\n    }\n    /**\n     * Retrieves saved snapshot of the store and assigns to the current instance.\n     *\n     */\n\n  }, {\n    key: \"retrieveFromStorage\",\n    value: function retrieveFromStorage() {\n      var _this3 = this;\n\n      var local_storage_snapshot = JSON.parse(localStorage.getItem(this.store_name, {}));\n      var session_storage_snapshot = JSON.parse(sessionStorage.getItem(this.store_name, {}));\n\n      var snapshot = base_store_objectSpread(base_store_objectSpread({}, local_storage_snapshot), session_storage_snapshot);\n\n      Object.keys(snapshot).forEach(function (k) {\n        return _this3[k] = snapshot[k];\n      });\n    }\n    /**\n     * Sets validation error messages for an observable property of the store\n     *\n     * @param {String} propertyName - The observable property's name\n     * @param [{String}] messages - An array of strings that contains validation error messages for the particular property.\n     *\n     */\n\n  }, {\n    key: \"setValidationErrorMessages\",\n    value: function setValidationErrorMessages(propertyName, messages) {\n      var _this4 = this;\n\n      var is_different = function is_different() {\n        return !!_this4.validation_errors[propertyName].filter(function (x) {\n          return !messages.includes(x);\n        }).concat(messages.filter(function (x) {\n          return !_this4.validation_errors[propertyName].includes(x);\n        })).length;\n      };\n\n      if (!this.validation_errors[propertyName] || is_different()) {\n        this.validation_errors[propertyName] = messages;\n      }\n    }\n    /**\n     * Sets validation rules\n     *\n     * @param {object} rules\n     *\n     */\n\n  }, {\n    key: \"setValidationRules\",\n    value: function setValidationRules() {\n      var _this5 = this;\n\n      var rules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.keys(rules).forEach(function (key) {\n        _this5.addRule(key, rules[key]);\n      });\n    }\n    /**\n     * Adds rules to the particular property\n     *\n     * @param {String} property\n     * @param {String} rules\n     *\n     */\n\n  }, {\n    key: \"addRule\",\n    value: function addRule(property, rules) {\n      var _this6 = this;\n\n      this.validation_rules[property] = rules;\n      (0,external_mobx_.intercept)(this, property, function (change) {\n        _this6.validateProperty(property, change.newValue);\n\n        return change;\n      });\n    }\n    /**\n     * Validates a particular property of the store\n     *\n     * @param {String} property - The name of the property in the store\n     * @param {object} value    - The value of the property, it can be undefined.\n     *\n     */\n\n  }, {\n    key: \"validateProperty\",\n    value: function validateProperty(property, value) {\n      var _this7 = this;\n\n      var trigger = this.validation_rules[property].trigger;\n\n      var inputs = base_store_defineProperty({}, property, value !== undefined ? value : this[property]);\n\n      var validation_rules = base_store_defineProperty({}, property, this.validation_rules[property].rules || []);\n\n      if (!!trigger && Object.hasOwnProperty.call(this, trigger)) {\n        inputs[trigger] = this[trigger];\n        validation_rules[trigger] = this.validation_rules[trigger].rules || [];\n      }\n\n      var validator = new Validator_validator(inputs, validation_rules, this);\n      validator.isPassed();\n      Object.keys(inputs).forEach(function (key) {\n        _this7.setValidationErrorMessages(key, validator.errors.get(key));\n      });\n    }\n    /**\n     * Validates all properties which validation rule has been set for.\n     *\n     */\n\n  }, {\n    key: \"validateAllProperties\",\n    value: function validateAllProperties() {\n      var _this8 = this;\n\n      var validation_rules = Object.keys(this.validation_rules);\n      var validation_errors = Object.keys(this.validation_errors);\n      validation_rules.forEach(function (p) {\n        _this8.validateProperty(p, _this8[p]);\n      }); // Remove keys that are present in error, but not in rules:\n\n      validation_errors.forEach(function (error) {\n        if (!validation_rules.includes(error)) {\n          delete _this8.validation_errors[error];\n        }\n      });\n    }\n  }, {\n    key: \"onSwitchAccount\",\n    value: function onSwitchAccount(listener) {\n      var _this9 = this;\n\n      if (listener) {\n        this.switch_account_listener = listener;\n        this.switchAccountDisposer = (0,external_mobx_.when)(function () {\n          return _this9.root_store.client.switch_broadcast;\n        }, function () {\n          try {\n            var result = _this9.switch_account_listener();\n\n            if (result && result.then && typeof result.then === 'function') {\n              result.then(function () {\n                _this9.root_store.client.switchEndSignal();\n\n                _this9.onSwitchAccount(_this9.switch_account_listener);\n              });\n            } else {\n              throw new Error('Switching account listeners are required to return a promise.');\n            }\n          } catch (error) {\n            // there is no listener currently active. so we can just ignore the error raised from treating\n            // a null object as a function. Although, in development mode, we throw a console error.\n            if (!(0,shared_.isProduction)()) {\n              console.error(error); // eslint-disable-line\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"onPreSwitchAccount\",\n    value: function onPreSwitchAccount(listener) {\n      var _this10 = this;\n\n      if (listener) {\n        this.pre_switch_account_listener = listener;\n        this.preSwitchAccountDisposer = (0,external_mobx_.when)(function () {\n          return _this10.root_store.client.pre_switch_broadcast;\n        }, function () {\n          try {\n            var result = _this10.pre_switch_account_listener();\n\n            if (result && result.then && typeof result.then === 'function') {\n              result.then(function () {\n                _this10.root_store.client.setPreSwitchAccount(false);\n\n                _this10.onPreSwitchAccount(_this10.pre_switch_account_listener);\n              });\n            } else {\n              throw new Error('Pre-switch account listeners are required to return a promise.');\n            }\n          } catch (error) {\n            // there is no listener currently active. so we can just ignore the error raised from treating\n            // a null object as a function. Although, in development mode, we throw a console error.\n            if (!(0,shared_.isProduction)()) {\n              console.error(error); // eslint-disable-line\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"onLogout\",\n    value: function onLogout(listener) {\n      var _this11 = this;\n\n      this.logoutDisposer = (0,external_mobx_.when)(function () {\n        return _this11.root_store.client.has_logged_out;\n      }, /*#__PURE__*/base_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                result = _this11.logout_listener();\n\n                if (!(result && result.then && typeof result.then === 'function')) {\n                  _context.next = 6;\n                  break;\n                }\n\n                result.then(function () {\n                  _this11.root_store.client.setLogout(false);\n\n                  _this11.onLogout(_this11.logout_listener);\n                });\n                _context.next = 7;\n                break;\n\n              case 6:\n                throw new Error('Logout listeners are required to return a promise.');\n\n              case 7:\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n\n                // there is no listener currently active. so we can just ignore the error raised from treating\n                // a null object as a function. Although, in development mode, we throw a console error.\n                if (!(0,shared_.isProduction)()) {\n                  console.error(_context.t0); // eslint-disable-line\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 9]]);\n      })));\n      this.logout_listener = listener;\n    }\n  }, {\n    key: \"onClientInit\",\n    value: function onClientInit(listener) {\n      var _this12 = this;\n\n      this.clientInitDisposer = (0,external_mobx_.when)(function () {\n        return _this12.root_store.client.initialized_broadcast;\n      }, /*#__PURE__*/base_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                result = _this12.client_init_listener();\n\n                if (!(result && result.then && typeof result.then === 'function')) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                result.then(function () {\n                  _this12.root_store.client.setInitialized(false);\n\n                  _this12.onClientInit(_this12.client_init_listener);\n                });\n                _context2.next = 7;\n                break;\n\n              case 6:\n                throw new Error('Client init listeners are required to return a promise.');\n\n              case 7:\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                // there is no listener currently active. so we can just ignore the error raised from treating\n                // a null object as a function. Although, in development mode, we throw a console error.\n                if (!(0,shared_.isProduction)()) {\n                  console.error(_context2.t0); // eslint-disable-line\n                }\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      })));\n      this.client_init_listener = listener;\n    }\n  }, {\n    key: \"onNetworkStatusChange\",\n    value: function onNetworkStatusChange(listener) {\n      var _this13 = this;\n\n      this.networkStatusChangeDisposer = (0,external_mobx_.reaction)(function () {\n        return _this13.root_store.common.is_network_online;\n      }, function (is_online) {\n        try {\n          _this13.network_status_change_listener(is_online);\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,shared_.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n      this.network_status_change_listener = listener;\n    }\n  }, {\n    key: \"onThemeChange\",\n    value: function onThemeChange(listener) {\n      var _this14 = this;\n\n      this.themeChangeDisposer = (0,external_mobx_.reaction)(function () {\n        return _this14.root_store.ui.is_dark_mode_on;\n      }, function (is_dark_mode_on) {\n        try {\n          _this14.theme_change_listener(is_dark_mode_on);\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,shared_.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n      this.theme_change_listener = listener;\n    }\n  }, {\n    key: \"onRealAccountSignupEnd\",\n    value: function onRealAccountSignupEnd(listener) {\n      var _this15 = this;\n\n      this.realAccountSignupEndedDisposer = (0,external_mobx_.when)(function () {\n        return _this15.root_store.ui.has_real_account_signup_ended;\n      }, function () {\n        try {\n          var result = _this15.real_account_signup_ended_listener();\n\n          if (result && result.then && typeof result.then === 'function') {\n            result.then(function () {\n              _this15.root_store.ui.setRealAccountSignupEnd(false);\n\n              _this15.onRealAccountSignupEnd(_this15.real_account_signup_ended_listener);\n            });\n          } else {\n            throw new Error('Real account signup listeners are required to return a promise.');\n          }\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,shared_.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n      this.real_account_signup_ended_listener = listener;\n    }\n  }, {\n    key: \"disposePreSwitchAccount\",\n    value: function disposePreSwitchAccount() {\n      if (typeof this.preSwitchAccountDisposer === 'function') {\n        this.preSwitchAccountDisposer();\n      }\n\n      this.pre_switch_account_listener = null;\n    }\n  }, {\n    key: \"disposeSwitchAccount\",\n    value: function disposeSwitchAccount() {\n      if (typeof this.switchAccountDisposer === 'function') {\n        this.switchAccountDisposer();\n      }\n\n      this.switch_account_listener = null;\n    }\n  }, {\n    key: \"disposeLogout\",\n    value: function disposeLogout() {\n      if (typeof this.logoutDisposer === 'function') {\n        this.logoutDisposer();\n      }\n\n      this.logout_listener = null;\n    }\n  }, {\n    key: \"disposeClientInit\",\n    value: function disposeClientInit() {\n      if (typeof this.clientInitDisposer === 'function') {\n        this.clientInitDisposer();\n      }\n\n      this.client_init_listener = null;\n    }\n  }, {\n    key: \"disposeNetworkStatusChange\",\n    value: function disposeNetworkStatusChange() {\n      if (typeof this.networkStatusChangeDisposer === 'function') {\n        this.networkStatusChangeDisposer();\n      }\n\n      this.network_status_change_listener = null;\n    }\n  }, {\n    key: \"disposeThemeChange\",\n    value: function disposeThemeChange() {\n      if (typeof this.themeChangeDisposer === 'function') {\n        this.themeChangeDisposer();\n      }\n\n      this.theme_change_listener = null;\n    }\n  }, {\n    key: \"disposeRealAccountSignupEnd\",\n    value: function disposeRealAccountSignupEnd() {\n      if (typeof this.realAccountSignupEndedDisposer === 'function') {\n        this.realAccountSignupEndedDisposer();\n      }\n\n      this.real_account_signup_ended_listener = null;\n    }\n  }, {\n    key: \"onUnmount\",\n    value: function onUnmount() {\n      this.disposePreSwitchAccount();\n      this.disposeSwitchAccount();\n      this.disposeLogout();\n      this.disposeClientInit();\n      this.disposeNetworkStatusChange();\n      this.disposeThemeChange();\n      this.disposeRealAccountSignupEnd();\n    }\n  }, {\n    key: \"assertHasValidCache\",\n    value: function assertHasValidCache(loginid) {\n      // account was changed when this was unmounted.\n      if (this.root_store.client.loginid !== loginid) {\n        for (var _len = arguments.length, reactions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          reactions[_key - 1] = arguments[_key];\n        }\n\n        reactions.forEach(function (act) {\n          return act();\n        });\n        this.partial_fetch_time = false;\n      }\n    }\n  }]);\n\n  return BaseStore;\n}(), _class2.STORAGES = Object.freeze({\n  LOCAL_STORAGE: Symbol('LOCAL_STORAGE'),\n  SESSION_STORAGE: Symbol('SESSION_STORAGE')\n}), _temp), (base_store_descriptor = base_store_applyDecoratedDescriptor(base_store_class.prototype, \"validation_errors\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), base_store_descriptor2 = base_store_applyDecoratedDescriptor(base_store_class.prototype, \"validation_rules\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), base_store_descriptor3 = base_store_applyDecoratedDescriptor(base_store_class.prototype, \"partial_fetch_time\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"retrieveFromStorage\", [external_mobx_.action], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"retrieveFromStorage\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"setValidationErrorMessages\", [external_mobx_.action], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"setValidationErrorMessages\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"setValidationRules\", [external_mobx_.action], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"setValidationRules\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"addRule\", [external_mobx_.action], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"addRule\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"validateProperty\", [external_mobx_.action], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"validateProperty\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"validateAllProperties\", [external_mobx_.action], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"validateAllProperties\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onSwitchAccount\", [base_store_dec], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onSwitchAccount\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onPreSwitchAccount\", [base_store_dec2], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onPreSwitchAccount\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onLogout\", [base_store_dec3], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onLogout\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onClientInit\", [base_store_dec4], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onClientInit\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onNetworkStatusChange\", [base_store_dec5], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onNetworkStatusChange\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onThemeChange\", [base_store_dec6], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onThemeChange\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onRealAccountSignupEnd\", [base_store_dec7], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onRealAccountSignupEnd\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"disposePreSwitchAccount\", [base_store_dec8], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"disposePreSwitchAccount\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"disposeSwitchAccount\", [base_store_dec9], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"disposeSwitchAccount\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"disposeLogout\", [base_store_dec10], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"disposeLogout\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"disposeClientInit\", [base_store_dec11], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"disposeClientInit\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"disposeNetworkStatusChange\", [base_store_dec12], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"disposeNetworkStatusChange\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"disposeThemeChange\", [base_store_dec13], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"disposeThemeChange\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"disposeRealAccountSignupEnd\", [base_store_dec14], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"disposeRealAccountSignupEnd\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"onUnmount\", [base_store_dec15], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"onUnmount\"), base_store_class.prototype), base_store_applyDecoratedDescriptor(base_store_class.prototype, \"assertHasValidCache\", [base_store_dec16], Object.getOwnPropertyDescriptor(base_store_class.prototype, \"assertHasValidCache\"), base_store_class.prototype)), base_store_class));\n\n;// CONCATENATED MODULE: ./Stores/general-store.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar general_store_dec, general_store_dec2, general_store_dec3, general_store_dec4, general_store_dec5, general_store_dec6, general_store_dec7, general_store_dec8, general_store_dec9, general_store_dec10, general_store_dec11, general_store_dec12, general_store_dec13, general_store_dec14, general_store_dec15, general_store_dec16, general_store_dec17, general_store_dec18, general_store_dec19, general_store_dec20, general_store_dec21, general_store_dec22, general_store_dec23, general_store_dec24, _dec25, general_store_class, general_store_descriptor, general_store_descriptor2, general_store_descriptor3, general_store_descriptor4, general_store_descriptor5, general_store_descriptor6, general_store_descriptor7, general_store_descriptor8, general_store_descriptor9, general_store_descriptor10, general_store_descriptor11, general_store_descriptor12, general_store_descriptor13, general_store_descriptor14, general_store_descriptor15;\n\nfunction general_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction general_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { general_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { general_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction general_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction general_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction general_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction general_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) general_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) general_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction general_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction general_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\n\n\n\n\nvar GeneralStore = (general_store_dec = external_mobx_.action.bound, general_store_dec2 = external_mobx_.action.bound, general_store_dec3 = external_mobx_.action.bound, general_store_dec4 = external_mobx_.action.bound, general_store_dec5 = external_mobx_.action.bound, general_store_dec6 = external_mobx_.action.bound, general_store_dec7 = external_mobx_.action.bound, general_store_dec8 = external_mobx_.action.bound, general_store_dec9 = external_mobx_.action.bound, general_store_dec10 = external_mobx_.action.bound, general_store_dec11 = external_mobx_.action.bound, general_store_dec12 = external_mobx_.action.bound, general_store_dec13 = external_mobx_.action.bound, general_store_dec14 = external_mobx_.action.bound, general_store_dec15 = external_mobx_.action.bound, general_store_dec16 = external_mobx_.action.bound, general_store_dec17 = external_mobx_.action.bound, general_store_dec18 = external_mobx_.action.bound, general_store_dec19 = external_mobx_.action.bound, general_store_dec20 = external_mobx_.action.bound, general_store_dec21 = external_mobx_.action.bound, general_store_dec22 = external_mobx_.action.bound, general_store_dec23 = external_mobx_.action.bound, general_store_dec24 = external_mobx_.action.bound, _dec25 = external_mobx_.action.bound, (general_store_class = /*#__PURE__*/function (_BaseStore) {\n  _inherits(GeneralStore, _BaseStore);\n\n  var _super = _createSuper(GeneralStore);\n\n  function GeneralStore(_ref) {\n    var _this;\n\n    var root_store = _ref.root_store,\n        WS = _ref.WS;\n\n    general_store_classCallCheck(this, GeneralStore);\n\n    _this = _super.call(this, {\n      root_store: root_store\n    });\n\n    general_store_initializerDefineProperty(_this, \"is_loading\", general_store_descriptor, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"is_p2p_visible\", general_store_descriptor2, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"p2p_notification_count\", general_store_descriptor3, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"cashier_route_tab_index\", general_store_descriptor4, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"is_deposit\", general_store_descriptor5, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"should_show_all_available_currencies\", general_store_descriptor6, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"is_cashier_default\", general_store_descriptor7, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"deposit_target\", general_store_descriptor8, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"should_set_currency_modal_title_change\", general_store_descriptor9, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"p2p_advertiser_error\", general_store_descriptor10, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"has_set_currency\", general_store_descriptor11, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"should_percentage_reset\", general_store_descriptor12, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"percentage\", general_store_descriptor13, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"show_p2p_in_cashier_default\", general_store_descriptor14, _assertThisInitialized(_this));\n\n    general_store_initializerDefineProperty(_this, \"onRemount\", general_store_descriptor15, _assertThisInitialized(_this));\n\n    _this.active_container = constants.containers.deposit;\n    _this.is_populating_values = false;\n    _this.WS = WS;\n    _this.root_store = root_store;\n    (0,external_mobx_.when)(function () {\n      return _this.root_store.client.is_logged_in;\n    }, function () {\n      _this.setHasSetCurrency();\n\n      _this.attachCashierToMenu();\n    });\n\n    if (!_this.has_set_currency) {\n      _this.changeSetCurrencyModalTitle();\n    }\n\n    (0,external_mobx_.reaction)(function () {\n      return [_this.root_store.client.switched, _this.root_store.client.is_logged_in, _this.root_store.client.currency];\n    }, function () {\n      _this.init();\n    });\n    return _this;\n  }\n\n  general_store_createClass(GeneralStore, [{\n    key: \"setOnRemount\",\n    value: function setOnRemount(func) {\n      this.onRemount = func;\n    }\n  }, {\n    key: \"is_crypto\",\n    get: function get() {\n      var currency = this.root_store.client.currency;\n      return !!currency && (0,shared_.isCryptocurrency)(currency);\n    }\n  }, {\n    key: \"is_p2p_enabled\",\n    get: function get() {\n      return this.is_p2p_visible && !this.root_store.client.is_eu;\n    }\n  }, {\n    key: \"showP2pInCashierDefault\",\n    value: function showP2pInCashierDefault() {\n      var _this$root_store$clie = this.root_store.client,\n          account_list = _this$root_store$clie.account_list,\n          is_virtual = _this$root_store$clie.is_virtual;\n      var is_p2p_restricted = this.p2p_advertiser_error === 'RestrictedCountry';\n      var has_usd_currency = account_list.some(function (account) {\n        return account.title === 'USD';\n      });\n      var has_user_fiat_currency = account_list.some(function (account) {\n        return !(0,shared_.isCryptocurrency)(account.title) && account.title !== 'Real';\n      });\n\n      if (is_p2p_restricted || is_virtual || has_user_fiat_currency && !has_usd_currency) {\n        this.show_p2p_in_cashier_default = false;\n      } else {\n        this.show_p2p_in_cashier_default = true;\n      }\n    }\n  }, {\n    key: \"attachCashierToMenu\",\n    value: function attachCashierToMenu() {\n      var _this$root_store = this.root_store,\n          menu = _this$root_store.menu,\n          ui = _this$root_store.ui;\n\n      if (!this.has_set_currency) {\n        this.setHasSetCurrency();\n      }\n\n      menu.attach({\n        id: 'dt_cashier_tab',\n        icon: /*#__PURE__*/external_react_default().createElement(cashier_notifications, {\n          p2p_notification_count: this.p2p_notification_count\n        }),\n        text: function text() {\n          return (0,translations_.localize)('Cashier');\n        },\n        link_to: this.has_set_currency && shared_.routes.cashier,\n        onClick: !this.has_set_currency && ui.toggleSetCurrencyModal,\n        login_only: true\n      });\n    }\n  }, {\n    key: \"replaceCashierMenuOnclick\",\n    value: function replaceCashierMenuOnclick() {\n      var _this$root_store2 = this.root_store,\n          menu = _this$root_store2.menu,\n          ui = _this$root_store2.ui;\n      this.setHasSetCurrency();\n      menu.update({\n        id: 'dt_cashier_tab',\n        icon: /*#__PURE__*/external_react_default().createElement(cashier_notifications, {\n          p2p_notification_count: this.p2p_notification_count\n        }),\n        text: function text() {\n          return (0,translations_.localize)('Cashier');\n        },\n        link_to: this.has_set_currency && shared_.routes.cashier,\n        onClick: !this.has_set_currency ? ui.toggleSetCurrencyModal : false,\n        login_only: true\n      }, 1);\n    }\n  }, {\n    key: \"setHasSetCurrency\",\n    value: function setHasSetCurrency() {\n      var _this$root_store$clie2 = this.root_store.client,\n          account_list = _this$root_store$clie2.account_list,\n          has_active_real_account = _this$root_store$clie2.has_active_real_account;\n      this.has_set_currency = account_list.filter(function (account) {\n        return !account.is_virtual;\n      }).some(function (account) {\n        return account.title !== 'Real';\n      }) || !has_active_real_account;\n    }\n  }, {\n    key: \"changeSetCurrencyModalTitle\",\n    value: function changeSetCurrencyModalTitle() {\n      this.should_set_currency_modal_title_change = true;\n    }\n  }, {\n    key: \"onMountCashierDefault\",\n    value: function () {\n      var _onMountCashierDefault = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _payment_agent$all_pa, _payment_agent$all_pa2;\n\n        var _this$root_store$modu, account_prompt_dialog, payment_agent, agent_list;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store$modu = this.root_store.modules.cashier, account_prompt_dialog = _this$root_store$modu.account_prompt_dialog, payment_agent = _this$root_store$modu.payment_agent;\n\n                if (!this.has_set_currency) {\n                  this.setHasSetCurrency();\n                }\n\n                this.setIsCashierDefault(true);\n                account_prompt_dialog.resetIsConfirmed();\n                this.setLoading(true);\n\n                if ((_payment_agent$all_pa = payment_agent.all_payment_agent_list) !== null && _payment_agent$all_pa !== void 0 && (_payment_agent$all_pa2 = _payment_agent$all_pa.paymentagent_list) !== null && _payment_agent$all_pa2 !== void 0 && _payment_agent$all_pa2.list) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 8;\n                return payment_agent.getAllPaymentAgentList();\n\n              case 8:\n                agent_list = _context.sent;\n                payment_agent.setAllPaymentAgentList(agent_list);\n\n              case 10:\n                this.setLoading(false);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onMountCashierDefault() {\n        return _onMountCashierDefault.apply(this, arguments);\n      }\n\n      return onMountCashierDefault;\n    }()\n  }, {\n    key: \"calculatePercentage\",\n    value: function calculatePercentage() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;\n      var _this$root_store3 = this.root_store,\n          client = _this$root_store3.client,\n          modules = _this$root_store3.modules;\n      var account_transfer = modules.cashier.account_transfer;\n\n      if (this.active_container === account_transfer.container) {\n        this.percentage = +(amount / +account_transfer.selected_from.balance * 100).toFixed(0);\n      } else {\n        this.percentage = +(amount / +client.balance * 100).toFixed(0);\n      }\n\n      if (!isFinite(this.percentage)) {\n        this.percentage = 0;\n      }\n    }\n  }, {\n    key: \"percentageSelectorSelectionStatus\",\n    value: function percentageSelectorSelectionStatus(should_percentage_reset) {\n      this.should_percentage_reset = should_percentage_reset;\n\n      if (should_percentage_reset) {\n        this.percentage = 0;\n      }\n    }\n  }, {\n    key: \"setIsDeposit\",\n    value: function setIsDeposit(is_deposit) {\n      this.is_deposit = is_deposit;\n    }\n  }, {\n    key: \"setShouldShowAllAvailableCurrencies\",\n    value: function setShouldShowAllAvailableCurrencies(value) {\n      this.should_show_all_available_currencies = value;\n    }\n  }, {\n    key: \"setIsCashierDefault\",\n    value: function setIsCashierDefault(is_cashier_default) {\n      this.is_cashier_default = is_cashier_default;\n    }\n  }, {\n    key: \"setDepositTarget\",\n    value: function setDepositTarget(target) {\n      this.deposit_target = target;\n    }\n  }, {\n    key: \"continueRoute\",\n    value: function continueRoute() {\n      this.root_store.common.routeTo(this.deposit_target);\n    }\n  }, {\n    key: \"setAccountSwitchListener\",\n    value: function setAccountSwitchListener() {\n      // cashier inits once and tries to stay active until switching account\n      // since cashier calls take a long time to respond or display in iframe\n      // so we don't have any unmount function here and everything gets reset on switch instead\n      this.disposeSwitchAccount();\n      this.onSwitchAccount(this.accountSwitcherListener);\n    } // Initialise P2P attributes on app load without mounting the entire cashier\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      if (this.root_store.modules.cashier) {\n        var _this$root_store4 = this.root_store,\n            client = _this$root_store4.client,\n            modules = _this$root_store4.modules;\n        var _modules$cashier = modules.cashier,\n            account_prompt_dialog = _modules$cashier.account_prompt_dialog,\n            withdraw = _modules$cashier.withdraw;\n        var currency = client.currency,\n            is_logged_in = client.is_logged_in,\n            switched = client.switched;\n        (0,external_mobx_.when)(function () {\n          return is_logged_in;\n        }, /*#__PURE__*/general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return _this2.getAdvertizerError();\n\n                case 2:\n                  _this2.checkP2pStatus();\n\n                  _context2.next = 5;\n                  return withdraw.check10kLimit();\n\n                case 5:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        })));\n        (0,external_mobx_.reaction)(function () {\n          return [switched, is_logged_in, currency];\n        }, /*#__PURE__*/general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return _this2.WS.wait('get_settings');\n\n                case 2:\n                  if (!is_logged_in) {\n                    _context3.next = 10;\n                    break;\n                  }\n\n                  _context3.next = 5;\n                  return _this2.getAdvertizerError();\n\n                case 5:\n                  account_prompt_dialog.resetLastLocation();\n\n                  if (switched) {\n                    _context3.next = 10;\n                    break;\n                  }\n\n                  _this2.checkP2pStatus(); // check if withdrawal limit is reached\n                  // if yes, this will trigger to show a notification\n\n\n                  _context3.next = 10;\n                  return _this2.check10kLimit();\n\n                case 10:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        })));\n        (0,external_mobx_.reaction)(function () {\n          return currency;\n        }, function () {\n          withdraw.setIsWithdrawConfirmed(false);\n        });\n      }\n    }\n  }, {\n    key: \"getAdvertizerError\",\n    value: function () {\n      var _getAdvertizerError = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var advertiser_info;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.WS.authorized.p2pAdvertiserInfo();\n\n              case 2:\n                advertiser_info = _context4.sent;\n                this.setP2pAdvertiserError((0,shared_.getPropertyValue)(advertiser_info, ['error', 'code']));\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getAdvertizerError() {\n        return _getAdvertizerError.apply(this, arguments);\n      }\n\n      return getAdvertizerError;\n    }()\n  }, {\n    key: \"setP2pAdvertiserError\",\n    value: function setP2pAdvertiserError(value) {\n      this.p2p_advertiser_error = value;\n    }\n  }, {\n    key: \"checkP2pStatus\",\n    value: function checkP2pStatus() {\n      var advertiser_error = this.p2p_advertiser_error;\n      var is_p2p_restricted = advertiser_error === 'RestrictedCountry' || advertiser_error === 'RestrictedCurrency';\n      this.setIsP2pVisible(!(is_p2p_restricted || this.root_store.client.is_virtual));\n    }\n  }, {\n    key: \"onMountCommon\",\n    value: function () {\n      var _onMountCommon = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(should_remount) {\n        var _this$root_store5, client, common, modules, _modules$cashier2, account_transfer, onramp, payment_agent, payment_agent_transfer, transaction_history;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this$root_store5 = this.root_store, client = _this$root_store5.client, common = _this$root_store5.common, modules = _this$root_store5.modules;\n                _modules$cashier2 = modules.cashier, account_transfer = _modules$cashier2.account_transfer, onramp = _modules$cashier2.onramp, payment_agent = _modules$cashier2.payment_agent, payment_agent_transfer = _modules$cashier2.payment_agent_transfer, transaction_history = _modules$cashier2.transaction_history;\n\n                if (!client.is_logged_in) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                if (!this.is_populating_values) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 5:\n                this.is_populating_values = true;\n\n                if (should_remount) {\n                  this.setOnRemount(this.onMountCommon);\n                } // we need to see if client's country has PA\n                // if yes, we can show the PA tab in cashier\n\n\n                payment_agent.setPaymentAgentList().then(payment_agent.filterPaymentAgentList);\n\n                if (!payment_agent_transfer.is_payment_agent) {\n                  payment_agent_transfer.checkIsPaymentAgent();\n                }\n\n                if (!account_transfer.accounts_list.length) {\n                  account_transfer.sortAccountsTransfer();\n                }\n\n                if (!onramp.is_onramp_tab_visible && window.location.pathname.endsWith(shared_.routes.cashier_onramp)) {\n                  common.routeTo(shared_.routes.cashier_deposit);\n                }\n\n                if (!transaction_history.is_crypto_transactions_visible && window.location.pathname.endsWith(shared_.routes.cashier_crypto_transactions)) {\n                  common.routeTo(shared_.routes.cashier_deposit);\n                  transaction_history.setIsCryptoTransactionsVisible(true);\n                  transaction_history.onMount();\n                }\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function onMountCommon(_x) {\n        return _onMountCommon.apply(this, arguments);\n      }\n\n      return onMountCommon;\n    }()\n  }, {\n    key: \"setCashierTabIndex\",\n    value: function setCashierTabIndex(index) {\n      this.cashier_route_tab_index = index;\n    }\n  }, {\n    key: \"setNotificationCount\",\n    value: function setNotificationCount(notification_count) {\n      this.p2p_notification_count = notification_count;\n    }\n  }, {\n    key: \"setIsP2pVisible\",\n    value: function setIsP2pVisible(is_p2p_visible) {\n      this.is_p2p_visible = is_p2p_visible;\n\n      if (!is_p2p_visible && window.location.pathname.endsWith(shared_.routes.cashier_p2p)) {\n        var _this$root_store$modu2;\n\n        this.root_store.common.routeTo((_this$root_store$modu2 = this.root_store.modules.cashier.account_prompt_dialog.last_location) !== null && _this$root_store$modu2 !== void 0 ? _this$root_store$modu2 : shared_.routes.cashier_deposit);\n      }\n    }\n  }, {\n    key: \"is_cashier_locked\",\n    get: function get() {\n      var account_status = this.root_store.client.account_status;\n      if (!(account_status !== null && account_status !== void 0 && account_status.status)) return false;\n      return account_status.status.some(function (status_name) {\n        return status_name === 'cashier_locked';\n      });\n    }\n  }, {\n    key: \"is_system_maintenance\",\n    get: function get() {\n      var account_status = this.root_store.client.account_status;\n      if (!(account_status !== null && account_status !== void 0 && account_status.cashier_validation)) return false;\n      return account_status.cashier_validation.some(function (validation) {\n        return validation === 'system_maintenance';\n      });\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(is_loading) {\n      this.is_loading = is_loading;\n    }\n  }, {\n    key: \"setActiveTab\",\n    value: function setActiveTab(container) {\n      this.active_container = container;\n    }\n  }, {\n    key: \"accountSwitcherListener\",\n    value: function accountSwitcherListener() {\n      var _this$root_store$modu3 = this.root_store.modules.cashier,\n          iframe = _this$root_store$modu3.iframe,\n          payment_agent = _this$root_store$modu3.payment_agent,\n          withdraw = _this$root_store$modu3.withdraw;\n      withdraw.verification.clearVerification();\n      payment_agent.verification.clearVerification();\n      iframe.clearIframe();\n      this.payment_agent = payment_agent;\n      this.is_populating_values = false;\n      this.onRemount();\n      return Promise.resolve();\n    }\n  }]);\n\n  return GeneralStore;\n}(BaseStore), (general_store_descriptor = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_loading\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor2 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_p2p_visible\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor3 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"p2p_notification_count\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), general_store_descriptor4 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"cashier_route_tab_index\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), general_store_descriptor5 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_deposit\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor6 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"should_show_all_available_currencies\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor7 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_cashier_default\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), general_store_descriptor8 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"deposit_target\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), general_store_descriptor9 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"should_set_currency_modal_title_change\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor10 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"p2p_advertiser_error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return undefined;\n  }\n}), general_store_descriptor11 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"has_set_currency\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor12 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"should_percentage_reset\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor13 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"percentage\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), general_store_descriptor14 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"show_p2p_in_cashier_default\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), general_store_descriptor15 = general_store_applyDecoratedDescriptor(general_store_class.prototype, \"onRemount\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return function () {};\n  }\n}), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setOnRemount\", [general_store_dec], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setOnRemount\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_crypto\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"is_crypto\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_p2p_enabled\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"is_p2p_enabled\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"showP2pInCashierDefault\", [general_store_dec2], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"showP2pInCashierDefault\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"attachCashierToMenu\", [general_store_dec3], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"attachCashierToMenu\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"replaceCashierMenuOnclick\", [general_store_dec4], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"replaceCashierMenuOnclick\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setHasSetCurrency\", [general_store_dec5], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setHasSetCurrency\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"changeSetCurrencyModalTitle\", [general_store_dec6], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"changeSetCurrencyModalTitle\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"onMountCashierDefault\", [general_store_dec7], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"onMountCashierDefault\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"calculatePercentage\", [general_store_dec8], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"calculatePercentage\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"percentageSelectorSelectionStatus\", [general_store_dec9], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"percentageSelectorSelectionStatus\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setIsDeposit\", [general_store_dec10], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setIsDeposit\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setShouldShowAllAvailableCurrencies\", [general_store_dec11], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setShouldShowAllAvailableCurrencies\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setIsCashierDefault\", [general_store_dec12], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setIsCashierDefault\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setDepositTarget\", [general_store_dec13], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setDepositTarget\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"continueRoute\", [general_store_dec14], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"continueRoute\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setAccountSwitchListener\", [general_store_dec15], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setAccountSwitchListener\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"init\", [general_store_dec16], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"init\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"getAdvertizerError\", [general_store_dec17], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"getAdvertizerError\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setP2pAdvertiserError\", [general_store_dec18], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setP2pAdvertiserError\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"checkP2pStatus\", [general_store_dec19], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"checkP2pStatus\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"onMountCommon\", [general_store_dec20], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"onMountCommon\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setCashierTabIndex\", [general_store_dec21], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setCashierTabIndex\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setNotificationCount\", [general_store_dec22], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setNotificationCount\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setIsP2pVisible\", [general_store_dec23], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setIsP2pVisible\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_cashier_locked\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"is_cashier_locked\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"is_system_maintenance\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"is_system_maintenance\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setLoading\", [general_store_dec24], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setLoading\"), general_store_class.prototype), general_store_applyDecoratedDescriptor(general_store_class.prototype, \"setActiveTab\", [_dec25], Object.getOwnPropertyDescriptor(general_store_class.prototype, \"setActiveTab\"), general_store_class.prototype)), general_store_class));\n\n;// CONCATENATED MODULE: ./Stores/iframe-store.js\nvar iframe_store_dec, iframe_store_dec2, iframe_store_dec3, iframe_store_dec4, iframe_store_dec5, iframe_store_dec6, iframe_store_dec7, iframe_store_class, iframe_store_descriptor, iframe_store_descriptor2, iframe_store_descriptor3, iframe_store_descriptor4;\n\nfunction iframe_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction iframe_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { iframe_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { iframe_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction iframe_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction iframe_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction iframe_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction iframe_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) iframe_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) iframe_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction iframe_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction iframe_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\nvar IframeStore = (iframe_store_dec = external_mobx_.action.bound, iframe_store_dec2 = external_mobx_.action.bound, iframe_store_dec3 = external_mobx_.action.bound, iframe_store_dec4 = external_mobx_.action.bound, iframe_store_dec5 = external_mobx_.action.bound, iframe_store_dec6 = external_mobx_.action.bound, iframe_store_dec7 = external_mobx_.action.bound, (iframe_store_class = /*#__PURE__*/function () {\n  function IframeStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    iframe_store_classCallCheck(this, IframeStore);\n\n    iframe_store_initializerDefineProperty(this, \"iframe_height\", iframe_store_descriptor, this);\n\n    iframe_store_initializerDefineProperty(this, \"iframe_url\", iframe_store_descriptor2, this);\n\n    iframe_store_initializerDefineProperty(this, \"is_session_timeout\", iframe_store_descriptor3, this);\n\n    this.onIframeLoaded = '';\n\n    iframe_store_initializerDefineProperty(this, \"timeout_session\", iframe_store_descriptor4, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  iframe_store_createClass(IframeStore, [{\n    key: \"setSessionTimeout\",\n    value: function setSessionTimeout(is_session_time_out) {\n      this.is_session_timeout = is_session_time_out;\n\n      if (is_session_time_out) {\n        this.removeOnIframeLoaded();\n      }\n    }\n  }, {\n    key: \"checkIframeLoaded\",\n    value: function () {\n      var _checkIframeLoaded = iframe_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$root_store, modules, ui;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store = this.root_store, modules = _this$root_store.modules, ui = _this$root_store.ui;\n                this.removeOnIframeLoaded();\n\n                this.onIframeLoaded = function (e) {\n                  if (/cashier|doughflow/.test(e.origin)) {\n                    modules.cashier.general_store.setLoading(false); // set the height of the container after content loads so that the\n                    // loading bar stays vertically centered until the end\n\n                    if (ui.is_mobile) {\n                      this.setContainerHeight(window.innerHeight - 100);\n                    } else {\n                      this.setContainerHeight(window.innerHeight - 190);\n                    } // do not remove the listener\n                    // on every iframe screen change we need to update the height to more/less to match the new content\n\n                  }\n                }.bind(this);\n\n                window.addEventListener('message', this.onIframeLoaded, false);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function checkIframeLoaded() {\n        return _checkIframeLoaded.apply(this, arguments);\n      }\n\n      return checkIframeLoaded;\n    }()\n  }, {\n    key: \"removeOnIframeLoaded\",\n    value: function removeOnIframeLoaded() {\n      if (this.onIframeLoaded) {\n        window.removeEventListener('message', this.onIframeLoaded, false);\n        this.onIframeLoaded = '';\n      }\n    }\n  }, {\n    key: \"clearTimeoutCashierUrl\",\n    value: function clearTimeoutCashierUrl() {\n      if (this.timeout_session) {\n        clearTimeout(this.timeout_session);\n      }\n    }\n  }, {\n    key: \"setTimeoutCashierUrl\",\n    value: function setTimeoutCashierUrl() {\n      var _this = this;\n\n      this.clearTimeoutCashierUrl();\n      this.timeout_session = setTimeout(function () {\n        _this.setSessionTimeout(true);\n      }, 60000);\n    }\n  }, {\n    key: \"setIframeUrl\",\n    value: function setIframeUrl(url) {\n      var container = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.root_store.modules.cashier.general_store.active_container;\n      var _this$root_store2 = this.root_store,\n          client = _this$root_store2.client,\n          ui = _this$root_store2.ui;\n\n      if (url) {\n        this.iframe_url = \"\".concat(url, \"&theme=\").concat(ui.is_dark_mode_on ? 'dark' : 'light'); // after we set iframe url we can clear verification code\n\n        client.setVerificationCode('', constants.map_action[container]);\n      } else {\n        this.iframe_url = url;\n      }\n    }\n  }, {\n    key: \"setContainerHeight\",\n    value: function setContainerHeight(height) {\n      this.iframe_height = height;\n    }\n  }, {\n    key: \"clearIframe\",\n    value: function clearIframe() {\n      this.setIframeUrl('');\n      this.clearTimeoutCashierUrl();\n      this.setSessionTimeout(true);\n    }\n  }]);\n\n  return IframeStore;\n}(), (iframe_store_descriptor = iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"iframe_height\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), iframe_store_descriptor2 = iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"iframe_url\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), iframe_store_descriptor3 = iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"is_session_timeout\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), iframe_store_descriptor4 = iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"timeout_session\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"setSessionTimeout\", [iframe_store_dec], Object.getOwnPropertyDescriptor(iframe_store_class.prototype, \"setSessionTimeout\"), iframe_store_class.prototype), iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"checkIframeLoaded\", [iframe_store_dec2], Object.getOwnPropertyDescriptor(iframe_store_class.prototype, \"checkIframeLoaded\"), iframe_store_class.prototype), iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"clearTimeoutCashierUrl\", [iframe_store_dec3], Object.getOwnPropertyDescriptor(iframe_store_class.prototype, \"clearTimeoutCashierUrl\"), iframe_store_class.prototype), iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"setTimeoutCashierUrl\", [iframe_store_dec4], Object.getOwnPropertyDescriptor(iframe_store_class.prototype, \"setTimeoutCashierUrl\"), iframe_store_class.prototype), iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"setIframeUrl\", [iframe_store_dec5], Object.getOwnPropertyDescriptor(iframe_store_class.prototype, \"setIframeUrl\"), iframe_store_class.prototype), iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"setContainerHeight\", [iframe_store_dec6], Object.getOwnPropertyDescriptor(iframe_store_class.prototype, \"setContainerHeight\"), iframe_store_class.prototype), iframe_store_applyDecoratedDescriptor(iframe_store_class.prototype, \"clearIframe\", [iframe_store_dec7], Object.getOwnPropertyDescriptor(iframe_store_class.prototype, \"clearIframe\"), iframe_store_class.prototype)), iframe_store_class));\n\n;// CONCATENATED MODULE: ./Config/on-ramp-providers.js\n\n\nvar createBanxaProvider = function createBanxaProvider(store) {\n  return {\n    icon: {\n      dark: 'IcCashierBanxaDark',\n      light: 'IcCashierBanxaLight'\n    },\n    name: 'Banxa',\n    getDescription: function getDescription() {\n      return (0,translations_.localize)('A fast and secure fiat-to-crypto payment service. Deposit cryptocurrencies from anywhere in the world using your credit/debit cards and bank transfers.');\n    },\n    getAllowedResidencies: function getAllowedResidencies() {\n      return ['*'];\n    },\n    getPaymentIcons: function getPaymentIcons() {\n      return [{\n        dark: 'IcCashierVisaDark',\n        light: 'IcCashierVisaLight'\n      }, {\n        dark: 'IcCashierMastercardDark',\n        light: 'IcCashierMastercardLight'\n      }, {\n        dark: 'IcCashierBpayDark',\n        light: 'IcCashierBpayLight'\n      }, {\n        dark: 'IcCashierSepaDark',\n        light: 'IcCashierSepaLight'\n      }, {\n        dark: 'IcCashierBlueshyftDark',\n        light: 'IcCashierBlueshyftLight'\n      }, {\n        dark: 'IcCashierFlexepinDark',\n        light: 'IcCashierFlexepinLight'\n      }, {\n        dark: 'IcCashierPayIdDark',\n        light: 'IcCashierPayIdLight'\n      }, {\n        dark: 'IcCashierPoliDark',\n        light: 'IcCashierPoliLight'\n      }, {\n        dark: 'IcCashierApplePay',\n        light: 'IcCashierApplePay'\n      }, {\n        dark: 'IcCashierInteracEtransfer',\n        light: 'IcCashierInteracEtransfer'\n      }, {\n        dark: 'IcCashierIdeal',\n        light: 'IcCashierIdeal'\n      }, {\n        dark: 'IcCashierPostBillPayDark',\n        light: 'IcCashierPostBillPayLight'\n      }, {\n        dark: 'IcCashierSofort',\n        light: 'IcCashierSofort'\n      }];\n    },\n    getScriptDependencies: function getScriptDependencies() {\n      return [];\n    },\n    // None.\n    getDefaultFromCurrency: function getDefaultFromCurrency() {\n      return '';\n    },\n    getFromCurrencies: function getFromCurrencies() {\n      return ['*'];\n    },\n    getToCurrencies: function getToCurrencies() {\n      return ['*'];\n    },\n    getWidgetHtml: function getWidgetHtml() {\n      return new Promise(function (resolve, reject) {\n        store.WS.serviceToken({\n          service_token: 1,\n          service: 'banxa',\n          referrer: window.location.href\n        }).then(function (response) {\n          if (response.error) {\n            reject(response.error.message);\n          } else {\n            var url = response.service_token.banxa.url;\n\n            if (url) {\n              window.open(url);\n            } // Resolving empty will/should redirect user.\n\n\n            resolve();\n          }\n        });\n      });\n    },\n    onMountWidgetContainer: function onMountWidgetContainer() {},\n    should_show_deposit_address: false\n  };\n};\n\nvar createChangellyProvider = function createChangellyProvider(store) {\n  return {\n    icon: {\n      dark: 'IcCashierChangellyDark',\n      light: 'IcCashierChangellyLight'\n    },\n    name: 'Changelly',\n    getDescription: function getDescription() {\n      return (0,translations_.localize)('Your simple access to crypto. Fast and secure way to exchange and purchase cryptocurrencies. 24/7 live chat support.');\n    },\n    getAllowedResidencies: function getAllowedResidencies() {\n      return ['*'];\n    },\n    getPaymentIcons: function getPaymentIcons() {\n      return [{\n        dark: 'IcCashierVisaDark',\n        light: 'IcCashierVisaLight'\n      }, {\n        dark: 'IcCashierMastercardDark',\n        light: 'IcCashierMastercardLight'\n      }];\n    },\n    getScriptDependencies: function getScriptDependencies() {\n      return [];\n    },\n    getDefaultFromCurrency: function getDefaultFromCurrency() {\n      return 'usd';\n    },\n    getFromCurrencies: function getFromCurrencies() {\n      return ['usd', 'eur', 'gbp'];\n    },\n    getToCurrencies: function getToCurrencies() {\n      return ['bch', 'btc', 'etc', 'eth', 'ltc', 'ust'];\n    },\n    getWidgetHtml: function getWidgetHtml() {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        var url = new URL('https://widget.changelly.com/?v=3&theme=default');\n        url.searchParams.append('fromDefault', _this.getDefaultFromCurrency());\n        var currency = store.root_store.client.currency.toLowerCase();\n\n        if (_this.getToCurrencies().includes(currency)) {\n          var to_currency = currency === 'ust' ? 'usdt' : currency;\n          url.searchParams.append('to', to_currency);\n          url.searchParams.append('toDefault', to_currency);\n        }\n\n        url.searchParams.append('amount', 1);\n        url.searchParams.append('merchant_id', 'iiq3jdt2p44yrfbx');\n        window.open(url);\n        resolve();\n      });\n    },\n    onMountWidgetContainer: function onMountWidgetContainer() {},\n    should_show_deposit_address: true\n  };\n};\n\nvar createXanPoolProvider = function createXanPoolProvider(store) {\n  return {\n    icon: {\n      dark: 'IcCashierXanpoolDark',\n      light: 'IcCashierXanpoolLight'\n    },\n    name: 'XanPool',\n    getDescription: function getDescription() {\n      return (0,translations_.localize)('Buy cryptocurrencies in an instant. Enjoy easy, quick, and secure exchanges using your local payment methods.');\n    },\n    getAllowedResidencies: function getAllowedResidencies() {\n      return ['*'];\n    },\n    getPaymentIcons: function getPaymentIcons() {\n      return [{\n        dark: 'IcCashierFpsDark',\n        light: 'IcCashierFpsLight'\n      }, {\n        dark: 'IcCashierAliPayDark',\n        light: 'IcCashierAliPayLight'\n      }, {\n        dark: 'IcCashierGoPayDark',\n        light: 'IcCashierGoPayLight'\n      }, {\n        dark: 'IcCashierMandiriPay',\n        light: 'IcCashierMandiriPay'\n      }, {\n        dark: 'IcCashierInstaPayLight',\n        light: 'IcCashierInstaPayDark'\n      }, {\n        dark: 'IcCashierCebuanaLhuillierDark',\n        light: 'IcCashierCebuanaLhuillierLight'\n      }, {\n        dark: 'IcCashierPayNowDark',\n        light: 'IcCashierPayNowLight'\n      }, {\n        dark: 'IcCashierUpiDark',\n        light: 'IcCashierUpiLight'\n      }, {\n        dark: 'IcCashierPromptPayDark',\n        light: 'IcCashierPromptPayLight'\n      }, {\n        dark: 'IcCashierViettlePay',\n        light: 'IcCashierViettlePay'\n      }];\n    },\n    getScriptDependencies: function getScriptDependencies() {\n      return [];\n    },\n    getToCurrencies: function getToCurrencies() {\n      return ['btc', 'eth', 'ust', 'zil', 'nem'];\n    },\n    getWidgetHtml: function getWidgetHtml() {\n      return new Promise(function (resolve) {\n        var currency = store.root_store.client.currency;\n        var url = 'https://checkout.xanpool.com/';\n        url += \"?apiKey=db4ec638dff9a68abda1ef6b7638c220\";\n        url += \"&redirectUrl=\".concat(window.location.href);\n        url += \"&wallet=\".concat(store.deposit_address);\n        url += \"&cryptoCurrency=\".concat(currency === 'UST' ? 'USDT' : currency);\n        url += \"&transactionType=buy\";\n        window.open(url);\n        resolve();\n      });\n    },\n    onMountWidgetContainer: function onMountWidgetContainer() {},\n    should_show_deposit_address: false\n  };\n};\n\n/* harmony default export */ const on_ramp_providers = ({\n  createBanxaProvider: createBanxaProvider,\n  createChangellyProvider: createChangellyProvider,\n  createXanPoolProvider: createXanPoolProvider\n});\n;// CONCATENATED MODULE: ./Stores/on-ramp-store.js\nfunction on_ramp_store_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { on_ramp_store_typeof = function _typeof(obj) { return typeof obj; }; } else { on_ramp_store_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return on_ramp_store_typeof(obj); }\n\nvar on_ramp_store_dec, on_ramp_store_dec2, on_ramp_store_dec3, on_ramp_store_dec4, on_ramp_store_dec5, on_ramp_store_dec6, on_ramp_store_dec7, on_ramp_store_dec8, on_ramp_store_dec9, on_ramp_store_dec10, on_ramp_store_dec11, on_ramp_store_dec12, on_ramp_store_dec13, on_ramp_store_dec14, on_ramp_store_dec15, on_ramp_store_dec16, on_ramp_store_dec17, on_ramp_store_dec18, on_ramp_store_dec19, on_ramp_store_dec20, on_ramp_store_dec21, on_ramp_store_dec22, on_ramp_store_class, on_ramp_store_descriptor, on_ramp_store_descriptor2, on_ramp_store_descriptor3, on_ramp_store_descriptor4, on_ramp_store_descriptor5, on_ramp_store_descriptor6, on_ramp_store_descriptor7, on_ramp_store_descriptor8, on_ramp_store_descriptor9, on_ramp_store_descriptor10, on_ramp_store_descriptor11;\n\nfunction on_ramp_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction on_ramp_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { on_ramp_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { on_ramp_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction on_ramp_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction on_ramp_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction on_ramp_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction on_ramp_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) on_ramp_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) on_ramp_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction on_ramp_store_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) on_ramp_store_setPrototypeOf(subClass, superClass); }\n\nfunction on_ramp_store_setPrototypeOf(o, p) { on_ramp_store_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return on_ramp_store_setPrototypeOf(o, p); }\n\nfunction on_ramp_store_createSuper(Derived) { var hasNativeReflectConstruct = on_ramp_store_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = on_ramp_store_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = on_ramp_store_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return on_ramp_store_possibleConstructorReturn(this, result); }; }\n\nfunction on_ramp_store_possibleConstructorReturn(self, call) { if (call && (on_ramp_store_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return on_ramp_store_assertThisInitialized(self); }\n\nfunction on_ramp_store_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction on_ramp_store_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction on_ramp_store_getPrototypeOf(o) { on_ramp_store_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return on_ramp_store_getPrototypeOf(o); }\n\nfunction on_ramp_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction on_ramp_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\n\n\nvar OnRampStore = (on_ramp_store_dec = external_mobx_.observable.shallow, on_ramp_store_dec2 = external_mobx_.observable.ref, on_ramp_store_dec3 = external_mobx_.action.bound, on_ramp_store_dec4 = external_mobx_.action.bound, on_ramp_store_dec5 = external_mobx_.action.bound, on_ramp_store_dec6 = external_mobx_.action.bound, on_ramp_store_dec7 = external_mobx_.action.bound, on_ramp_store_dec8 = external_mobx_.action.bound, on_ramp_store_dec9 = external_mobx_.action.bound, on_ramp_store_dec10 = external_mobx_.action.bound, on_ramp_store_dec11 = external_mobx_.action.bound, on_ramp_store_dec12 = external_mobx_.action.bound, on_ramp_store_dec13 = external_mobx_.action.bound, on_ramp_store_dec14 = external_mobx_.action.bound, on_ramp_store_dec15 = external_mobx_.action.bound, on_ramp_store_dec16 = external_mobx_.action.bound, on_ramp_store_dec17 = external_mobx_.action.bound, on_ramp_store_dec18 = external_mobx_.action.bound, on_ramp_store_dec19 = external_mobx_.action.bound, on_ramp_store_dec20 = external_mobx_.action.bound, on_ramp_store_dec21 = external_mobx_.action.bound, on_ramp_store_dec22 = external_mobx_.action.bound, (on_ramp_store_class = /*#__PURE__*/function (_BaseStore) {\n  on_ramp_store_inherits(OnRampStore, _BaseStore);\n\n  var _super = on_ramp_store_createSuper(OnRampStore);\n\n  function OnRampStore(_ref) {\n    var _this;\n\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    on_ramp_store_classCallCheck(this, OnRampStore);\n\n    _this = _super.call(this, {\n      root_store: root_store\n    });\n\n    on_ramp_store_initializerDefineProperty(_this, \"api_error\", on_ramp_store_descriptor, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"deposit_address\", on_ramp_store_descriptor2, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"is_deposit_address_loading\", on_ramp_store_descriptor3, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"is_deposit_address_popover_open\", on_ramp_store_descriptor4, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"is_onramp_modal_open\", on_ramp_store_descriptor5, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"is_requesting_widget_html\", on_ramp_store_descriptor6, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"onramp_providers\", on_ramp_store_descriptor7, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"selected_provider\", on_ramp_store_descriptor8, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"should_show_widget\", on_ramp_store_descriptor9, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"widget_error\", on_ramp_store_descriptor10, on_ramp_store_assertThisInitialized(_this));\n\n    on_ramp_store_initializerDefineProperty(_this, \"widget_html\", on_ramp_store_descriptor11, on_ramp_store_assertThisInitialized(_this));\n\n    _this.deposit_address_ref = null;\n    _this.WS = WS;\n\n    _this.onClientInit( /*#__PURE__*/on_ramp_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setOnrampProviders([on_ramp_providers.createChangellyProvider(on_ramp_store_assertThisInitialized(_this)), on_ramp_providers.createXanPoolProvider(on_ramp_store_assertThisInitialized(_this)), on_ramp_providers.createBanxaProvider(on_ramp_store_assertThisInitialized(_this))]);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    return _this;\n  }\n\n  on_ramp_store_createClass(OnRampStore, [{\n    key: \"is_onramp_tab_visible\",\n    get: function get() {\n      var client = this.root_store.client;\n      return client.is_virtual === false && (0,shared_.isCryptocurrency)(client.currency) && this.filtered_onramp_providers.length > 0;\n    }\n  }, {\n    key: \"filtered_onramp_providers\",\n    get: function get() {\n      var client = this.root_store.client;\n      return this.onramp_providers // Ensure provider supports this user's account currency.\n      .filter(function (provider) {\n        var to_currencies = provider.getToCurrencies();\n        return to_currencies.includes('*') || to_currencies.includes(client.currency.toLowerCase());\n      }) // Ensure provider supports this user's residency.\n      .filter(function (provider) {\n        var allowed_residencies = provider.getAllowedResidencies();\n        return allowed_residencies.includes('*') || allowed_residencies.includes(client.residence);\n      });\n    }\n  }, {\n    key: \"onramp_popup_modal_title\",\n    get: function get() {\n      if (this.should_show_widget) {\n        return (0,translations_.localize)('Payment channel');\n      } else if (this.selected_provider) {\n        if (this.should_show_dialog) {\n          return (0,translations_.localize)('Our server cannot retrieve an address.');\n        }\n\n        return ' '; // Empty string to render header + close icon.\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"should_show_dialog\",\n    get: function get() {\n      return this.api_error;\n    }\n  }, {\n    key: \"onMountOnramp\",\n    value: function onMountOnramp() {\n      var _this2 = this;\n\n      this.disposeThirdPartyJsReaction = (0,external_mobx_.reaction)(function () {\n        return _this2.selected_provider;\n      }, /*#__PURE__*/function () {\n        var _ref3 = on_ramp_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(provider) {\n          var dependencies, _yield$import, loadjs, script_name;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (provider) {\n                    _context2.next = 2;\n                    break;\n                  }\n\n                  return _context2.abrupt(\"return\");\n\n                case 2:\n                  dependencies = provider.getScriptDependencies();\n\n                  if (!(dependencies.length === 0)) {\n                    _context2.next = 5;\n                    break;\n                  }\n\n                  return _context2.abrupt(\"return\");\n\n                case 5:\n                  _context2.next = 7;\n                  return __webpack_require__.e(/* import() | loadjs */ \"loadjs\").then(__webpack_require__.t.bind(__webpack_require__, \"../../../node_modules/loadjs/dist/loadjs.umd.js\", 23));\n\n                case 7:\n                  _yield$import = _context2.sent;\n                  loadjs = _yield$import[\"default\"];\n                  script_name = \"\".concat((0,shared_.getKebabCase)(provider.name), \"-onramp\");\n\n                  if (!loadjs.isDefined(script_name)) {\n                    loadjs(dependencies, script_name, {\n                      error: function error() {\n                        // eslint-disable-next-line no-console\n                        console.warn(\"Dependencies for onramp provider \".concat(provider.name, \" could not be loaded.\"));\n\n                        _this2.setSelectedProvider(null);\n                      }\n                    });\n                  }\n\n                case 11:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }()); // When \"should_show_widget\", attempt to fetch \"selected_provider\"'s \"widget_html\".\n\n      this.disposeGetWidgetHtmlReaction = (0,external_mobx_.reaction)(function () {\n        return _this2.should_show_widget;\n      }, function (should_show_widget) {\n        if (should_show_widget) {\n          if (_this2.is_requesting_widget_html) {\n            return;\n          }\n\n          _this2.setIsRequestingWidgetHtml(true);\n\n          _this2.selected_provider.getWidgetHtml().then(function (widget_html) {\n            if (widget_html) {\n              // Regular providers (iframe/JS embed)\n              _this2.setWidgetHtml(widget_html);\n            } else {\n              // An empty resolve (widget_html) identifies a redirect.\n              _this2.setShouldShowWidget(false);\n            }\n          })[\"catch\"](function (error) {\n            _this2.setWidgetError(error);\n          })[\"finally\"](function () {\n            return _this2.setIsRequestingWidgetHtml(false);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"onUnmountOnramp\",\n    value: function onUnmountOnramp() {\n      if (typeof this.disposeThirdPartyJsReaction === 'function') {\n        this.disposeThirdPartyJsReaction();\n      }\n\n      if (typeof this.disposeGetWidgetHtmlReaction === 'function') {\n        this.disposeGetWidgetHtmlReaction();\n      }\n    }\n  }, {\n    key: \"onClickCopyDepositAddress\",\n    value: function onClickCopyDepositAddress() {\n      var _this3 = this;\n\n      var range = document.createRange();\n      range.selectNodeContents(this.deposit_address_ref);\n      var selections = window.getSelection();\n      selections.removeAllRanges();\n      selections.addRange(range);\n      navigator.clipboard.writeText(this.deposit_address).then(function () {\n        _this3.setIsDepositAddressPopoverOpen(true);\n\n        setTimeout(function () {\n          return _this3.setIsDepositAddressPopoverOpen(false);\n        }, 500);\n      });\n    }\n  }, {\n    key: \"onClickDisclaimerContinue\",\n    value: function onClickDisclaimerContinue() {\n      this.setShouldShowWidget(true);\n    }\n  }, {\n    key: \"onClickGoToDepositPage\",\n    value: function onClickGoToDepositPage() {\n      this.pollApiForDepositAddress(false);\n      window.open((0,shared_.websiteUrl)() + shared_.routes.cashier_deposit.substring(1));\n    }\n  }, {\n    key: \"pollApiForDepositAddress\",\n    value: function pollApiForDepositAddress(should_allow_empty_address) {\n      var _this4 = this;\n\n      // should_allow_empty_address: API returns empty deposit address for legacy accounts\n      // that have never generated a deposit address. Setting this to \"true\" will allow\n      // the user to be redirected to the Deposit page (where an address will be generated).\n      // Setting this to \"false\" will start polling the API for this deposit address.\n      this.setIsDepositAddressLoading(true);\n      this.setApiError(null);\n      var deposit_address_interval = setInterval(function () {\n        return getDepositAddressFromApi;\n      }, 3000);\n\n      var getDepositAddressFromApi = function getDepositAddressFromApi() {\n        _this4.WS.authorized.cashier('deposit', {\n          provider: 'crypto',\n          type: 'api'\n        }).then(function (response) {\n          var should_clear_interval = false;\n\n          if (response.error) {\n            _this4.setApiError(response.error);\n\n            should_clear_interval = true;\n          } else {\n            var address = response.cashier.deposit.address;\n\n            if (address || should_allow_empty_address) {\n              _this4.setDepositAddress(address);\n\n              should_clear_interval = true;\n            }\n          }\n\n          if (should_clear_interval) {\n            clearInterval(deposit_address_interval);\n\n            _this4.setIsDepositAddressLoading(false);\n          }\n        });\n      };\n\n      getDepositAddressFromApi();\n      setTimeout(function () {\n        clearInterval(deposit_address_interval);\n\n        _this4.setIsDepositAddressLoading(false);\n      }, 30000);\n    }\n  }, {\n    key: \"resetPopup\",\n    value: function resetPopup() {\n      this.setApiError(null);\n      this.setDepositAddress(null);\n      this.setDepositAddressRef(null);\n      this.setIsDepositAddressLoading(true);\n      this.setSelectedProvider(null);\n      this.setShouldShowWidget(false);\n      this.setWidgetError(null);\n      this.setWidgetHtml(null);\n    }\n  }, {\n    key: \"setApiError\",\n    value: function setApiError(api_error) {\n      this.api_error = api_error;\n    }\n  }, {\n    key: \"setCopyIconRef\",\n    value: function setCopyIconRef(ref) {\n      this.copy_icon_ref = ref;\n    }\n  }, {\n    key: \"setDepositAddress\",\n    value: function setDepositAddress(deposit_address) {\n      this.deposit_address = deposit_address;\n    }\n  }, {\n    key: \"setDepositAddressRef\",\n    value: function setDepositAddressRef(ref) {\n      this.deposit_address_ref = ref;\n    }\n  }, {\n    key: \"setIsDepositAddressLoading\",\n    value: function setIsDepositAddressLoading(is_loading) {\n      this.is_deposit_address_loading = is_loading;\n    }\n  }, {\n    key: \"setIsDepositAddressPopoverOpen\",\n    value: function setIsDepositAddressPopoverOpen(is_open) {\n      this.is_deposit_address_popover_open = is_open;\n    }\n  }, {\n    key: \"setIsOnRampModalOpen\",\n    value: function setIsOnRampModalOpen(is_open) {\n      this.is_onramp_modal_open = is_open;\n    }\n  }, {\n    key: \"setIsRequestingWidgetHtml\",\n    value: function setIsRequestingWidgetHtml(is_requesting_widget_html) {\n      this.is_requesting_widget_html = is_requesting_widget_html;\n    }\n  }, {\n    key: \"setSelectedProvider\",\n    value: function setSelectedProvider(provider) {\n      if (provider) {\n        this.selected_provider = provider;\n        this.setIsOnRampModalOpen(true);\n        this.pollApiForDepositAddress(true);\n      } else {\n        this.setIsOnRampModalOpen(false);\n        this.selected_provider = null;\n      }\n    }\n  }, {\n    key: \"setShouldShowWidget\",\n    value: function setShouldShowWidget(should_show) {\n      this.should_show_widget = should_show;\n    }\n  }, {\n    key: \"setOnrampProviders\",\n    value: function setOnrampProviders(onramp_providers) {\n      this.onramp_providers = onramp_providers.slice();\n    }\n  }, {\n    key: \"setWidgetError\",\n    value: function setWidgetError(widget_error) {\n      this.widget_error = widget_error;\n    }\n  }, {\n    key: \"setWidgetHtml\",\n    value: function setWidgetHtml(widget_html) {\n      this.widget_html = widget_html;\n    }\n  }]);\n\n  return OnRampStore;\n}(BaseStore), (on_ramp_store_descriptor = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"api_error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), on_ramp_store_descriptor2 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"deposit_address\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), on_ramp_store_descriptor3 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"is_deposit_address_loading\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), on_ramp_store_descriptor4 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"is_deposit_address_popover_open\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), on_ramp_store_descriptor5 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"is_onramp_modal_open\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), on_ramp_store_descriptor6 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"is_requesting_widget_html\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), on_ramp_store_descriptor7 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"onramp_providers\", [on_ramp_store_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), on_ramp_store_descriptor8 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"selected_provider\", [on_ramp_store_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), on_ramp_store_descriptor9 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"should_show_widget\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), on_ramp_store_descriptor10 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"widget_error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), on_ramp_store_descriptor11 = on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"widget_html\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"is_onramp_tab_visible\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"is_onramp_tab_visible\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"filtered_onramp_providers\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"filtered_onramp_providers\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"onramp_popup_modal_title\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"onramp_popup_modal_title\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"should_show_dialog\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"should_show_dialog\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"onMountOnramp\", [on_ramp_store_dec3], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"onMountOnramp\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"onUnmountOnramp\", [on_ramp_store_dec4], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"onUnmountOnramp\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"onClickCopyDepositAddress\", [on_ramp_store_dec5], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"onClickCopyDepositAddress\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"onClickDisclaimerContinue\", [on_ramp_store_dec6], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"onClickDisclaimerContinue\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"onClickGoToDepositPage\", [on_ramp_store_dec7], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"onClickGoToDepositPage\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"pollApiForDepositAddress\", [on_ramp_store_dec8], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"pollApiForDepositAddress\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"resetPopup\", [on_ramp_store_dec9], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"resetPopup\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setApiError\", [on_ramp_store_dec10], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setApiError\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setCopyIconRef\", [on_ramp_store_dec11], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setCopyIconRef\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setDepositAddress\", [on_ramp_store_dec12], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setDepositAddress\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setDepositAddressRef\", [on_ramp_store_dec13], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setDepositAddressRef\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setIsDepositAddressLoading\", [on_ramp_store_dec14], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setIsDepositAddressLoading\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setIsDepositAddressPopoverOpen\", [on_ramp_store_dec15], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setIsDepositAddressPopoverOpen\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setIsOnRampModalOpen\", [on_ramp_store_dec16], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setIsOnRampModalOpen\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setIsRequestingWidgetHtml\", [on_ramp_store_dec17], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setIsRequestingWidgetHtml\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setSelectedProvider\", [on_ramp_store_dec18], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setSelectedProvider\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setShouldShowWidget\", [on_ramp_store_dec19], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setShouldShowWidget\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setOnrampProviders\", [on_ramp_store_dec20], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setOnrampProviders\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setWidgetError\", [on_ramp_store_dec21], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setWidgetError\"), on_ramp_store_class.prototype), on_ramp_store_applyDecoratedDescriptor(on_ramp_store_class.prototype, \"setWidgetHtml\", [on_ramp_store_dec22], Object.getOwnPropertyDescriptor(on_ramp_store_class.prototype, \"setWidgetHtml\"), on_ramp_store_class.prototype)), on_ramp_store_class));\n\n;// CONCATENATED MODULE: ./Stores/verification-store.js\nvar verification_store_dec, verification_store_dec2, verification_store_dec3, verification_store_dec4, verification_store_dec5, verification_store_dec6, verification_store_dec7, verification_store_dec8, verification_store_class, verification_store_descriptor, verification_store_descriptor2, verification_store_descriptor3, verification_store_descriptor4, verification_store_descriptor5, verification_store_descriptor6;\n\nfunction verification_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction verification_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { verification_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { verification_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction verification_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction verification_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction verification_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction verification_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) verification_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) verification_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction verification_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction verification_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\nvar VerificationStore = (verification_store_dec = external_mobx_.action.bound, verification_store_dec2 = external_mobx_.action.bound, verification_store_dec3 = external_mobx_.action.bound, verification_store_dec4 = external_mobx_.action.bound, verification_store_dec5 = external_mobx_.action.bound, verification_store_dec6 = external_mobx_.action.bound, verification_store_dec7 = external_mobx_.action.bound, verification_store_dec8 = external_mobx_.action.bound, (verification_store_class = /*#__PURE__*/function () {\n  function VerificationStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    verification_store_classCallCheck(this, VerificationStore);\n\n    verification_store_initializerDefineProperty(this, \"is_button_clicked\", verification_store_descriptor, this);\n\n    verification_store_initializerDefineProperty(this, \"timeout_button\", verification_store_descriptor2, this);\n\n    verification_store_initializerDefineProperty(this, \"error\", verification_store_descriptor3, this);\n\n    verification_store_initializerDefineProperty(this, \"is_email_sent\", verification_store_descriptor4, this);\n\n    verification_store_initializerDefineProperty(this, \"is_resend_clicked\", verification_store_descriptor5, this);\n\n    verification_store_initializerDefineProperty(this, \"resend_timeout\", verification_store_descriptor6, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  verification_store_createClass(VerificationStore, [{\n    key: \"setIsButtonClicked\",\n    value: function setIsButtonClicked(value) {\n      this.is_button_clicked = value;\n    }\n  }, {\n    key: \"setTimeoutButton\",\n    value: function setTimeoutButton(value) {\n      this.timeout_button = value;\n    }\n  }, {\n    key: \"setIsEmailSent\",\n    value: function setIsEmailSent(value) {\n      this.is_email_sent = value;\n    }\n  }, {\n    key: \"setIsResendClicked\",\n    value: function setIsResendClicked(value) {\n      this.is_resend_clicked = value;\n    }\n  }, {\n    key: \"setResendTimeout\",\n    value: function setResendTimeout(value) {\n      this.resend_timeout = value;\n    }\n  }, {\n    key: \"clearTimeoutVerification\",\n    value: function clearTimeoutVerification() {\n      if (this.timeout_button) {\n        clearTimeout(this.timeout_button);\n      }\n    }\n  }, {\n    key: \"setTimeoutVerification\",\n    value: function setTimeoutVerification() {\n      var _this = this;\n\n      this.clearTimeoutVerification();\n      this.setTimeoutButton(setTimeout(function () {\n        _this.clearVerification();\n      }, 3600000));\n    }\n  }, {\n    key: \"sendVerificationEmail\",\n    value: function () {\n      var _sendVerificationEmail = verification_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var _this$root_store, client, modules, resetPaymentAgent, active_container, container, withdrawal_type, response_verify_email;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                resetPaymentAgent = modules.cashier.payment_agent.resetPaymentAgent;\n                active_container = modules.cashier.general_store.active_container;\n                container = constants.map_action[active_container];\n\n                if (!(this.is_button_clicked || !client.email)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 6:\n                this.error.setErrorMessage('');\n                this.setIsButtonClicked(true);\n                withdrawal_type = container === 'payment_agent_withdraw' ? 'paymentagent_withdraw' : 'payment_withdraw';\n                _context.next = 11;\n                return this.WS.verifyEmail(client.email, withdrawal_type);\n\n              case 11:\n                response_verify_email = _context.sent;\n\n                if (response_verify_email.error) {\n                  this.clearVerification();\n\n                  if (response_verify_email.error.code === 'PaymentAgentWithdrawError') {\n                    this.error.setErrorMessage(response_verify_email.error, resetPaymentAgent, null);\n                  } else {\n                    this.error.setErrorMessage(response_verify_email.error, function () {\n                      _this2.error.setErrorMessage('', null, null);\n                    }, null);\n                  }\n                } else {\n                  this.setIsEmailSent(true);\n                  this.setTimeoutVerification();\n                }\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function sendVerificationEmail() {\n        return _sendVerificationEmail.apply(this, arguments);\n      }\n\n      return sendVerificationEmail;\n    }()\n  }, {\n    key: \"resendVerificationEmail\",\n    value: function resendVerificationEmail() {\n      // don't allow clicking while ongoing timeout\n      if (this.resend_timeout < 60) {\n        return;\n      }\n\n      this.setIsButtonClicked(false);\n      this.setCountDownResendVerification();\n      this.sendVerificationEmail();\n    }\n  }, {\n    key: \"setCountDownResendVerification\",\n    value: function setCountDownResendVerification() {\n      var _this3 = this;\n\n      this.setResendTimeout(this.resend_timeout - 1);\n      var resend_interval = setInterval(function () {\n        if (_this3.resend_timeout === 1) {\n          _this3.setResendTimeout(60);\n\n          clearInterval(resend_interval);\n        } else {\n          _this3.setResendTimeout(_this3.resend_timeout - 1);\n        }\n      }, 1000);\n    }\n  }, {\n    key: \"clearVerification\",\n    value: function clearVerification() {\n      var _this$root_store2 = this.root_store,\n          client = _this$root_store2.client,\n          modules = _this$root_store2.modules;\n      var active_container = modules.cashier.general_store.active_container;\n      var container = constants.map_action[active_container];\n      this.clearTimeoutVerification();\n      this.setIsButtonClicked(false);\n      this.setIsEmailSent(false);\n      this.setIsResendClicked(false);\n      this.setResendTimeout(60);\n      this.error.setErrorMessage('', null, null);\n      client.setVerificationCode('', container);\n    }\n  }]);\n\n  return VerificationStore;\n}(), (verification_store_descriptor = verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"is_button_clicked\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), verification_store_descriptor2 = verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"timeout_button\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), verification_store_descriptor3 = verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ErrorStore();\n  }\n}), verification_store_descriptor4 = verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"is_email_sent\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), verification_store_descriptor5 = verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"is_resend_clicked\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), verification_store_descriptor6 = verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"resend_timeout\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 60;\n  }\n}), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"setIsButtonClicked\", [verification_store_dec], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"setIsButtonClicked\"), verification_store_class.prototype), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"setTimeoutButton\", [verification_store_dec2], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"setTimeoutButton\"), verification_store_class.prototype), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"setIsEmailSent\", [verification_store_dec3], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"setIsEmailSent\"), verification_store_class.prototype), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"setIsResendClicked\", [verification_store_dec4], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"setIsResendClicked\"), verification_store_class.prototype), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"setResendTimeout\", [verification_store_dec5], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"setResendTimeout\"), verification_store_class.prototype), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"setTimeoutVerification\", [verification_store_dec6], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"setTimeoutVerification\"), verification_store_class.prototype), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"sendVerificationEmail\", [verification_store_dec7], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"sendVerificationEmail\"), verification_store_class.prototype), verification_store_applyDecoratedDescriptor(verification_store_class.prototype, \"resendVerificationEmail\", [verification_store_dec8], Object.getOwnPropertyDescriptor(verification_store_class.prototype, \"resendVerificationEmail\"), verification_store_class.prototype)), verification_store_class));\n\n;// CONCATENATED MODULE: ./Stores/payment-agent-store.js\nvar payment_agent_store_dec, payment_agent_store_dec2, payment_agent_store_dec3, payment_agent_store_dec4, payment_agent_store_dec5, payment_agent_store_dec6, payment_agent_store_dec7, payment_agent_store_dec8, payment_agent_store_dec9, payment_agent_store_dec10, payment_agent_store_dec11, payment_agent_store_dec12, payment_agent_store_dec13, payment_agent_store_dec14, payment_agent_store_dec15, payment_agent_store_dec16, payment_agent_store_dec17, payment_agent_store_dec18, payment_agent_store_dec19, payment_agent_store_dec20, payment_agent_store_dec21, payment_agent_store_dec22, payment_agent_store_dec23, payment_agent_store_dec24, payment_agent_store_class, payment_agent_store_descriptor, payment_agent_store_descriptor2, payment_agent_store_descriptor3, payment_agent_store_descriptor4, payment_agent_store_descriptor5, payment_agent_store_descriptor6, payment_agent_store_descriptor7, payment_agent_store_descriptor8, payment_agent_store_descriptor9, payment_agent_store_descriptor10, payment_agent_store_descriptor11, payment_agent_store_descriptor12, payment_agent_store_descriptor13, payment_agent_store_descriptor14, payment_agent_store_descriptor15, payment_agent_store_descriptor16, _descriptor17;\n\nfunction payment_agent_store_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction payment_agent_store_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { payment_agent_store_ownKeys(Object(source), true).forEach(function (key) { payment_agent_store_defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { payment_agent_store_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction payment_agent_store_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction payment_agent_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction payment_agent_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { payment_agent_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { payment_agent_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction payment_agent_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction payment_agent_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction payment_agent_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction payment_agent_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) payment_agent_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) payment_agent_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction payment_agent_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction payment_agent_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\n\n\nvar PaymentAgentStore = (payment_agent_store_dec = external_mobx_.action.bound, payment_agent_store_dec2 = external_mobx_.action.bound, payment_agent_store_dec3 = external_mobx_.action.bound, payment_agent_store_dec4 = external_mobx_.action.bound, payment_agent_store_dec5 = external_mobx_.action.bound, payment_agent_store_dec6 = external_mobx_.action.bound, payment_agent_store_dec7 = external_mobx_.action.bound, payment_agent_store_dec8 = external_mobx_.action.bound, payment_agent_store_dec9 = external_mobx_.action.bound, payment_agent_store_dec10 = external_mobx_.action.bound, payment_agent_store_dec11 = external_mobx_.action.bound, payment_agent_store_dec12 = external_mobx_.action.bound, payment_agent_store_dec13 = external_mobx_.action.bound, payment_agent_store_dec14 = external_mobx_.action.bound, payment_agent_store_dec15 = external_mobx_.action.bound, payment_agent_store_dec16 = external_mobx_.action.bound, payment_agent_store_dec17 = external_mobx_.action.bound, payment_agent_store_dec18 = external_mobx_.action.bound, payment_agent_store_dec19 = external_mobx_.action.bound, payment_agent_store_dec20 = external_mobx_.action.bound, payment_agent_store_dec21 = external_mobx_.action.bound, payment_agent_store_dec22 = external_mobx_.action.bound, payment_agent_store_dec23 = external_mobx_.action.bound, payment_agent_store_dec24 = external_mobx_.action.bound, (payment_agent_store_class = /*#__PURE__*/function () {\n  function PaymentAgentStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    payment_agent_store_classCallCheck(this, PaymentAgentStore);\n\n    payment_agent_store_initializerDefineProperty(this, \"list\", payment_agent_store_descriptor, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"agents\", payment_agent_store_descriptor2, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"container\", payment_agent_store_descriptor3, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"error\", payment_agent_store_descriptor4, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"filtered_list\", payment_agent_store_descriptor5, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"is_name_selected\", payment_agent_store_descriptor6, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"is_withdraw\", payment_agent_store_descriptor7, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"is_try_withdraw_successful\", payment_agent_store_descriptor8, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"is_withdraw_successful\", payment_agent_store_descriptor9, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"confirm\", payment_agent_store_descriptor10, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"receipt\", payment_agent_store_descriptor11, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"selected_bank\", payment_agent_store_descriptor12, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"supported_banks\", payment_agent_store_descriptor13, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"verification\", payment_agent_store_descriptor14, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"active_tab_index\", payment_agent_store_descriptor15, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"all_payment_agent_list\", payment_agent_store_descriptor16, this);\n\n    payment_agent_store_initializerDefineProperty(this, \"resetPaymentAgent\", _descriptor17, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  payment_agent_store_createClass(PaymentAgentStore, [{\n    key: \"setActiveTabIndex\",\n    value: function setActiveTabIndex(index) {\n      this.active_tab_index = index;\n    }\n  }, {\n    key: \"setActiveTab\",\n    value: function setActiveTab(index) {\n      this.setActiveTabIndex(index);\n\n      if (index === 1) {\n        this.verification.sendVerificationEmail();\n      }\n    }\n  }, {\n    key: \"is_payment_agent_visible\",\n    get: function get() {\n      return !!(this.filtered_list.length || this.agents.length);\n    }\n  }, {\n    key: \"getPaymentAgentList\",\n    value: function () {\n      var _getPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$root_store$clie, residence, currency;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.WS.wait('get_settings');\n\n              case 2:\n                _this$root_store$clie = this.root_store.client, residence = _this$root_store$clie.residence, currency = _this$root_store$clie.currency;\n                return _context.abrupt(\"return\", this.WS.authorized.paymentAgentList(residence, currency));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getPaymentAgentList() {\n        return _getPaymentAgentList.apply(this, arguments);\n      }\n\n      return getPaymentAgentList;\n    }()\n  }, {\n    key: \"getPaymentAgentDetails\",\n    value: function () {\n      var _getPaymentAgentDetails = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _yield$this$WS$author, paymentagent_details;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.WS.authorized.paymentAgentDetails();\n\n              case 2:\n                _yield$this$WS$author = _context2.sent;\n                paymentagent_details = _yield$this$WS$author.paymentagent_details;\n                return _context2.abrupt(\"return\", paymentagent_details);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getPaymentAgentDetails() {\n        return _getPaymentAgentDetails.apply(this, arguments);\n      }\n\n      return getPaymentAgentDetails;\n    }()\n  }, {\n    key: \"addSupportedBank\",\n    value: function addSupportedBank(bank) {\n      var supported_bank_exists = this.supported_banks.find(function (supported_bank) {\n        return supported_bank.value === bank.toLowerCase();\n      });\n\n      if (!supported_bank_exists) {\n        this.supported_banks.push({\n          text: bank,\n          value: bank.toLowerCase()\n        });\n      }\n    }\n  }, {\n    key: \"clearSuppertedBanks\",\n    value: function clearSuppertedBanks() {\n      this.supported_banks = [];\n    }\n  }, {\n    key: \"sortSupportedBanks\",\n    value: function sortSupportedBanks() {\n      // sort supported banks alphabetically by value, the option 'All payment agents' with value 0 should be on top\n      this.supported_banks.replace(this.supported_banks.slice().sort(function (a, b) {\n        if (a.value < b.value) {\n          return -1;\n        }\n\n        if (a.value > b.value) {\n          return 1;\n        }\n\n        return 0;\n      }));\n    }\n  }, {\n    key: \"setList\",\n    value: function setList(pa_list) {\n      this.list.push(pa_list);\n    }\n  }, {\n    key: \"clearList\",\n    value: function clearList() {\n      this.list = [];\n    }\n  }, {\n    key: \"setPaymentAgentList\",\n    value: function () {\n      var _setPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(pa_list) {\n        var _this = this;\n\n        var payment_agent_list, _payment_agent_list$p;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.t0 = pa_list;\n\n                if (_context3.t0) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                _context3.next = 4;\n                return this.getPaymentAgentList();\n\n              case 4:\n                _context3.t0 = _context3.sent;\n\n              case 5:\n                payment_agent_list = _context3.t0;\n                this.clearList();\n                this.clearSuppertedBanks(); // TODO: Once telephone, url and supported_banks removed from paymentagent_list.list we can remove them and just use the plural ones\n\n                try {\n                  (_payment_agent_list$p = payment_agent_list.paymentagent_list) === null || _payment_agent_list$p === void 0 ? void 0 : _payment_agent_list$p.list.forEach(function (payment_agent) {\n                    _this.setList({\n                      email: payment_agent.email,\n                      phones: (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.phone_numbers) || (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.telephone),\n                      name: payment_agent.name,\n                      supported_banks: (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.supported_payment_methods) || (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.supported_banks),\n                      urls: (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.urls) || (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.url)\n                    });\n\n                    if (payment_agent.supported_banks) {\n                      var supported_banks_array = payment_agent !== null && payment_agent !== void 0 && payment_agent.supported_payment_methods ? payment_agent.supported_payment_methods.map(function (bank) {\n                        return bank.payment_method;\n                      }) : payment_agent.supported_banks.split(',');\n                      supported_banks_array.forEach(function (bank) {\n                        _this.addSupportedBank(bank);\n                      });\n                    }\n                  });\n                } catch (e) {\n                  // eslint-disable-next-line no-console\n                  console.error(e);\n                }\n\n                this.sortSupportedBanks();\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function setPaymentAgentList(_x) {\n        return _setPaymentAgentList.apply(this, arguments);\n      }\n\n      return setPaymentAgentList;\n    }()\n  }, {\n    key: \"filterPaymentAgentList\",\n    value: function filterPaymentAgentList(bank) {\n      var _this2 = this;\n\n      var common = this.root_store.common;\n\n      if (bank) {\n        this.filtered_list = [];\n        this.list.forEach(function (payment_agent) {\n          var supported_banks = payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.supported_banks;\n\n          if (supported_banks) {\n            var is_string = typeof supported_banks === 'string';\n            var bank_index = is_string ? supported_banks.toLowerCase().split(',').indexOf(bank) : supported_banks.map(function (x) {\n              return x.payment_method.toLowerCase();\n            }).indexOf(bank);\n            if (bank_index !== -1) _this2.filtered_list.push(payment_agent);\n          }\n        });\n      } else {\n        this.filtered_list = this.list;\n      }\n\n      if (!this.is_payment_agent_visible && window.location.pathname.endsWith(shared_.routes.cashier_pa)) {\n        common.routeTo(shared_.routes.cashier_deposit);\n      }\n    }\n  }, {\n    key: \"onChangePaymentMethod\",\n    value: function onChangePaymentMethod(_ref2) {\n      var target = _ref2.target;\n      var value = target.value === '0' ? parseInt(target.value) : target.value;\n      this.selected_bank = value;\n      this.filterPaymentAgentList(value);\n    }\n  }, {\n    key: \"setIsWithdraw\",\n    value: function setIsWithdraw() {\n      var is_withdraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !this.is_withdraw;\n      this.is_withdraw = is_withdraw;\n    }\n  }, {\n    key: \"setIsTryWithdrawSuccessful\",\n    value: function setIsTryWithdrawSuccessful(is_try_withdraw_successful) {\n      this.error.setErrorMessage('');\n      this.is_try_withdraw_successful = is_try_withdraw_successful;\n    }\n  }, {\n    key: \"setIsWithdrawSuccessful\",\n    value: function setIsWithdrawSuccessful(is_withdraw_successful) {\n      this.is_withdraw_successful = is_withdraw_successful;\n    }\n  }, {\n    key: \"setConfirmation\",\n    value: function setConfirmation(_ref3) {\n      var amount = _ref3.amount,\n          currency = _ref3.currency,\n          loginid = _ref3.loginid,\n          payment_agent_name = _ref3.payment_agent_name;\n      this.confirm = {\n        amount: amount,\n        currency: currency,\n        loginid: loginid,\n        payment_agent_name: payment_agent_name\n      };\n    }\n  }, {\n    key: \"setReceipt\",\n    value: function setReceipt(_ref4) {\n      var amount_transferred = _ref4.amount_transferred,\n          payment_agent_email = _ref4.payment_agent_email,\n          payment_agent_id = _ref4.payment_agent_id,\n          payment_agent_name = _ref4.payment_agent_name,\n          payment_agent_phone = _ref4.payment_agent_phone,\n          payment_agent_url = _ref4.payment_agent_url;\n      this.receipt = {\n        amount_transferred: amount_transferred,\n        payment_agent_email: payment_agent_email,\n        payment_agent_id: payment_agent_id,\n        payment_agent_name: payment_agent_name,\n        payment_agent_phone: payment_agent_phone,\n        payment_agent_url: payment_agent_url\n      };\n    }\n  }, {\n    key: \"addPaymentAgent\",\n    value: function addPaymentAgent(payment_agent) {\n      this.agents.push({\n        text: payment_agent.name,\n        value: payment_agent.paymentagent_loginid,\n        max_withdrawal: payment_agent.max_withdrawal,\n        min_withdrawal: payment_agent.min_withdrawal,\n        email: payment_agent.email,\n        phone: payment_agent.telephone,\n        url: payment_agent.url\n      });\n    }\n  }, {\n    key: \"onMountPaymentAgentWithdraw\",\n    value: function () {\n      var _onMountPaymentAgentWithdraw = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var _this3 = this;\n\n        var _this$root_store, common, modules, _modules$cashier$gene, setLoading, onMountCommon, payment_agent_list;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$root_store = this.root_store, common = _this$root_store.common, modules = _this$root_store.modules;\n                _modules$cashier$gene = modules.cashier.general_store, setLoading = _modules$cashier$gene.setLoading, onMountCommon = _modules$cashier$gene.onMountCommon;\n                setLoading(true);\n                this.onRemount = this.onMountPaymentAgentWithdraw;\n                onMountCommon();\n                this.setIsWithdraw(true);\n                this.setIsWithdrawSuccessful(false);\n                this.setReceipt({});\n\n                if (this.agents.length) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                _context4.next = 11;\n                return this.getPaymentAgentList();\n\n              case 11:\n                payment_agent_list = _context4.sent;\n                payment_agent_list.paymentagent_list.list.forEach(function (payment_agent) {\n                  _this3.addPaymentAgent(payment_agent);\n                });\n\n                if (!payment_agent_list.paymentagent_list.list.length && window.location.pathname.endsWith(shared_.routes.cashier_pa)) {\n                  common.routeTo(shared_.routes.cashier_deposit);\n                }\n\n              case 14:\n                setLoading(false);\n\n              case 15:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function onMountPaymentAgentWithdraw() {\n        return _onMountPaymentAgentWithdraw.apply(this, arguments);\n      }\n\n      return onMountPaymentAgentWithdraw;\n    }()\n  }, {\n    key: \"requestTryPaymentAgentWithdraw\",\n    value: function () {\n      var _requestTryPaymentAgentWithdraw = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(_ref5) {\n        var loginid, currency, amount, verification_code, payment_agent_withdraw, selected_agent;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                loginid = _ref5.loginid, currency = _ref5.currency, amount = _ref5.amount, verification_code = _ref5.verification_code;\n                this.error.setErrorMessage('');\n                _context5.next = 4;\n                return this.WS.authorized.paymentAgentWithdraw({\n                  loginid: loginid,\n                  currency: currency,\n                  amount: amount,\n                  verification_code: verification_code,\n                  dry_run: 1\n                });\n\n              case 4:\n                payment_agent_withdraw = _context5.sent;\n\n                if (+payment_agent_withdraw.paymentagent_withdraw === 2) {\n                  selected_agent = this.agents.find(function (agent) {\n                    return agent.value === loginid;\n                  });\n                  this.setConfirmation(payment_agent_store_objectSpread({\n                    amount: amount,\n                    currency: currency,\n                    loginid: loginid\n                  }, selected_agent && {\n                    payment_agent_name: selected_agent.text\n                  }));\n                  this.setIsTryWithdrawSuccessful(true);\n                } else {\n                  this.error.setErrorMessage(payment_agent_withdraw.error, this.resetPaymentAgent);\n                }\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function requestTryPaymentAgentWithdraw(_x2) {\n        return _requestTryPaymentAgentWithdraw.apply(this, arguments);\n      }\n\n      return requestTryPaymentAgentWithdraw;\n    }()\n  }, {\n    key: \"onMountPaymentAgentList\",\n    value: function () {\n      var _onMountPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {\n        var _this$root_store$modu, setLoading, onMountCommon;\n\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this$root_store$modu = this.root_store.modules.cashier.general_store, setLoading = _this$root_store$modu.setLoading, onMountCommon = _this$root_store$modu.onMountCommon;\n                setLoading(true);\n                this.onRemount = this.onMountPaymentAgentList;\n                _context6.next = 5;\n                return onMountCommon();\n\n              case 5:\n                _context6.next = 7;\n                return this.getPaymentAgentList();\n\n              case 7:\n                setLoading(false);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function onMountPaymentAgentList() {\n        return _onMountPaymentAgentList.apply(this, arguments);\n      }\n\n      return onMountPaymentAgentList;\n    }()\n  }, {\n    key: \"getAllPaymentAgentList\",\n    value: function () {\n      var _getAllPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.WS.wait('get_settings');\n\n              case 2:\n                return _context7.abrupt(\"return\", this.WS.allPaymentAgentList(this.root_store.client.residence));\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function getAllPaymentAgentList() {\n        return _getAllPaymentAgentList.apply(this, arguments);\n      }\n\n      return getAllPaymentAgentList;\n    }()\n  }, {\n    key: \"setAllPaymentAgentList\",\n    value: function setAllPaymentAgentList(list) {\n      this.all_payment_agent_list = list;\n    }\n  }, {\n    key: \"is_payment_agent_visible_in_onboarding\",\n    get: function get() {\n      var _this$all_payment_age, _this$all_payment_age2, _this$all_payment_age3;\n\n      return !!((_this$all_payment_age = this.all_payment_agent_list) !== null && _this$all_payment_age !== void 0 && (_this$all_payment_age2 = _this$all_payment_age.paymentagent_list) !== null && _this$all_payment_age2 !== void 0 && (_this$all_payment_age3 = _this$all_payment_age2.list) !== null && _this$all_payment_age3 !== void 0 && _this$all_payment_age3.length);\n    }\n  }, {\n    key: \"requestPaymentAgentWithdraw\",\n    value: function () {\n      var _requestPaymentAgentWithdraw = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(_ref6) {\n        var loginid, currency, amount, verification_code, payment_agent_withdraw, selected_agent;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                loginid = _ref6.loginid, currency = _ref6.currency, amount = _ref6.amount, verification_code = _ref6.verification_code;\n                this.error.setErrorMessage('');\n                _context8.next = 4;\n                return this.WS.authorized.paymentAgentWithdraw({\n                  loginid: loginid,\n                  currency: currency,\n                  amount: amount,\n                  verification_code: verification_code\n                });\n\n              case 4:\n                payment_agent_withdraw = _context8.sent;\n\n                if (+payment_agent_withdraw.paymentagent_withdraw === 1) {\n                  selected_agent = this.agents.find(function (agent) {\n                    return agent.value === loginid;\n                  });\n                  this.setReceipt(payment_agent_store_objectSpread(payment_agent_store_objectSpread({\n                    amount_transferred: (0,shared_.formatMoney)(currency, amount, true)\n                  }, selected_agent && {\n                    payment_agent_email: selected_agent.email,\n                    payment_agent_id: selected_agent.value,\n                    payment_agent_name: selected_agent.text,\n                    payment_agent_phone: selected_agent.phone,\n                    payment_agent_url: selected_agent.url\n                  }), !selected_agent && {\n                    payment_agent_id: loginid\n                  }));\n                  this.setIsWithdrawSuccessful(true);\n                  this.setIsTryWithdrawSuccessful(false);\n                  this.setConfirmation({});\n                } else {\n                  this.error.setErrorMessage(payment_agent_withdraw.error, this.resetPaymentAgent);\n                }\n\n              case 6:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function requestPaymentAgentWithdraw(_x3) {\n        return _requestPaymentAgentWithdraw.apply(this, arguments);\n      }\n\n      return requestPaymentAgentWithdraw;\n    }()\n  }]);\n\n  return PaymentAgentStore;\n}(), (payment_agent_store_descriptor = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"list\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), payment_agent_store_descriptor2 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"agents\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), payment_agent_store_descriptor3 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"container\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return constants.containers.payment_agent;\n  }\n}), payment_agent_store_descriptor4 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ErrorStore();\n  }\n}), payment_agent_store_descriptor5 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"filtered_list\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), payment_agent_store_descriptor6 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"is_name_selected\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), payment_agent_store_descriptor7 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"is_withdraw\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), payment_agent_store_descriptor8 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"is_try_withdraw_successful\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), payment_agent_store_descriptor9 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"is_withdraw_successful\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), payment_agent_store_descriptor10 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"confirm\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), payment_agent_store_descriptor11 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"receipt\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), payment_agent_store_descriptor12 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"selected_bank\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), payment_agent_store_descriptor13 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"supported_banks\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), payment_agent_store_descriptor14 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"verification\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new VerificationStore({\n      root_store: this.root_store,\n      WS: this.WS\n    });\n  }\n}), payment_agent_store_descriptor15 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"active_tab_index\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), payment_agent_store_descriptor16 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"all_payment_agent_list\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setActiveTabIndex\", [payment_agent_store_dec], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setActiveTabIndex\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setActiveTab\", [payment_agent_store_dec2], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setActiveTab\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"is_payment_agent_visible\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"is_payment_agent_visible\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"getPaymentAgentList\", [payment_agent_store_dec3], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"getPaymentAgentList\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"getPaymentAgentDetails\", [payment_agent_store_dec4], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"getPaymentAgentDetails\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"addSupportedBank\", [payment_agent_store_dec5], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"addSupportedBank\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"clearSuppertedBanks\", [payment_agent_store_dec6], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"clearSuppertedBanks\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"sortSupportedBanks\", [payment_agent_store_dec7], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"sortSupportedBanks\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setList\", [payment_agent_store_dec8], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setList\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"clearList\", [payment_agent_store_dec9], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"clearList\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setPaymentAgentList\", [payment_agent_store_dec10], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setPaymentAgentList\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"filterPaymentAgentList\", [payment_agent_store_dec11], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"filterPaymentAgentList\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"onChangePaymentMethod\", [payment_agent_store_dec12], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"onChangePaymentMethod\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setIsWithdraw\", [payment_agent_store_dec13], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setIsWithdraw\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setIsTryWithdrawSuccessful\", [payment_agent_store_dec14], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setIsTryWithdrawSuccessful\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setIsWithdrawSuccessful\", [payment_agent_store_dec15], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setIsWithdrawSuccessful\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setConfirmation\", [payment_agent_store_dec16], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setConfirmation\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setReceipt\", [payment_agent_store_dec17], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setReceipt\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"addPaymentAgent\", [payment_agent_store_dec18], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"addPaymentAgent\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"onMountPaymentAgentWithdraw\", [payment_agent_store_dec19], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"onMountPaymentAgentWithdraw\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"requestTryPaymentAgentWithdraw\", [payment_agent_store_dec20], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"requestTryPaymentAgentWithdraw\"), payment_agent_store_class.prototype), _descriptor17 = payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"resetPaymentAgent\", [payment_agent_store_dec21], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this4 = this;\n\n    return function () {\n      _this4.error.setErrorMessage('');\n\n      _this4.setIsWithdraw(false);\n\n      _this4.verification.clearVerification();\n\n      _this4.setActiveTabIndex(0);\n    };\n  }\n}), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"onMountPaymentAgentList\", [payment_agent_store_dec22], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"onMountPaymentAgentList\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"setAllPaymentAgentList\", [payment_agent_store_dec23], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"setAllPaymentAgentList\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"is_payment_agent_visible_in_onboarding\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"is_payment_agent_visible_in_onboarding\"), payment_agent_store_class.prototype), payment_agent_store_applyDecoratedDescriptor(payment_agent_store_class.prototype, \"requestPaymentAgentWithdraw\", [payment_agent_store_dec24], Object.getOwnPropertyDescriptor(payment_agent_store_class.prototype, \"requestPaymentAgentWithdraw\"), payment_agent_store_class.prototype)), payment_agent_store_class));\n\n;// CONCATENATED MODULE: ./Stores/payment-agent-transfer-store.js\nvar payment_agent_transfer_store_dec, payment_agent_transfer_store_dec2, payment_agent_transfer_store_dec3, payment_agent_transfer_store_dec4, payment_agent_transfer_store_dec5, payment_agent_transfer_store_dec6, payment_agent_transfer_store_dec7, payment_agent_transfer_store_dec8, payment_agent_transfer_store_dec9, payment_agent_transfer_store_dec10, payment_agent_transfer_store_class, payment_agent_transfer_store_descriptor, payment_agent_transfer_store_descriptor2, payment_agent_transfer_store_descriptor3, payment_agent_transfer_store_descriptor4, payment_agent_transfer_store_descriptor5, payment_agent_transfer_store_descriptor6, payment_agent_transfer_store_descriptor7, payment_agent_transfer_store_descriptor8, payment_agent_transfer_store_descriptor9, payment_agent_transfer_store_descriptor10, payment_agent_transfer_store_descriptor11;\n\nfunction payment_agent_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction payment_agent_transfer_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { payment_agent_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { payment_agent_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction payment_agent_transfer_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction payment_agent_transfer_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction payment_agent_transfer_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction payment_agent_transfer_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) payment_agent_transfer_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) payment_agent_transfer_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction payment_agent_transfer_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction payment_agent_transfer_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\n\nvar PaymentAgentTransferStore = (payment_agent_transfer_store_dec = external_mobx_.action.bound, payment_agent_transfer_store_dec2 = external_mobx_.action.bound, payment_agent_transfer_store_dec3 = external_mobx_.action.bound, payment_agent_transfer_store_dec4 = external_mobx_.action.bound, payment_agent_transfer_store_dec5 = external_mobx_.action.bound, payment_agent_transfer_store_dec6 = external_mobx_.action.bound, payment_agent_transfer_store_dec7 = external_mobx_.action.bound, payment_agent_transfer_store_dec8 = external_mobx_.action.bound, payment_agent_transfer_store_dec9 = external_mobx_.action.bound, payment_agent_transfer_store_dec10 = external_mobx_.action.bound, (payment_agent_transfer_store_class = /*#__PURE__*/function () {\n  function PaymentAgentTransferStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    payment_agent_transfer_store_classCallCheck(this, PaymentAgentTransferStore);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"container\", payment_agent_transfer_store_descriptor, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"error\", payment_agent_transfer_store_descriptor2, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"is_payment_agent\", payment_agent_transfer_store_descriptor3, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"is_try_transfer_successful\", payment_agent_transfer_store_descriptor4, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"is_transfer_successful\", payment_agent_transfer_store_descriptor5, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"confirm\", payment_agent_transfer_store_descriptor6, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"receipt\", payment_agent_transfer_store_descriptor7, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"transfer_limit\", payment_agent_transfer_store_descriptor8, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"requestTryPaymentAgentTransfer\", payment_agent_transfer_store_descriptor9, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"requestPaymentAgentTransfer\", payment_agent_transfer_store_descriptor10, this);\n\n    payment_agent_transfer_store_initializerDefineProperty(this, \"resetPaymentAgentTransfer\", payment_agent_transfer_store_descriptor11, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  payment_agent_transfer_store_createClass(PaymentAgentTransferStore, [{\n    key: \"is_payment_agent_transfer_visible\",\n    get: function get() {\n      return this.is_payment_agent;\n    }\n  }, {\n    key: \"checkIsPaymentAgent\",\n    value: function () {\n      var _checkIsPaymentAgent = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _get_settings$is_auth;\n\n        var get_settings;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.WS.authorized.storage.getSettings();\n\n              case 2:\n                get_settings = _context.sent.get_settings;\n                this.setIsPaymentAgent((_get_settings$is_auth = get_settings === null || get_settings === void 0 ? void 0 : get_settings.is_authenticated_payment_agent) !== null && _get_settings$is_auth !== void 0 ? _get_settings$is_auth : false);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function checkIsPaymentAgent() {\n        return _checkIsPaymentAgent.apply(this, arguments);\n      }\n\n      return checkIsPaymentAgent;\n    }()\n  }, {\n    key: \"setIsPaymentAgent\",\n    value: function setIsPaymentAgent(is_payment_agent) {\n      if (!is_payment_agent && window.location.pathname.endsWith(shared_.routes.cashier_pa_transfer)) {\n        this.root_store.common.routeTo(shared_.routes.cashier_deposit);\n      }\n\n      this.is_payment_agent = !!is_payment_agent;\n    }\n  }, {\n    key: \"setIsTryTransferSuccessful\",\n    value: function setIsTryTransferSuccessful(is_try_transfer_successful) {\n      this.error.setErrorMessage('');\n      this.is_try_transfer_successful = is_try_transfer_successful;\n    }\n  }, {\n    key: \"setIsTransferSuccessful\",\n    value: function setIsTransferSuccessful(is_transfer_successful) {\n      this.is_transfer_successful = is_transfer_successful;\n    }\n  }, {\n    key: \"setConfirmationPaymentAgentTransfer\",\n    value: function setConfirmationPaymentAgentTransfer(_ref2) {\n      var amount = _ref2.amount,\n          client_id = _ref2.client_id,\n          client_name = _ref2.client_name,\n          description = _ref2.description;\n      this.confirm = {\n        amount: amount,\n        client_id: client_id,\n        client_name: client_name,\n        description: description\n      };\n    }\n  }, {\n    key: \"setReceiptPaymentAgentTransfer\",\n    value: function setReceiptPaymentAgentTransfer(_ref3) {\n      var amount_transferred = _ref3.amount_transferred,\n          client_id = _ref3.client_id,\n          client_name = _ref3.client_name;\n      this.receipt = {\n        amount_transferred: amount_transferred,\n        client_id: client_id,\n        client_name: client_name\n      };\n    }\n  }, {\n    key: \"getCurrentPaymentAgent\",\n    value: function () {\n      var _getCurrentPaymentAgent = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(response_payment_agent) {\n        var _this$root_store, client, modules, payment_agent_listed, current_payment_agent;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                payment_agent_listed = response_payment_agent.paymentagent_list.list.find(function (agent) {\n                  return agent.paymentagent_loginid === client.loginid;\n                });\n                _context2.t0 = payment_agent_listed;\n\n                if (_context2.t0) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.next = 6;\n                return modules.cashier.payment_agent.getPaymentAgentDetails();\n\n              case 6:\n                _context2.t0 = _context2.sent;\n\n              case 7:\n                current_payment_agent = _context2.t0;\n                return _context2.abrupt(\"return\", current_payment_agent !== null && current_payment_agent !== void 0 ? current_payment_agent : {});\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getCurrentPaymentAgent(_x) {\n        return _getCurrentPaymentAgent.apply(this, arguments);\n      }\n\n      return getCurrentPaymentAgent;\n    }()\n  }, {\n    key: \"setMinMaxPaymentAgentTransfer\",\n    value: function setMinMaxPaymentAgentTransfer(_ref4) {\n      var min_withdrawal = _ref4.min_withdrawal,\n          max_withdrawal = _ref4.max_withdrawal;\n      this.transfer_limit = {\n        min: min_withdrawal,\n        max: max_withdrawal\n      };\n    }\n  }, {\n    key: \"onMountPaymentAgentTransfer\",\n    value: function () {\n      var _onMountPaymentAgentTransfer = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this$root_store$modu, general_store, payment_agent, response, current_payment_agent;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$root_store$modu = this.root_store.modules.cashier, general_store = _this$root_store$modu.general_store, payment_agent = _this$root_store$modu.payment_agent;\n                general_store.setLoading(true);\n                this.onRemount = this.onMountPaymentAgentTransfer;\n                _context3.next = 5;\n                return general_store.onMountCommon();\n\n              case 5:\n                if (this.transfer_limit.min_withdrawal) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                _context3.next = 8;\n                return payment_agent.getPaymentAgentList();\n\n              case 8:\n                response = _context3.sent;\n                _context3.next = 11;\n                return this.getCurrentPaymentAgent(response);\n\n              case 11:\n                current_payment_agent = _context3.sent;\n                this.setMinMaxPaymentAgentTransfer(current_payment_agent);\n\n              case 13:\n                general_store.setLoading(false);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onMountPaymentAgentTransfer() {\n        return _onMountPaymentAgentTransfer.apply(this, arguments);\n      }\n\n      return onMountPaymentAgentTransfer;\n    }()\n  }]);\n\n  return PaymentAgentTransferStore;\n}(), (payment_agent_transfer_store_descriptor = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"container\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return constants.containers.payment_agent_transfer;\n  }\n}), payment_agent_transfer_store_descriptor2 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ErrorStore();\n  }\n}), payment_agent_transfer_store_descriptor3 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"is_payment_agent\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), payment_agent_transfer_store_descriptor4 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"is_try_transfer_successful\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), payment_agent_transfer_store_descriptor5 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"is_transfer_successful\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), payment_agent_transfer_store_descriptor6 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"confirm\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), payment_agent_transfer_store_descriptor7 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"receipt\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), payment_agent_transfer_store_descriptor8 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"transfer_limit\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"is_payment_agent_transfer_visible\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"is_payment_agent_transfer_visible\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"setIsPaymentAgent\", [payment_agent_transfer_store_dec], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"setIsPaymentAgent\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"setIsTryTransferSuccessful\", [payment_agent_transfer_store_dec2], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"setIsTryTransferSuccessful\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"setIsTransferSuccessful\", [payment_agent_transfer_store_dec3], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"setIsTransferSuccessful\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"setConfirmationPaymentAgentTransfer\", [payment_agent_transfer_store_dec4], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"setConfirmationPaymentAgentTransfer\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"setReceiptPaymentAgentTransfer\", [payment_agent_transfer_store_dec5], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"setReceiptPaymentAgentTransfer\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"setMinMaxPaymentAgentTransfer\", [payment_agent_transfer_store_dec6], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"setMinMaxPaymentAgentTransfer\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"onMountPaymentAgentTransfer\", [payment_agent_transfer_store_dec7], Object.getOwnPropertyDescriptor(payment_agent_transfer_store_class.prototype, \"onMountPaymentAgentTransfer\"), payment_agent_transfer_store_class.prototype), payment_agent_transfer_store_descriptor9 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"requestTryPaymentAgentTransfer\", [payment_agent_transfer_store_dec8], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this = this;\n\n    return /*#__PURE__*/function () {\n      var _ref6 = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(_ref5) {\n        var amount, currency, description, transfer_to, payment_agent_transfer;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                amount = _ref5.amount, currency = _ref5.currency, description = _ref5.description, transfer_to = _ref5.transfer_to;\n\n                _this.error.setErrorMessage('');\n\n                _context4.next = 4;\n                return _this.WS.authorized.paymentAgentTransfer({\n                  amount: amount,\n                  currency: currency,\n                  description: description,\n                  transfer_to: transfer_to,\n                  dry_run: 1\n                });\n\n              case 4:\n                payment_agent_transfer = _context4.sent;\n\n                if (+payment_agent_transfer.paymentagent_transfer === 2) {\n                  // show confirmation screen\n                  _this.setConfirmationPaymentAgentTransfer({\n                    client_id: transfer_to,\n                    client_name: payment_agent_transfer.client_to_full_name,\n                    amount: amount,\n                    description: description\n                  });\n\n                  _this.setIsTryTransferSuccessful(true);\n                } else {\n                  _this.error.setErrorMessage(payment_agent_transfer.error, _this.resetPaymentAgentTransfer);\n                }\n\n                return _context4.abrupt(\"return\", payment_agent_transfer);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x2) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n  }\n}), payment_agent_transfer_store_descriptor10 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"requestPaymentAgentTransfer\", [payment_agent_transfer_store_dec9], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this2 = this;\n\n    return /*#__PURE__*/function () {\n      var _ref8 = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(_ref7) {\n        var amount, currency, description, transfer_to, payment_agent_transfer;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                amount = _ref7.amount, currency = _ref7.currency, description = _ref7.description, transfer_to = _ref7.transfer_to;\n\n                _this2.error.setErrorMessage('');\n\n                _context5.next = 4;\n                return _this2.WS.authorized.paymentAgentTransfer({\n                  amount: amount,\n                  currency: currency,\n                  description: description,\n                  transfer_to: transfer_to\n                });\n\n              case 4:\n                payment_agent_transfer = _context5.sent;\n\n                if (+payment_agent_transfer.paymentagent_transfer === 1) {\n                  _this2.setReceiptPaymentAgentTransfer({\n                    amount_transferred: amount,\n                    client_id: transfer_to,\n                    client_name: payment_agent_transfer.client_to_full_name\n                  });\n\n                  _this2.setIsTransferSuccessful(true);\n\n                  _this2.setIsTryTransferSuccessful(false);\n\n                  _this2.setConfirmationPaymentAgentTransfer({});\n                } else {\n                  _this2.error.setErrorMessage(payment_agent_transfer.error, _this2.resetPaymentAgentTransfer);\n                }\n\n                return _context5.abrupt(\"return\", payment_agent_transfer);\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x3) {\n        return _ref8.apply(this, arguments);\n      };\n    }();\n  }\n}), payment_agent_transfer_store_descriptor11 = payment_agent_transfer_store_applyDecoratedDescriptor(payment_agent_transfer_store_class.prototype, \"resetPaymentAgentTransfer\", [payment_agent_transfer_store_dec10], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this3 = this;\n\n    return function () {\n      _this3.setIsTransferSuccessful(false);\n\n      _this3.error.setErrorMessage('');\n    };\n  }\n})), payment_agent_transfer_store_class));\n\n;// CONCATENATED MODULE: ./Stores/transaction-history-store.js\nvar transaction_history_store_dec, transaction_history_store_dec2, transaction_history_store_dec3, transaction_history_store_dec4, transaction_history_store_dec5, transaction_history_store_dec6, transaction_history_store_dec7, transaction_history_store_dec8, transaction_history_store_dec9, transaction_history_store_dec10, transaction_history_store_dec11, transaction_history_store_dec12, transaction_history_store_dec13, transaction_history_store_dec14, transaction_history_store_dec15, transaction_history_store_dec16, transaction_history_store_dec17, transaction_history_store_dec18, transaction_history_store_class, transaction_history_store_descriptor, transaction_history_store_descriptor2, transaction_history_store_descriptor3, transaction_history_store_descriptor4, transaction_history_store_descriptor5, transaction_history_store_descriptor6, transaction_history_store_descriptor7, transaction_history_store_descriptor8;\n\nfunction transaction_history_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction transaction_history_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { transaction_history_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { transaction_history_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction transaction_history_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction transaction_history_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction transaction_history_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction transaction_history_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) transaction_history_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) transaction_history_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction transaction_history_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction transaction_history_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\nvar TransactionHistoryStore = (transaction_history_store_dec = external_mobx_.action.bound, transaction_history_store_dec2 = external_mobx_.action.bound, transaction_history_store_dec3 = external_mobx_.action.bound, transaction_history_store_dec4 = external_mobx_.action.bound, transaction_history_store_dec5 = external_mobx_.action.bound, transaction_history_store_dec6 = external_mobx_.action.bound, transaction_history_store_dec7 = external_mobx_.action.bound, transaction_history_store_dec8 = external_mobx_.action.bound, transaction_history_store_dec9 = external_mobx_.action.bound, transaction_history_store_dec10 = external_mobx_.action.bound, transaction_history_store_dec11 = external_mobx_.action.bound, transaction_history_store_dec12 = external_mobx_.action.bound, transaction_history_store_dec13 = external_mobx_.action.bound, transaction_history_store_dec14 = external_mobx_.action.bound, transaction_history_store_dec15 = external_mobx_.action.bound, transaction_history_store_dec16 = external_mobx_.action.bound, transaction_history_store_dec17 = external_mobx_.action.bound, transaction_history_store_dec18 = external_mobx_.action.bound, (transaction_history_store_class = /*#__PURE__*/function () {\n  function TransactionHistoryStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    transaction_history_store_classCallCheck(this, TransactionHistoryStore);\n\n    transaction_history_store_initializerDefineProperty(this, \"crypto_transactions\", transaction_history_store_descriptor, this);\n\n    transaction_history_store_initializerDefineProperty(this, \"is_crypto_transactions_cancel_modal_visible\", transaction_history_store_descriptor2, this);\n\n    transaction_history_store_initializerDefineProperty(this, \"is_crypto_transactions_status_modal_visible\", transaction_history_store_descriptor3, this);\n\n    transaction_history_store_initializerDefineProperty(this, \"is_crypto_transactions_visible\", transaction_history_store_descriptor4, this);\n\n    transaction_history_store_initializerDefineProperty(this, \"is_loading\", transaction_history_store_descriptor5, this);\n\n    transaction_history_store_initializerDefineProperty(this, \"selected_crypto_transaction_id\", transaction_history_store_descriptor6, this);\n\n    transaction_history_store_initializerDefineProperty(this, \"selected_crypto_status\", transaction_history_store_descriptor7, this);\n\n    transaction_history_store_initializerDefineProperty(this, \"selected_crypto_status_description\", transaction_history_store_descriptor8, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  transaction_history_store_createClass(TransactionHistoryStore, [{\n    key: \"onMount\",\n    value: function () {\n      var _onMount = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$root_store$clie, currency, switched, is_crypto;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store$clie = this.root_store.client, currency = _this$root_store$clie.currency, switched = _this$root_store$clie.switched;\n                is_crypto = !!currency && (0,shared_.isCryptocurrency)(currency);\n\n                if (!(is_crypto && !switched)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                this.setLoading(true);\n                _context.next = 6;\n                return this.unsubscribeCryptoTransactions();\n\n              case 6:\n                _context.next = 8;\n                return this.getCryptoTransactions();\n\n              case 8:\n                this.setLoading(false);\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onMount() {\n        return _onMount.apply(this, arguments);\n      }\n\n      return onMount;\n    }()\n  }, {\n    key: \"unsubscribeCryptoTransactions\",\n    value: function () {\n      var _unsubscribeCryptoTransactions = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.WS.authorized.cashierPayments({\n                  provider: 'crypto',\n                  transaction_type: 'all'\n                }).then(function (response) {\n                  if (!response.error) {\n                    var crypto = response.cashier_payments.crypto;\n\n                    _this.setCryptoTransactionsHistory(crypto);\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function unsubscribeCryptoTransactions() {\n        return _unsubscribeCryptoTransactions.apply(this, arguments);\n      }\n\n      return unsubscribeCryptoTransactions;\n    }()\n  }, {\n    key: \"getCryptoTransactions\",\n    value: function () {\n      var _getCryptoTransactions = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.WS.subscribeCashierPayments(function (response) {\n                  if (!response.error) {\n                    var crypto = response.cashier_payments.crypto;\n\n                    _this2.updateCryptoTransactions(crypto);\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getCryptoTransactions() {\n        return _getCryptoTransactions.apply(this, arguments);\n      }\n\n      return getCryptoTransactions;\n    }()\n  }, {\n    key: \"setCryptoTransactionsHistory\",\n    value: function setCryptoTransactionsHistory(transactions) {\n      this.crypto_transactions = transactions;\n      this.sortCryptoTransactions();\n    }\n  }, {\n    key: \"updateCryptoTransactions\",\n    value: function updateCryptoTransactions(transactions) {\n      var _this3 = this;\n\n      transactions.forEach(function (transaction) {\n        var index = _this3.crypto_transactions.findIndex(function (crypto) {\n          return crypto.id === transaction.id;\n        });\n\n        if (index === -1) {\n          _this3.crypto_transactions.push(transaction);\n        } else {\n          Object.assign(_this3.crypto_transactions[index], transaction);\n        }\n      });\n      this.sortCryptoTransactions();\n    }\n  }, {\n    key: \"sortCryptoTransactions\",\n    value: function sortCryptoTransactions() {\n      this.crypto_transactions = this.crypto_transactions.sort(function (a, b) {\n        return b.submit_date - a.submit_date;\n      });\n    }\n  }, {\n    key: \"cancelCryptoTransaction\",\n    value: function () {\n      var _cancelCryptoTransaction = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(transaction_id) {\n        var _this4 = this;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.WS.cancelCryptoTransaction(transaction_id).then(function (response) {\n                  if (!response.error) {\n                    _this4.setSelectedCryptoTransactionId('');\n\n                    _this4.setIsCryptoTransactionsCancelModalVisible(false);\n\n                    return Promise.resolve(response);\n                  }\n\n                  return Promise.reject(response.error);\n                });\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function cancelCryptoTransaction(_x) {\n        return _cancelCryptoTransaction.apply(this, arguments);\n      }\n\n      return cancelCryptoTransaction;\n    }()\n  }, {\n    key: \"setSelectedCryptoTransactionId\",\n    value: function setSelectedCryptoTransactionId(id) {\n      this.selected_crypto_transaction_id = id;\n    }\n  }, {\n    key: \"setIsCryptoTransactionsCancelModalVisible\",\n    value: function setIsCryptoTransactionsCancelModalVisible(is_visible) {\n      this.is_crypto_transactions_cancel_modal_visible = is_visible;\n    }\n  }, {\n    key: \"showCryptoTransactionsCancelModal\",\n    value: function showCryptoTransactionsCancelModal(id) {\n      this.setSelectedCryptoTransactionId(id);\n      this.setIsCryptoTransactionsCancelModalVisible(true);\n    }\n  }, {\n    key: \"hideCryptoTransactionsCancelModal\",\n    value: function hideCryptoTransactionsCancelModal() {\n      this.setSelectedCryptoTransactionId('');\n      this.setIsCryptoTransactionsCancelModalVisible(false);\n    }\n  }, {\n    key: \"setSelectedCryptoStatus\",\n    value: function setSelectedCryptoStatus(status) {\n      this.selected_crypto_status = status;\n    }\n  }, {\n    key: \"setSelectedCryptoStatusDescription\",\n    value: function setSelectedCryptoStatusDescription(description) {\n      this.selected_crypto_status_description = description;\n    }\n  }, {\n    key: \"setIsCryptoTransactionsStatusModalVisible\",\n    value: function setIsCryptoTransactionsStatusModalVisible(is_visible) {\n      this.is_crypto_transactions_status_modal_visible = is_visible;\n    }\n  }, {\n    key: \"showCryptoTransactionsStatusModal\",\n    value: function showCryptoTransactionsStatusModal(description, name) {\n      this.setSelectedCryptoStatusDescription(description);\n      this.setSelectedCryptoStatus(name);\n      this.setIsCryptoTransactionsStatusModalVisible(true);\n    }\n  }, {\n    key: \"hideCryptoTransactionsStatusModal\",\n    value: function hideCryptoTransactionsStatusModal() {\n      this.setIsCryptoTransactionsStatusModalVisible(false);\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(is_loading) {\n      this.is_loading = is_loading;\n    }\n  }, {\n    key: \"setIsCryptoTransactionsVisible\",\n    value: function setIsCryptoTransactionsVisible(is_visible) {\n      this.is_crypto_transactions_visible = is_visible;\n    }\n  }]);\n\n  return TransactionHistoryStore;\n}(), (transaction_history_store_descriptor = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"crypto_transactions\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), transaction_history_store_descriptor2 = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"is_crypto_transactions_cancel_modal_visible\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), transaction_history_store_descriptor3 = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"is_crypto_transactions_status_modal_visible\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), transaction_history_store_descriptor4 = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"is_crypto_transactions_visible\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), transaction_history_store_descriptor5 = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"is_loading\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), transaction_history_store_descriptor6 = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"selected_crypto_transaction_id\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), transaction_history_store_descriptor7 = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"selected_crypto_status\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), transaction_history_store_descriptor8 = transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"selected_crypto_status_description\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"onMount\", [transaction_history_store_dec], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"onMount\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"unsubscribeCryptoTransactions\", [transaction_history_store_dec2], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"unsubscribeCryptoTransactions\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"getCryptoTransactions\", [transaction_history_store_dec3], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"getCryptoTransactions\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setCryptoTransactionsHistory\", [transaction_history_store_dec4], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setCryptoTransactionsHistory\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"updateCryptoTransactions\", [transaction_history_store_dec5], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"updateCryptoTransactions\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"sortCryptoTransactions\", [transaction_history_store_dec6], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"sortCryptoTransactions\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"cancelCryptoTransaction\", [transaction_history_store_dec7], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"cancelCryptoTransaction\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setSelectedCryptoTransactionId\", [transaction_history_store_dec8], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setSelectedCryptoTransactionId\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setIsCryptoTransactionsCancelModalVisible\", [transaction_history_store_dec9], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setIsCryptoTransactionsCancelModalVisible\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"showCryptoTransactionsCancelModal\", [transaction_history_store_dec10], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"showCryptoTransactionsCancelModal\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"hideCryptoTransactionsCancelModal\", [transaction_history_store_dec11], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"hideCryptoTransactionsCancelModal\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setSelectedCryptoStatus\", [transaction_history_store_dec12], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setSelectedCryptoStatus\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setSelectedCryptoStatusDescription\", [transaction_history_store_dec13], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setSelectedCryptoStatusDescription\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setIsCryptoTransactionsStatusModalVisible\", [transaction_history_store_dec14], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setIsCryptoTransactionsStatusModalVisible\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"showCryptoTransactionsStatusModal\", [transaction_history_store_dec15], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"showCryptoTransactionsStatusModal\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"hideCryptoTransactionsStatusModal\", [transaction_history_store_dec16], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"hideCryptoTransactionsStatusModal\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setLoading\", [transaction_history_store_dec17], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setLoading\"), transaction_history_store_class.prototype), transaction_history_store_applyDecoratedDescriptor(transaction_history_store_class.prototype, \"setIsCryptoTransactionsVisible\", [transaction_history_store_dec18], Object.getOwnPropertyDescriptor(transaction_history_store_class.prototype, \"setIsCryptoTransactionsVisible\"), transaction_history_store_class.prototype)), transaction_history_store_class));\n\n;// CONCATENATED MODULE: ./Stores/withdraw-store.js\nvar withdraw_store_dec, withdraw_store_dec2, withdraw_store_dec3, withdraw_store_dec4, withdraw_store_dec5, withdraw_store_dec6, withdraw_store_dec7, withdraw_store_dec8, withdraw_store_dec9, withdraw_store_dec10, withdraw_store_dec11, withdraw_store_dec12, withdraw_store_dec13, withdraw_store_dec14, withdraw_store_dec15, withdraw_store_class, withdraw_store_descriptor, withdraw_store_descriptor2, withdraw_store_descriptor3, withdraw_store_descriptor4, withdraw_store_descriptor5, withdraw_store_descriptor6, withdraw_store_descriptor7, withdraw_store_descriptor8;\n\nfunction withdraw_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction withdraw_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { withdraw_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { withdraw_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction withdraw_store_initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction withdraw_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction withdraw_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction withdraw_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) withdraw_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) withdraw_store_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction withdraw_store_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction withdraw_store_initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\n\n\n\n\n\n\n\n\nvar WithdrawStore = (withdraw_store_dec = external_mobx_.action.bound, withdraw_store_dec2 = external_mobx_.action.bound, withdraw_store_dec3 = external_mobx_.action.bound, withdraw_store_dec4 = external_mobx_.action.bound, withdraw_store_dec5 = external_mobx_.action.bound, withdraw_store_dec6 = external_mobx_.action.bound, withdraw_store_dec7 = external_mobx_.action.bound, withdraw_store_dec8 = external_mobx_.action.bound, withdraw_store_dec9 = external_mobx_.action.bound, withdraw_store_dec10 = external_mobx_.action.bound, withdraw_store_dec11 = external_mobx_.action.bound, withdraw_store_dec12 = external_mobx_.action.bound, withdraw_store_dec13 = external_mobx_.action.bound, withdraw_store_dec14 = external_mobx_.action.bound, withdraw_store_dec15 = external_mobx_.action.bound, (withdraw_store_class = /*#__PURE__*/function () {\n  function WithdrawStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    withdraw_store_classCallCheck(this, WithdrawStore);\n\n    withdraw_store_initializerDefineProperty(this, \"blockchain_address\", withdraw_store_descriptor, this);\n\n    withdraw_store_initializerDefineProperty(this, \"container\", withdraw_store_descriptor2, this);\n\n    withdraw_store_initializerDefineProperty(this, \"error\", withdraw_store_descriptor3, this);\n\n    withdraw_store_initializerDefineProperty(this, \"is_10k_withdrawal_limit_reached\", withdraw_store_descriptor4, this);\n\n    withdraw_store_initializerDefineProperty(this, \"is_withdraw_confirmed\", withdraw_store_descriptor5, this);\n\n    withdraw_store_initializerDefineProperty(this, \"verification\", withdraw_store_descriptor6, this);\n\n    withdraw_store_initializerDefineProperty(this, \"withdraw_amount\", withdraw_store_descriptor7, this);\n\n    withdraw_store_initializerDefineProperty(this, \"max_withdraw_amount\", withdraw_store_descriptor8, this);\n\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  withdraw_store_createClass(WithdrawStore, [{\n    key: \"setIsWithdrawConfirmed\",\n    value: function setIsWithdrawConfirmed(is_withdraw_confirmed) {\n      var converter_from_amount = this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;\n      this.is_withdraw_confirmed = is_withdraw_confirmed;\n      if (is_withdraw_confirmed) this.setWithdrawAmount(converter_from_amount);\n\n      if (!is_withdraw_confirmed && this.verification) {\n        this.verification.clearVerification();\n      }\n    }\n  }, {\n    key: \"setWithdrawAmount\",\n    value: function setWithdrawAmount(amount) {\n      this.withdraw_amount = amount;\n    }\n  }, {\n    key: \"requestWithdraw\",\n    value: function () {\n      var _requestWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(verification_code) {\n        var _this = this;\n\n        var _this$root_store, client, modules, _modules$cashier, crypto_fiat_converter, error_dialog;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                _modules$cashier = modules.cashier, crypto_fiat_converter = _modules$cashier.crypto_fiat_converter, error_dialog = _modules$cashier.error_dialog;\n\n                if (client.is_logged_in) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                if (crypto_fiat_converter.converter_from_amount) {\n                  _context.next = 7;\n                  break;\n                }\n\n                crypto_fiat_converter.setConverterFromError((0,translations_.localize)('This field is required.'));\n                return _context.abrupt(\"return\");\n\n              case 7:\n                _context.next = 9;\n                return this.WS.cryptoWithdraw({\n                  address: this.blockchain_address,\n                  amount: +crypto_fiat_converter.converter_from_amount,\n                  verification_code: verification_code,\n                  dry_run: 1\n                }).then(function (response) {\n                  if (response.error) {\n                    error_dialog.setErrorMessage(response.error.message);\n                  } else {\n                    _this.saveWithdraw(verification_code);\n                  }\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function requestWithdraw(_x) {\n        return _requestWithdraw.apply(this, arguments);\n      }\n\n      return requestWithdraw;\n    }()\n  }, {\n    key: \"saveWithdraw\",\n    value: function () {\n      var _saveWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(verification_code) {\n        var _this2 = this;\n\n        var converter_from_amount;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                converter_from_amount = this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;\n                this.error.setErrorMessage('');\n                _context2.next = 4;\n                return this.WS.cryptoWithdraw({\n                  address: this.blockchain_address,\n                  amount: +converter_from_amount,\n                  verification_code: verification_code\n                }).then(function (response) {\n                  if (response.error) {\n                    _this2.error.setErrorMessage(response.error);\n\n                    if (verification_code) {\n                      // clear verification code on error\n                      _this2.verification.clearVerification();\n                    }\n\n                    _this2.resetWithrawForm();\n                  } else {\n                    _this2.setIsWithdrawConfirmed(true);\n                  }\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function saveWithdraw(_x2) {\n        return _saveWithdraw.apply(this, arguments);\n      }\n\n      return saveWithdraw;\n    }()\n  }, {\n    key: \"resetWithrawForm\",\n    value: function resetWithrawForm() {\n      var _this$root_store$modu = this.root_store.modules.cashier.crypto_fiat_converter,\n          setConverterFromAmount = _this$root_store$modu.setConverterFromAmount,\n          setConverterToAmount = _this$root_store$modu.setConverterToAmount;\n      this.setBlockchainAddress('');\n      setConverterFromAmount('');\n      setConverterToAmount('');\n      this.verification.clearVerification();\n    }\n  }, {\n    key: \"setBlockchainAddress\",\n    value: function setBlockchainAddress(address) {\n      this.blockchain_address = address;\n    }\n  }, {\n    key: \"willMountWithdraw\",\n    value: function willMountWithdraw(verification_code) {\n      if (verification_code) {\n        this.verification.clearVerification();\n      }\n    }\n  }, {\n    key: \"onMountWithdraw\",\n    value: function () {\n      var _onMountWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(verification_code) {\n        var _this$root_store2, client, modules, _modules$cashier$gene, active_container, is_crypto, onMountCommon, setLoading, setOnRemount, _modules$cashier$ifra, checkIframeLoaded, clearTimeoutCashierUrl, clearIframe, is_session_timeout, setContainerHeight, setIframeUrl, setSessionTimeout, setTimeoutCashierUrl, is_virtual, current_container, response_cashier;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$root_store2 = this.root_store, client = _this$root_store2.client, modules = _this$root_store2.modules;\n                _modules$cashier$gene = modules.cashier.general_store, active_container = _modules$cashier$gene.active_container, is_crypto = _modules$cashier$gene.is_crypto, onMountCommon = _modules$cashier$gene.onMountCommon, setLoading = _modules$cashier$gene.setLoading, setOnRemount = _modules$cashier$gene.setOnRemount;\n                _modules$cashier$ifra = modules.cashier.iframe, checkIframeLoaded = _modules$cashier$ifra.checkIframeLoaded, clearTimeoutCashierUrl = _modules$cashier$ifra.clearTimeoutCashierUrl, clearIframe = _modules$cashier$ifra.clearIframe, is_session_timeout = _modules$cashier$ifra.is_session_timeout, setContainerHeight = _modules$cashier$ifra.setContainerHeight, setIframeUrl = _modules$cashier$ifra.setIframeUrl, setSessionTimeout = _modules$cashier$ifra.setSessionTimeout, setTimeoutCashierUrl = _modules$cashier$ifra.setTimeoutCashierUrl;\n                is_virtual = client.is_virtual;\n                current_container = active_container;\n                setOnRemount(this.onMountWithdraw);\n                _context3.next = 8;\n                return onMountCommon();\n\n              case 8:\n                this.error.setErrorMessage('');\n                setContainerHeight(0);\n                clearIframe();\n                setLoading(true);\n\n                if (is_session_timeout) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                checkIframeLoaded();\n                return _context3.abrupt(\"return\");\n\n              case 15:\n                // if session has timed out reset everything\n                setIframeUrl('');\n\n                if (!(!verification_code || is_virtual)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                setLoading(false); // if virtual, clear everything and don't proceed further\n                // if no verification code, we should request again\n\n                return _context3.abrupt(\"return\");\n\n              case 19:\n                _context3.next = 21;\n                return this.WS.authorized.cashier(active_container, {\n                  verification_code: verification_code\n                });\n\n              case 21:\n                response_cashier = _context3.sent;\n\n                if (!(current_container !== active_container)) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                setLoading(false);\n                return _context3.abrupt(\"return\");\n\n              case 25:\n                if (!response_cashier.error) {\n                  _context3.next = 33;\n                  break;\n                }\n\n                this.error.handleCashierError(response_cashier.error);\n                setLoading(false);\n                setSessionTimeout(true);\n                clearTimeoutCashierUrl();\n\n                if (verification_code) {\n                  // clear verification code on error\n                  this.verification.clearVerification();\n                }\n\n                _context3.next = 43;\n                break;\n\n              case 33:\n                if (!is_crypto) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                setLoading(false);\n                _context3.next = 43;\n                break;\n\n              case 37:\n                _context3.next = 39;\n                return checkIframeLoaded();\n\n              case 39:\n                setLoading(false);\n                setIframeUrl(response_cashier.cashier);\n                setSessionTimeout(false);\n                setTimeoutCashierUrl();\n\n              case 43:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onMountWithdraw(_x3) {\n        return _onMountWithdraw.apply(this, arguments);\n      }\n\n      return onMountWithdraw;\n    }()\n  }, {\n    key: \"onMountCryptoWithdraw\",\n    value: function () {\n      var _onMountCryptoWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(verification_code) {\n        var _this$root_store$modu2, crypto_fiat_converter, general_store, iframe, str_reg_exp, response_cashier;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$root_store$modu2 = this.root_store.modules.cashier, crypto_fiat_converter = _this$root_store$modu2.crypto_fiat_converter, general_store = _this$root_store$modu2.general_store, iframe = _this$root_store$modu2.iframe;\n                general_store.setLoading(true);\n                str_reg_exp = /^\\w{8,128}$/;\n\n                if (!str_reg_exp.test(verification_code)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                _context4.next = 6;\n                return this.WS.cryptoWithdraw({\n                  address: this.blockchain_address,\n                  amount: +crypto_fiat_converter.converter_from_amount,\n                  verification_code: verification_code,\n                  dry_run: 1\n                });\n\n              case 6:\n                response_cashier = _context4.sent;\n                _context4.next = 10;\n                break;\n\n              case 9:\n                response_cashier = {\n                  error: {\n                    code: 'InvalidToken',\n                    message: 'Your token has expired or is invalid.'\n                  }\n                };\n\n              case 10:\n                if (response_cashier.error.code === 'InvalidToken') {\n                  this.error.handleCashierError(response_cashier.error);\n                  general_store.setLoading(false);\n                  iframe.setSessionTimeout(true);\n                  iframe.clearTimeoutCashierUrl();\n\n                  if (verification_code) {\n                    // clear verification code on error\n                    this.verification.clearVerification();\n                  }\n                } else {\n                  general_store.setLoading(false);\n                }\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function onMountCryptoWithdraw(_x4) {\n        return _onMountCryptoWithdraw.apply(this, arguments);\n      }\n\n      return onMountCryptoWithdraw;\n    }()\n  }, {\n    key: \"is_withdrawal_locked\",\n    get: function get() {\n      var _client$account_statu;\n\n      var client = this.root_store.client;\n      var authentication = client.account_status.authentication;\n      if (!((_client$account_statu = client.account_status) !== null && _client$account_statu !== void 0 && _client$account_statu.status)) return false;\n      var need_poi = authentication.needs_verification.includes('identity');\n      var need_authentication = this.error.is_ask_authentication && need_poi;\n      return client.is_withdrawal_lock || need_authentication || this.error.is_ask_financial_risk_approval;\n    }\n  }, {\n    key: \"setMaxWithdrawAmount\",\n    value: function setMaxWithdrawAmount(amount) {\n      this.max_withdraw_amount = amount;\n    }\n  }, {\n    key: \"check10kLimit\",\n    value: function () {\n      var _check10kLimit = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        var _yield$client$getLimi, _yield$client$getLimi2;\n\n        var client, remainder, min_withdrawal, is_limit_reached;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                client = this.root_store.client;\n                _context5.next = 3;\n                return client.getLimits();\n\n              case 3:\n                _context5.t1 = _yield$client$getLimi = _context5.sent;\n                _context5.t0 = _context5.t1 === null;\n\n                if (_context5.t0) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                _context5.t0 = _yield$client$getLimi === void 0;\n\n              case 7:\n                if (!_context5.t0) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                _context5.t2 = void 0;\n                _context5.next = 12;\n                break;\n\n              case 11:\n                _context5.t2 = (_yield$client$getLimi2 = _yield$client$getLimi.get_limits) === null || _yield$client$getLimi2 === void 0 ? void 0 : _yield$client$getLimi2.remainder;\n\n              case 12:\n                remainder = _context5.t2;\n                this.setMaxWithdrawAmount(remainder);\n                min_withdrawal = (0,shared_.getMinWithdrawal)(client.currency);\n                is_limit_reached = !!(typeof remainder !== 'undefined' && +remainder < min_withdrawal);\n                this.set10kLimitation(is_limit_reached);\n\n              case 17:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function check10kLimit() {\n        return _check10kLimit.apply(this, arguments);\n      }\n\n      return check10kLimit;\n    }()\n  }, {\n    key: \"set10kLimitation\",\n    value: function set10kLimitation(is_limit_reached) {\n      this.is_10k_withdrawal_limit_reached = is_limit_reached;\n    }\n  }, {\n    key: \"setWithdrawPercentageSelectorResult\",\n    value: function setWithdrawPercentageSelectorResult(amount) {\n      var _this$root_store3 = this.root_store,\n          client = _this$root_store3.client,\n          modules = _this$root_store3.modules;\n      var _modules$cashier2 = modules.cashier,\n          crypto_fiat_converter = _modules$cashier2.crypto_fiat_converter,\n          general_store = _modules$cashier2.general_store;\n      var currency = client.currency,\n          current_fiat_currency = client.current_fiat_currency;\n\n      if (amount > 0) {\n        crypto_fiat_converter.setConverterFromAmount(amount);\n        this.validateWithdrawFromAmount();\n        crypto_fiat_converter.onChangeConverterFromAmount({\n          target: {\n            value: amount\n          }\n        }, currency, current_fiat_currency || 'USD');\n      } else {\n        crypto_fiat_converter.resetConverter();\n      }\n\n      crypto_fiat_converter.setIsTimerVisible(false);\n      general_store.percentageSelectorSelectionStatus(false);\n    }\n  }, {\n    key: \"validateWithdrawFromAmount\",\n    value: function validateWithdrawFromAmount() {\n      var error_message = '';\n      var _this$root_store4 = this.root_store,\n          client = _this$root_store4.client,\n          modules = _this$root_store4.modules;\n      var balance = client.balance,\n          currency = client.currency,\n          website_status = client.website_status;\n      var _modules$cashier3 = modules.cashier,\n          crypto_fiat_converter = _modules$cashier3.crypto_fiat_converter,\n          error_dialog = _modules$cashier3.error_dialog;\n      var converter_from_amount = crypto_fiat_converter.converter_from_amount,\n          setConverterFromError = crypto_fiat_converter.setConverterFromError;\n      var openReadMoreDialog = error_dialog.openReadMoreDialog;\n      var min_withdraw_amount = website_status.crypto_config[currency].minimum_withdrawal;\n      var max_withdraw_amount = +this.max_withdraw_amount > +balance ? +balance : +this.max_withdraw_amount;\n      var format_balance = (0,shared_.formatMoney)(currency, balance, true);\n      var format_min_withdraw_amount = (0,shared_.formatMoney)(currency, min_withdraw_amount, true);\n      var format_max_withdraw_amount = (0,shared_.formatMoney)(currency, max_withdraw_amount, true);\n\n      if (converter_from_amount) {\n        var _validNumber = (0,shared_.validNumber)(converter_from_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(currency)\n        }),\n            is_ok = _validNumber.is_ok,\n            message = _validNumber.message;\n\n        if (!is_ok) error_message = message;else if (+balance < +converter_from_amount) error_message = (0,translations_.localize)('Insufficient funds');else if (+balance < +min_withdraw_amount) {\n          error_message = (0,translations_.localize)('Your balance ({{format_balance}} {{currency}}) is less than the current minimum withdrawal allowed ({{format_min_withdraw_amount}} {{currency}}). Please top up your account to continue with your withdrawal.', {\n            format_balance: format_balance,\n            currency: currency,\n            format_min_withdraw_amount: format_min_withdraw_amount\n          });\n        } else if (+converter_from_amount < +min_withdraw_amount || +converter_from_amount > +max_withdraw_amount) {\n          error_message = (0,translations_.localize)('The current allowed withdraw amount is {{format_min_withdraw_amount}} to {{format_max_withdraw_amount}} {{currency}}', {\n            format_min_withdraw_amount: format_min_withdraw_amount,\n            format_max_withdraw_amount: format_max_withdraw_amount,\n            currency: currency\n          });\n        }\n\n        if ((0,shared_.isMobile)() && error_message.length > 35) {\n          var error_content = error_message;\n          error_message = /*#__PURE__*/external_react_default().createElement(components_.ReadMore, {\n            expand_text: (0,translations_.localize)('more'),\n            text: error_content,\n            collapse_length: 28,\n            openDialog: function openDialog() {\n              return openReadMoreDialog(error_content, (0,translations_.localize)('OK'));\n            },\n            show_dialog: true\n          });\n        }\n      }\n\n      setConverterFromError(error_message);\n    }\n  }, {\n    key: \"validateWithdrawToAmount\",\n    value: function validateWithdrawToAmount() {\n      var error_message = '';\n      var _this$root_store5 = this.root_store,\n          client = _this$root_store5.client,\n          modules = _this$root_store5.modules;\n      var current_fiat_currency = client.current_fiat_currency;\n      var _modules$cashier$cryp = modules.cashier.crypto_fiat_converter,\n          converter_to_amount = _modules$cashier$cryp.converter_to_amount,\n          setConverterToError = _modules$cashier$cryp.setConverterToError;\n\n      if (converter_to_amount) {\n        var _validNumber2 = (0,shared_.validNumber)(converter_to_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(current_fiat_currency)\n        }),\n            is_ok = _validNumber2.is_ok,\n            message = _validNumber2.message;\n\n        if (!is_ok) error_message = message;\n      }\n\n      setConverterToError(error_message);\n    }\n  }, {\n    key: \"account_platform_icon\",\n    get: function get() {\n      var _this$root_store$clie = this.root_store.client,\n          account_list = _this$root_store$clie.account_list,\n          loginid = _this$root_store$clie.loginid;\n      var platform_icon = account_list.find(function (acc) {\n        return loginid === acc.loginid;\n      }).icon;\n      return platform_icon;\n    }\n  }]);\n\n  return WithdrawStore;\n}(), (withdraw_store_descriptor = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"blockchain_address\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), withdraw_store_descriptor2 = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"container\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return constants.containers.withdraw;\n  }\n}), withdraw_store_descriptor3 = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"error\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ErrorStore();\n  }\n}), withdraw_store_descriptor4 = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"is_10k_withdrawal_limit_reached\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return undefined;\n  }\n}), withdraw_store_descriptor5 = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"is_withdraw_confirmed\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), withdraw_store_descriptor6 = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"verification\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new VerificationStore({\n      root_store: this.root_store,\n      WS: this.WS\n    });\n  }\n}), withdraw_store_descriptor7 = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"withdraw_amount\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), withdraw_store_descriptor8 = withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"max_withdraw_amount\", [external_mobx_.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"setIsWithdrawConfirmed\", [withdraw_store_dec], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"setIsWithdrawConfirmed\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"setWithdrawAmount\", [withdraw_store_dec2], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"setWithdrawAmount\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"requestWithdraw\", [withdraw_store_dec3], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"requestWithdraw\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"saveWithdraw\", [withdraw_store_dec4], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"saveWithdraw\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"resetWithrawForm\", [withdraw_store_dec5], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"resetWithrawForm\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"setBlockchainAddress\", [withdraw_store_dec6], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"setBlockchainAddress\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"willMountWithdraw\", [withdraw_store_dec7], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"willMountWithdraw\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"onMountWithdraw\", [withdraw_store_dec8], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"onMountWithdraw\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"onMountCryptoWithdraw\", [withdraw_store_dec9], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"onMountCryptoWithdraw\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"is_withdrawal_locked\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"is_withdrawal_locked\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"setMaxWithdrawAmount\", [withdraw_store_dec10], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"setMaxWithdrawAmount\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"check10kLimit\", [withdraw_store_dec11], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"check10kLimit\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"set10kLimitation\", [withdraw_store_dec12], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"set10kLimitation\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"setWithdrawPercentageSelectorResult\", [withdraw_store_dec13], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"setWithdrawPercentageSelectorResult\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"validateWithdrawFromAmount\", [withdraw_store_dec14], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"validateWithdrawFromAmount\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"validateWithdrawToAmount\", [withdraw_store_dec15], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"validateWithdrawToAmount\"), withdraw_store_class.prototype), withdraw_store_applyDecoratedDescriptor(withdraw_store_class.prototype, \"account_platform_icon\", [external_mobx_.computed], Object.getOwnPropertyDescriptor(withdraw_store_class.prototype, \"account_platform_icon\"), withdraw_store_class.prototype)), withdraw_store_class));\n\n;// CONCATENATED MODULE: ./Stores/cashier-store.js\nfunction cashier_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CashierStore = function CashierStore(_ref) {\n  var root_store = _ref.root_store,\n      WS = _ref.WS;\n\n  cashier_store_classCallCheck(this, CashierStore);\n\n  this.account_prompt_dialog = new AccountPromptDialogStore(root_store);\n  this.account_transfer = new AccountTransferStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.crypto_fiat_converter = new CryptoFiatConverterStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.deposit = new DepositStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.error_dialog = new ErrorDialogStore();\n  this.error = new ErrorStore();\n  this.general_store = new GeneralStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.iframe = new IframeStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.onramp = new OnRampStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.payment_agent = new PaymentAgentStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.payment_agent_transfer = new PaymentAgentTransferStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.transaction_history = new TransactionHistoryStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.verification = new VerificationStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.withdraw = new WithdrawStore({\n    root_store: root_store,\n    WS: WS\n  });\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9TdG9yZXMvY2FzaGllci1zdG9yZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQ0E7QUFDQTs7OztBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTs7QUFSQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQVlBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBTEE7QUFBQTs7QUFBQTtBQVFBO0FBQ0E7QUFDQTs7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQWFBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQTNEQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7Ozs7Ozs7OztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2JBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQURBOztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6QkE7QUEyQkE7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7O0FBeEZBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1pBO0FBQ0E7QUFDQTtBQWFBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUtBOztBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUtBOztBQUVBO0FBQ0E7QUFBQTs7QUFBQTtBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFnYkE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTs7QUFKQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQWVBOztBQUNBOztBQUVBO0FBRUE7QUFFQTtBQXRCQTtBQUFBOztBQUFBO0FBdUJBO0FBT0E7O0FBOUJBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFtQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQXRDQTtBQXdDQTs7QUF4Q0E7QUFBQTs7QUFBQTtBQTBDQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUFBOztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBM0VBO0FBNkVBO0FBN0VBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQWhiQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFrQkE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBOztBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBRUE7QUFHQTtBQUNBOzs7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQVBBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBV0E7QUFDQTtBQUdBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBdkJBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUF5QkE7O0FBekJBO0FBQUE7QUFBQTtBQUFBOztBQTRCQTtBQUNBO0FBN0JBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBc0NBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBckRBO0FBdURBOztBQXZEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQTBEQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFNQTtBQUNBOzs7QUFFQTtBQUVBOztBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBS0E7QUFDQTs7QUFFQTtBQUNBO0FBSUE7QUFMQTtBQU9BOzs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUVBOztBQUZBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQVNBO0FBVEE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQVdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFDQTs7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBOztBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7OztBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFySUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUF3SUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFHQTs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQXlGQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQUE7QUFBQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQWxrQkE7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBRUE7Ozs7Ozs7QUE2ZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUNBOztBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzFpQkE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUNBO0FBQ0E7QUFDQTs7OztBQVFBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7Ozs7QUFFQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFGQTs7QUFGQTtBQUFBO0FBRUE7QUFGQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQVNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7O0FBSkE7QUFBQTtBQUFBO0FBQUE7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7O0FBVEE7QUFBQTtBQUFBO0FBQUE7O0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQWdCQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUEzQkE7QUFBQTtBQUFBOztBQUFBO0FBOEJBOztBQTlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFrQ0E7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTs7QUFKQTtBQUFBO0FBQUE7QUFBQTs7QUFNQTtBQUNBOztBQVBBO0FBQUE7QUFBQTtBQUFBOztBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFjQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFoQ0E7QUFBQTtBQUFBOztBQUFBO0FBbUNBOztBQW5DQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQXVDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBcEpBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFDQTtBQUVBO0FBaEJBO0FBQUE7O0FBQUE7QUFtQkE7QUFDQTtBQUNBOztBQXJCQTtBQUFBO0FBQUE7QUFBQTs7QUF3QkE7QUF4QkE7O0FBQUE7QUE0QkE7QUFDQTs7QUE3QkE7QUFBQTtBQUFBO0FBQUE7O0FBK0JBO0FBRUE7O0FBakNBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQXVDQTtBQURBOztBQXRDQTtBQXNDQTs7QUF0Q0E7QUFBQTtBQUFBO0FBQUE7O0FBNENBO0FBNUNBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBZ0RBO0FBQ0E7QUFDQTtBQWxEQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQXFEQTtBQUNBO0FBQ0E7O0FBdkRBO0FBMERBOztBQTFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQTZEQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBV0E7QUFFQTtBQUNBOztBQUdBO0FBR0E7QUFBQTtBQUlBO0FBT0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQTVHQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUErREE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUVBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBN0NBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOzs7Ozs7Ozs7O0FDUEE7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUhBOztBQU9BO0FBQ0E7QUFEQTtBQUlBOzs7O0FDZkE7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7O0FBaUNBO0FBQUE7QUFBQTs7O0FBR0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7QUN0R0E7QUFDQTtBQUFBOztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQUdBOzs7Ozs7OztBQ3ZDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBOztBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUVBO0FBQ0E7Ozs7OztBQUdBOztBQy9HQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFtQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUtBOztBQUlBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTs7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFIQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTs7QUFDQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7O0FBRkE7QUFBQTtBQUFBO0FBQUE7O0FBSUE7QUFDQTs7QUFDQTtBQUNBO0FBUEE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFoQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFvQkE7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTs7QUFGQTtBQUFBO0FBQUE7QUFBQTs7QUFJQTtBQUNBOztBQUNBO0FBQ0E7QUFQQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQWhCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQW9CQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRkE7QUFFQTs7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUF6Z0JBO0FBQ0E7QUFDQTtBQUZBOzs7OztBQU1BOztBQUVBOzs7OztBQUNBOztBQXVCQTs7Ozs7QUFBQTs7QUFnSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFDQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7O0FBQ0E7QUFBQTtBQUFBOztBQURBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7O0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQXpCQTtBQTJCQTs7OztBQXFCQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7OztBQUVBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFVQTs7O0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7OztBQUVBO0FBRUE7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFJQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBOztBQVZBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFZQTtBQUNBOztBQWJBO0FBZUE7O0FBZkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUdBO0FBQ0E7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFFQTs7QUFGQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQU1BOztBQU5BO0FBQUE7QUFBQTtBQUFBOztBQVFBO0FBRUE7OztBQVZBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFpQkE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBRUE7QUFDQTs7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQU1BO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBWUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7O0FBeENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBNENBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBOztBQUNBO0FBQUE7O0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTs7OztBQXZYQTs7Ozs7QUE4QkE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBVUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlEQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQ0E7QUFDQTtBQUNBOzs7O0FBU0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBOztBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBOztBQUNBOztBQW5CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQWxGQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFHQTs7Ozs7QUFBQTs7Ozs7QUNkQTs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFiQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbERBO0FBQUE7O0FBcURBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQ0E7QUFBQTs7QUFxQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBVkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUFBQTs7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFlQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7O0FBQ0E7QUFBQTtBQUFBOztBQURBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBO0FBRUE7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUpBO0FBV0E7Ozs7QUFFQTtBQUVBO0FBRUE7QUFLQTs7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQUE7QUFEQTtBQUVBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFLQTs7QUFMQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQVVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBTEE7QUFPQTs7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBRkE7QUFBQTtBQUFBO0FBQUE7O0FBNEJBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7Ozs7QUF0U0E7Ozs7O0FBQ0E7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7O0FBQ0E7Ozs7O0FBQUE7Ozs7Ozs7QUFDQTs7Ozs7OztBQUNBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQWlCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbENBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUNBO0FBQ0E7QUFDQTs7OztBQVNBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7QUFFQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7O0FBTEE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFXQTtBQUNBO0FBQ0E7QUFiQTtBQUFBOztBQUFBO0FBY0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQWhDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQW1DQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQXRIQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQ0E7QUFDQTtBQUNBOzs7O0FBbUJBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQVNBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFFQTtBQUZBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBTUE7QUFFQTtBQUNBO0FBQUE7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7O0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBN0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBZ0NBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTs7OztBQUVBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQVhBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFjQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUlBO0FBQ0E7O0FBdkJBO0FBeUJBOztBQXpCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUE0QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7O0FBSEE7QUFHQTs7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFJQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBckJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQWdDQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBTEE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFTQTs7QUFUQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFZQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBS0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7O0FBSEE7QUFHQTs7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBN0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQTVTQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFnQkE7Ozs7Ozs7QUEyT0E7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTtBQUNBOztBQXdCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDblRBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQ0E7QUFDQTtBQUNBOzs7O0FBV0E7QUFFQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUNBO0FBQ0E7O0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFLQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7O0FBRUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBSEE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBS0E7QUFMQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7Ozs7QUFFQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBTEE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFRQTtBQVJBO0FBQUE7O0FBQUE7QUFTQTtBQUNBOztBQVZBO0FBWUE7O0FBWkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0FBM0VBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUVBOzs7Ozs7OztBQWtGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTs7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBOztBQUZBO0FBRUE7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTs7QUFNQTtBQUNBO0FBQ0E7QUFDQTs7QUFwQkE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7OztBQTBCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTs7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTs7QUFGQTtBQUVBOztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTs7QUFLQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFuQkE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0FBeUJBO0FBQ0E7O0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1SkE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUFBOztBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFVQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTs7QUFIQTtBQUFBO0FBQUE7QUFBQTs7QUFNQTtBQU5BO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBU0E7O0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0FBYUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFQQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFVQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBVUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTs7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFZQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7O0FBdklBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOztBQUNBOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFXQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFVQTtBQVZBOztBQUFBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBekJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQTRCQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBSkE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXBCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQXVCQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFjQTtBQUNBO0FBRUE7QUFqQkE7QUFBQTs7QUFBQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTs7QUF2QkE7QUFBQTtBQUFBO0FBQUE7O0FBMEJBO0FBMUJBOztBQUFBO0FBOEJBO0FBQ0E7O0FBL0JBO0FBQUE7QUFBQTtBQUFBOztBQWlDQTtBQUVBOztBQW5DQTs7QUFBQTtBQUFBO0FBQUE7QUF3Q0E7QUFEQTs7QUF2Q0E7QUF1Q0E7O0FBdkNBO0FBQUE7QUFBQTtBQUFBOztBQTZDQTtBQTdDQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQWlEQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUF4REE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQTBEQTtBQTFEQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQTZEQTtBQUNBO0FBQ0E7QUFDQTs7QUFoRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0FBb0VBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7O0FBTEE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7O0FBVEE7QUFTQTtBQVRBO0FBQUE7O0FBQUE7QUFnQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQWhCQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQTlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQWlDQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7Ozs7QUFFQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBV0E7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBOztBQUlBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBTEE7QUFRQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTs7OztBQXpVQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFDQTs7Ozs7QUFBQTs7QUFnTUE7Ozs7O0FDdE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBOztBQUFBOztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL2FjY291bnQtcHJvbXB0LWRpYWxvZy1zdG9yZS5qcz83Y2M0Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vQ29uc3RhbnRzL2NvbnN0YW50cy5qcz9kMGQ4Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL2Vycm9yLXN0b3JlLmpzPzBiZjUiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9TdG9yZXMvYWNjb3VudC10cmFuc2Zlci1zdG9yZS5qcz8wNWQ0Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL2NyeXB0by1maWF0LWNvbnZlcnRlci1zdG9yZS5qcz81Njg3Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL2RlcG9zaXQtc3RvcmUuanM/N2Q0YyIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL1N0b3Jlcy9lcnJvci1kaWFsb2ctc3RvcmUuanM/M2Y0YSIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL0NvbnRhaW5lcnMvY2FzaGllci1ub3RpZmljYXRpb25zLmpzeD9mYjI0Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vX2NvbW1vbi91dGlsaXR5LmpzP2I0YjAiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9VdGlscy9WYWxpZGF0b3IvZXJyb3JzLmpzP2ZjNGYiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9VdGlscy9WYWxpZGF0b3IvdmFsaWRhdG9yLmpzP2U3ZmIiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9VdGlscy9WYWxpZGF0b3IvaW5kZXguanM/OTdjOCIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL1N0b3Jlcy9iYXNlLXN0b3JlLmpzP2M0YTEiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9TdG9yZXMvZ2VuZXJhbC1zdG9yZS5qcz9mNTQxIiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL2lmcmFtZS1zdG9yZS5qcz9iNGY5Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vQ29uZmlnL29uLXJhbXAtcHJvdmlkZXJzLmpzPzYxOTMiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9TdG9yZXMvb24tcmFtcC1zdG9yZS5qcz81MzdlIiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL3ZlcmlmaWNhdGlvbi1zdG9yZS5qcz9mODZmIiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL3BheW1lbnQtYWdlbnQtc3RvcmUuanM/ZjBhZCIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL1N0b3Jlcy9wYXltZW50LWFnZW50LXRyYW5zZmVyLXN0b3JlLmpzPzFkYWIiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9TdG9yZXMvdHJhbnNhY3Rpb24taGlzdG9yeS1zdG9yZS5qcz80MmQ1Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vU3RvcmVzL3dpdGhkcmF3LXN0b3JlLmpzP2QyZWIiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9TdG9yZXMvY2FzaGllci1zdG9yZS5qcz85YWNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9ic2VydmFibGUsIGFjdGlvbiB9IGZyb20gJ21vYngnO1xuaW1wb3J0IHsgaXNDcnlwdG9jdXJyZW5jeSB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50UHJvbXB0RGlhbG9nU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHJvb3Rfc3RvcmUpIHtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICB9XG5cbiAgICBAb2JzZXJ2YWJsZSBzaG91bGRfc2hvdyA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX2NvbmZpcm1lZCA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGxhc3RfbG9jYXRpb24gPSBudWxsO1xuICAgIEBvYnNlcnZhYmxlIGN1cnJlbnRfbG9jYXRpb24gPSBudWxsO1xuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNob3VsZE5hdmlnYXRlQWZ0ZXJQcm9tcHQobmV4dF9sb2NhdGlvbiwgY3VycmVudF9sb2NhdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuaXNfY29uZmlybWVkKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RfbG9jYXRpb24gPSBuZXh0X2xvY2F0aW9uO1xuICAgICAgICAgICAgdGhpcy5zaG91bGRfc2hvdyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRfbG9jYXRpb24gPSBjdXJyZW50X2xvY2F0aW9uO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHJlc2V0TGFzdExvY2F0aW9uKCkge1xuICAgICAgICB0aGlzLmxhc3RfbG9jYXRpb24gPSBudWxsO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICByZXNldElzQ29uZmlybWVkKCkge1xuICAgICAgICB0aGlzLmlzX2NvbmZpcm1lZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBvbkNvbmZpcm0oKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgYWNjb3VudHNfbGlzdCB9ID0gbW9kdWxlcy5jYXNoaWVyLmFjY291bnRfdHJhbnNmZXI7XG5cbiAgICAgICAgdGhpcy5zaG91bGRfc2hvdyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzX2NvbmZpcm1lZCA9IHRydWU7XG5cbiAgICAgICAgY29uc3QgaGFzX2ZpYXRfYWNjb3VudCA9IGFjY291bnRzX2xpc3Quc29tZSh4ID0+ICF4LmlzX2NyeXB0byk7XG4gICAgICAgIGlmIChpc0NyeXB0b2N1cnJlbmN5KGNsaWVudD8uY3VycmVuY3kpICYmIGhhc19maWF0X2FjY291bnQpIGF3YWl0IHRoaXMuZG9Td2l0Y2goKTtcbiAgICB9XG5cbiAgICBhc3luYyBkb1N3aXRjaCgpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3RyYW5zZmVyLCBnZW5lcmFsX3N0b3JlIH0gPSBtb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgY29uc3Qgbm9uX2NyeXB0b19hY2NvdW50cyA9IGFjY291bnRfdHJhbnNmZXIuYWNjb3VudHNfbGlzdC5maWx0ZXIoeCA9PiAheC5pc19jcnlwdG8pO1xuICAgICAgICBjb25zdCBsb2dpbmlkID0gbm9uX2NyeXB0b19hY2NvdW50cy5tYXAoeCA9PiB4LnZhbHVlKVswXTtcbiAgICAgICAgYXdhaXQgY2xpZW50LnN3aXRjaEFjY291bnQobG9naW5pZCk7XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudF9sb2NhdGlvbiA9PT0gJ2RlcG9zaXQnKSB7XG4gICAgICAgICAgICBnZW5lcmFsX3N0b3JlLnNldElzRGVwb3NpdCh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBvbkNhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5zaG91bGRfc2hvdyA9IGZhbHNlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBjb250aW51ZVJvdXRlKCkge1xuICAgICAgICBpZiAodGhpcy5pc19jb25maXJtZWQgJiYgdGhpcy5sYXN0X2xvY2F0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY29tbW9uLnJvdXRlVG8odGhpcy5sYXN0X2xvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImNvbnN0IGNvbnRhaW5lcnMgPSB7XG4gICAgYWNjb3VudF90cmFuc2ZlcjogJ2FjY291bnRfdHJhbnNmZXInLFxuICAgIGRlcG9zaXQ6ICdkZXBvc2l0JyxcbiAgICBwYXltZW50X2FnZW50OiAncGF5bWVudF9hZ2VudCcsXG4gICAgcGF5bWVudF9hZ2VudF90cmFuc2ZlcjogJ3BheW1lbnRfYWdlbnRfdHJhbnNmZXInLFxuICAgIHdpdGhkcmF3OiAnd2l0aGRyYXcnLFxufTtcblxuY29uc3QgbWFwX2FjdGlvbiA9IHtcbiAgICB3aXRoZHJhdzogJ3BheW1lbnRfd2l0aGRyYXcnLFxuICAgIHBheW1lbnRfYWdlbnQ6ICdwYXltZW50X2FnZW50X3dpdGhkcmF3Jyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgY29udGFpbmVycywgbWFwX2FjdGlvbiB9O1xuIiwiaW1wb3J0IHsgYWN0aW9uLCBvYnNlcnZhYmxlIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBnZXRQcm9wZXJ0eVZhbHVlIH0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVycm9yU3RvcmUge1xuICAgIEBvYnNlcnZhYmxlIG1lc3NhZ2UgPSAnJztcbiAgICBAb2JzZXJ2YWJsZSBjb2RlID0gJyc7XG4gICAgQG9ic2VydmFibGUgZmllbGRzID0gJyc7XG4gICAgQG9ic2VydmFibGUgaXNfc2hvd19mdWxsX3BhZ2UgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBvbkNsaWNrQnV0dG9uID0gbnVsbDtcbiAgICBAb2JzZXJ2YWJsZSBpc19hc2tfdWtfZnVuZHNfcHJvdGVjdGlvbiA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX3NlbGZfZXhjbHVzaW9uX21heF90dXJub3Zlcl9zZXQgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc19hc2tfYXV0aGVudGljYXRpb24gPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc19hc2tfZmluYW5jaWFsX3Jpc2tfYXBwcm92YWwgPSBmYWxzZTtcblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRFcnJvck1lc3NhZ2UoZXJyb3IsIG9uQ2xpY2tCdXR0b24sIGlzX3Nob3dfZnVsbF9wYWdlKSB7XG4gICAgICAgIC8vIGZvciBlcnJvcnMgdGhhdCBuZWVkIHRvIHNob3cgYSBidXR0b24sIHJlc2V0IHRoZSBmb3JtXG4gICAgICAgIGNvbnN0IGVycm9yX29iamVjdCA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2tCdXR0b24sXG4gICAgICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIGlzX3Nob3dfZnVsbF9wYWdlOiBpc19zaG93X2Z1bGxfcGFnZSB8fCAvSW52YWxpZFRva2VufFdyb25nUmVzcG9uc2UvLnRlc3QoZXJyb3IuY29kZSksXG4gICAgICAgICAgICAuLi4oZ2V0UHJvcGVydHlWYWx1ZShlcnJvciwgWydkZXRhaWxzJywgJ2ZpZWxkcyddKSAmJiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlcnJvci5kZXRhaWxzLmZpZWxkcyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMub25DbGlja0J1dHRvbiA9IGVycm9yX29iamVjdC5vbkNsaWNrQnV0dG9uO1xuICAgICAgICB0aGlzLmNvZGUgPSBlcnJvcl9vYmplY3QuY29kZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3Jfb2JqZWN0Lm1lc3NhZ2U7XG4gICAgICAgIHRoaXMuaXNfc2hvd19mdWxsX3BhZ2UgPSBlcnJvcl9vYmplY3QuaXNfc2hvd19mdWxsX3BhZ2U7XG4gICAgICAgIHRoaXMuZmllbGRzID0gZXJyb3Jfb2JqZWN0LmZpZWxkcztcbiAgICAgICAgdGhpcy5pc19hc2tfdWtfZnVuZHNfcHJvdGVjdGlvbiA9IGVycm9yX29iamVjdD8uaXNfYXNrX3VrX2Z1bmRzX3Byb3RlY3Rpb247XG4gICAgICAgIHRoaXMuaXNfc2VsZl9leGNsdXNpb25fbWF4X3R1cm5vdmVyX3NldCA9IGVycm9yX29iamVjdD8uaXNfc2VsZl9leGNsdXNpb25fbWF4X3R1cm5vdmVyX3NldDtcbiAgICAgICAgdGhpcy5pc19hc2tfYXV0aGVudGljYXRpb24gPSBlcnJvcl9vYmplY3Q/LmlzX2Fza19hdXRoZW50aWNhdGlvbjtcbiAgICAgICAgdGhpcy5pc19hc2tfZmluYW5jaWFsX3Jpc2tfYXBwcm92YWwgPSBlcnJvcl9vYmplY3Q/LmlzX2Fza19maW5hbmNpYWxfcmlza19hcHByb3ZhbDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgaGFuZGxlQ2FzaGllckVycm9yKGVycm9yKSB7XG4gICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgY2FzZSAnQVNLX1ROQ19BUFBST1ZBTCc6XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFcnJvck1lc3NhZ2UoZXJyb3IsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQVNLX0ZJWF9ERVRBSUxTJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVycm9yTWVzc2FnZShlcnJvciwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBU0tfVUtfRlVORFNfUFJPVEVDVElPTic6XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc0Fza1VrRnVuZHNQcm90ZWN0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQVNLX1NFTEZfRVhDTFVTSU9OX01BWF9UVVJOT1ZFUl9TRVQnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNTZWxmRXhjbHVzaW9uTWF4VHVybm92ZXJTZXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBU0tfQVVUSEVOVElDQVRFJzpcbiAgICAgICAgICAgIGNhc2UgJ0FTS19BR0VfVkVSSUZJQ0FUSU9OJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzQXNrQXV0aGVudGljYXRpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBU0tfRklOQU5DSUFMX1JJU0tfQVBQUk9WQUwnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNBc2tGaW5hbmNpYWxSaXNrQXBwcm92YWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RXJyb3JNZXNzYWdlKGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzQXNrVWtGdW5kc1Byb3RlY3Rpb24oZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNTZWxmRXhjbHVzaW9uTWF4VHVybm92ZXJTZXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNBc2tBdXRoZW50aWNhdGlvbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc0Fza0ZpbmFuY2lhbFJpc2tBcHByb3ZhbChmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0TWVzc2FnZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNBc2tVa0Z1bmRzUHJvdGVjdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmlzX2Fza191a19mdW5kc19wcm90ZWN0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldElzU2VsZkV4Y2x1c2lvbk1heFR1cm5vdmVyU2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXNfc2VsZl9leGNsdXNpb25fbWF4X3R1cm5vdmVyX3NldCA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc0Fza0F1dGhlbnRpY2F0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXNfYXNrX2F1dGhlbnRpY2F0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldElzQXNrRmluYW5jaWFsUmlza0FwcHJvdmFsKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXNfYXNrX2ZpbmFuY2lhbF9yaXNrX2FwcHJvdmFsID0gdmFsdWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGFjdGlvbiwgY29tcHV0ZWQsIG9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7XG4gICAgZm9ybWF0TW9uZXksXG4gICAgaXNFbXB0eU9iamVjdCxcbiAgICBpc0NyeXB0b2N1cnJlbmN5LFxuICAgIGdldEN1cnJlbmNpZXMsXG4gICAgZ2V0Q3VycmVuY3lEaXNwbGF5Q29kZSxcbiAgICBnZXREZWNpbWFsUGxhY2VzLFxuICAgIGdldENGREFjY291bnREaXNwbGF5LFxuICAgIGdldENGREFjY291bnQsXG4gICAgZ2V0UHJvcGVydHlWYWx1ZSxcbiAgICB2YWxpZE51bWJlcixcbiAgICBDRkRfUExBVEZPUk1TLFxufSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCB7IGxvY2FsaXplLCBMb2NhbGl6ZSB9IGZyb20gJ0BkZXJpdi90cmFuc2xhdGlvbnMnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuXG5jb25zdCBoYXNUcmFuc2Zlck5vdEFsbG93ZWRMb2dpbmlkID0gbG9naW5pZCA9PiBsb2dpbmlkLnN0YXJ0c1dpdGgoJ01YJyk7XG5cbmNvbnN0IGdldFNlbGVjdGVkRXJyb3IgPSAoc2VsZWN0ZWRfdmFsdWUsIGlzX2Zyb21fYWNjb3VudCkgPT4ge1xuICAgIGlmIChpc19mcm9tX2FjY291bnQpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxMb2NhbGl6ZVxuICAgICAgICAgICAgICAgIGkxOG5fZGVmYXVsdF90ZXh0PSdUcmFuc2ZlciBmcm9tIHt7c2VsZWN0ZWRfdmFsdWV9fSBpcyBub3QgYWxsb3dlZCwgUGxlYXNlIGNob29zZSBhbm90aGVyIGFjY291bnQgZnJvbSBkcm9wZG93bidcbiAgICAgICAgICAgICAgICB2YWx1ZXM9e3sgc2VsZWN0ZWRfdmFsdWUgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPExvY2FsaXplXG4gICAgICAgICAgICBpMThuX2RlZmF1bHRfdGV4dD0nVHJhbnNmZXIgdG8ge3tzZWxlY3RlZF92YWx1ZX19IGlzIG5vdCBhbGxvd2VkLCBQbGVhc2UgY2hvb3NlIGFub3RoZXIgYWNjb3VudCBmcm9tIGRyb3Bkb3duJ1xuICAgICAgICAgICAgdmFsdWVzPXt7IHNlbGVjdGVkX3ZhbHVlIH19XG4gICAgICAgIC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRUcmFuc2ZlclN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5XUyA9IFdTO1xuICAgIH1cblxuICAgIEBvYnNlcnZhYmxlIGFjY291bnRzX2xpc3QgPSBbXTtcbiAgICBAb2JzZXJ2YWJsZSBjb250YWluZXIgPSBDb25zdGFudHMuY29udGFpbmVycy5hY2NvdW50X3RyYW5zZmVyO1xuICAgIEBvYnNlcnZhYmxlIGVycm9yID0gbmV3IEVycm9yU3RvcmUoKTtcbiAgICBAb2JzZXJ2YWJsZSBoYXNfbm9fYWNjb3VudCA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGhhc19ub19hY2NvdW50c19iYWxhbmNlID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgaXNfdHJhbnNmZXJfY29uZmlybSA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX3RyYW5zZmVyX3N1Y2Nlc3NmdWwgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc19tdDVfdHJhbnNmZXJfaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBtaW5pbXVtX2ZlZSA9IG51bGw7XG4gICAgQG9ic2VydmFibGUgcmVjZWlwdCA9IHt9O1xuICAgIEBvYnNlcnZhYmxlIHNlbGVjdGVkX2Zyb20gPSB7fTtcbiAgICBAb2JzZXJ2YWJsZSBzZWxlY3RlZF90byA9IHt9O1xuICAgIEBvYnNlcnZhYmxlIGFjY291bnRfdHJhbnNmZXJfYW1vdW50ID0gJyc7XG4gICAgQG9ic2VydmFibGUgdHJhbnNmZXJfZmVlID0gbnVsbDtcbiAgICBAb2JzZXJ2YWJsZSB0cmFuc2Zlcl9saW1pdCA9IHt9O1xuXG4gICAgQGNvbXB1dGVkXG4gICAgZ2V0IGlzX2FjY291bnRfdHJhbnNmZXJfdmlzaWJsZSgpIHtcbiAgICAgICAgY29uc3QgeyBoYXNfbWFsdGFpbnZlc3RfYWNjb3VudCwgbGFuZGluZ19jb21wYW55X3Nob3J0Y29kZSwgcmVzaWRlbmNlIH0gPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50O1xuICAgICAgICAvLyBjYXNoaWVyIFRyYW5zZmVyIGFjY291bnQgdGFiIGlzIGhpZGRlbiBmb3IgaW9tIGNsaWVudHNcbiAgICAgICAgLy8gY2hlY2sgZm9yIHJlc2lkZW5jZSB0byBoaWRlIHRoZSB0YWIgYmVmb3JlIGNyZWF0aW5nIGEgcmVhbCBtb25leSBhY2NvdW50XG4gICAgICAgIHJldHVybiByZXNpZGVuY2UgIT09ICdpbScgJiYgKGxhbmRpbmdfY29tcGFueV9zaG9ydGNvZGUgIT09ICdtYWx0YScgfHwgaGFzX21hbHRhaW52ZXN0X2FjY291bnQpO1xuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBpc190cmFuc2Zlcl9sb2NrZWQoKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGlzX2ZpbmFuY2lhbF9hY2NvdW50LFxuICAgICAgICAgICAgaXNfZmluYW5jaWFsX2luZm9ybWF0aW9uX2luY29tcGxldGUsXG4gICAgICAgICAgICBpc190cmFkaW5nX2V4cGVyaWVuY2VfaW5jb21wbGV0ZSxcbiAgICAgICAgICAgIGFjY291bnRfc3RhdHVzLFxuICAgICAgICB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcblxuICAgICAgICBpZiAoIWFjY291bnRfc3RhdHVzLnN0YXR1cykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IG5lZWRfZmluYW5jaWFsX2Fzc2Vzc21lbnQgPVxuICAgICAgICAgICAgaXNfZmluYW5jaWFsX2FjY291bnQgJiYgKGlzX2ZpbmFuY2lhbF9pbmZvcm1hdGlvbl9pbmNvbXBsZXRlIHx8IGlzX3RyYWRpbmdfZXhwZXJpZW5jZV9pbmNvbXBsZXRlKTtcblxuICAgICAgICByZXR1cm4gbmVlZF9maW5hbmNpYWxfYXNzZXNzbWVudCAmJiB0aGlzLmVycm9yLmlzX2Fza19maW5hbmNpYWxfcmlza19hcHByb3ZhbDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0QmFsYW5jZUJ5TG9naW5JZChsb2dpbmlkLCBiYWxhbmNlKSB7XG4gICAgICAgIHRoaXMuYWNjb3VudHNfbGlzdC5maW5kKGFjYyA9PiBsb2dpbmlkID09PSBhY2MudmFsdWUpLmJhbGFuY2UgPSBiYWxhbmNlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRCYWxhbmNlU2VsZWN0ZWRGcm9tKGJhbGFuY2UpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF9mcm9tLmJhbGFuY2UgPSBiYWxhbmNlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRCYWxhbmNlU2VsZWN0ZWRUbyhiYWxhbmNlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfdG8uYmFsYW5jZSA9IGJhbGFuY2U7XG4gICAgfVxuXG4gICAgLy8gcG9zc2libGUgdHJhbnNmZXJzOlxuICAgIC8vIDEuIGZpYXQgdG8gY3J5cHRvICYgdmljZSB2ZXJzYVxuICAgIC8vIDIuIGZpYXQgdG8gbXQgJiB2aWNlIHZlcnNhXG4gICAgLy8gMy4gY3J5cHRvIHRvIG10ICYgdmljZSB2ZXJzYVxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBvbk1vdW50QWNjb3VudFRyYW5zZmVyKCkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IG9uTW91bnRDb21tb24sIHNldExvYWRpbmcgfSA9IG1vZHVsZXMuY2FzaGllci5nZW5lcmFsX3N0b3JlO1xuICAgICAgICBjb25zdCB7IGFjdGl2ZV9hY2NvdW50cywgaXNfbG9nZ2VkX2luIH0gPSBjbGllbnQ7XG5cbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgdGhpcy5vblJlbW91bnQgPSB0aGlzLm9uTW91bnRBY2NvdW50VHJhbnNmZXI7XG4gICAgICAgIGF3YWl0IG9uTW91bnRDb21tb24oKTtcbiAgICAgICAgYXdhaXQgdGhpcy5XUy53YWl0KCd3ZWJzaXRlX3N0YXR1cycpO1xuXG4gICAgICAgIC8vIGNoZWNrIGlmIHNvbWUgYmFsYW5jZSB1cGRhdGUgaGFzIGNvbWUgaW4gc2luY2UgdGhlIGxhc3QgbW91bnRcbiAgICAgICAgY29uc3QgaGFzX3VwZGF0ZWRfYWNjb3VudF9iYWxhbmNlID1cbiAgICAgICAgICAgIHRoaXMuaGFzX25vX2FjY291bnRzX2JhbGFuY2UgJiZcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGFjdGl2ZV9hY2NvdW50cykuZmluZChcbiAgICAgICAgICAgICAgICBhY2NvdW50ID0+ICFhY3RpdmVfYWNjb3VudHNbYWNjb3VudF0uaXNfdmlydHVhbCAmJiBhY3RpdmVfYWNjb3VudHNbYWNjb3VudF0uYmFsYW5jZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgaWYgKGhhc191cGRhdGVkX2FjY291bnRfYmFsYW5jZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRIYXNOb0FjY291bnRzQmFsYW5jZShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YXJpb3VzIGlzc3VlcyBoYXBwZW4gd2hlbiBsb2FkaW5nIGZyb20gY2FjaGVcbiAgICAgICAgLy8gZS5nLiBuZXcgYWNjb3VudCBtYXkgaGF2ZSBiZWVuIGNyZWF0ZWQsIHRyYW5zZmVyIG1heSBoYXZlIGJlZW4gZG9uZSBlbHNld2hlcmUsIGV0Y1xuICAgICAgICAvLyBzbyBvbiBsb2FkIG9mIHRoaXMgcGFnZSBqdXN0IGNhbGwgaXQgYWdhaW5cbiAgICAgICAgaWYgKGlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cyA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC50cmFuc2ZlckJldHdlZW5BY2NvdW50cygpO1xuXG4gICAgICAgICAgICBpZiAodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuZXJyb3IsIHRoaXMub25Nb3VudEFjY291bnRUcmFuc2Zlcik7XG4gICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuRG9BY2NvdW50VHJhbnNmZXIodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5hY2NvdW50cykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc29ydEFjY291bnRzVHJhbnNmZXIodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cyk7XG4gICAgICAgICAgICB0aGlzLnNldFRyYW5zZmVyRmVlKCk7XG4gICAgICAgICAgICB0aGlzLnNldE1pbmltdW1GZWUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNmZXJMaW1pdCgpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hY2NvdW50c19saXN0Py5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2ZkX3RyYW5zZmVyX3RvX2xvZ2luX2lkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnY2ZkX3RyYW5zZmVyX3RvX2xvZ2luX2lkJyk7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnY2ZkX3RyYW5zZmVyX3RvX2xvZ2luX2lkJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqX3ZhbHVlcyA9IHRoaXMuYWNjb3VudHNfbGlzdC5maW5kKGFjY291bnQgPT4gYWNjb3VudC52YWx1ZSA9PT0gY2ZkX3RyYW5zZmVyX3RvX2xvZ2luX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqX3ZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzVHJhbnNmZXJOb3RBbGxvd2VkTG9naW5pZChvYmpfdmFsdWVzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgc2VsZWN0ZWQgdG8gaXMgbm90IGFsbG93ZWQgYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqX3ZhbHVlcy5lcnJvciA9IGdldFNlbGVjdGVkRXJyb3Iob2JqX3ZhbHVlcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFRvKG9ial92YWx1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG5cbiAgICBjYW5Eb0FjY291bnRUcmFuc2ZlcihhY2NvdW50cykge1xuICAgICAgICBsZXQgY2FuX3RyYW5zZmVyID0gdHJ1ZTtcbiAgICAgICAgLy8gc2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIGFjY291bnQgd2l0aCBiYWxhbmNlXG4gICAgICAgIGlmICghYWNjb3VudHMuZmluZChhY2NvdW50ID0+ICthY2NvdW50LmJhbGFuY2UgPiAwKSkge1xuICAgICAgICAgICAgY2FuX3RyYW5zZmVyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNldEhhc05vQWNjb3VudHNCYWxhbmNlKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRIYXNOb0FjY291bnRzQmFsYW5jZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2hvdWxkIGhhdmUgYXQgbGVhc3QgdHdvIHJlYWwtbW9uZXkgYWNjb3VudHNcbiAgICAgICAgaWYgKGFjY291bnRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICBjYW5fdHJhbnNmZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2V0SGFzTm9BY2NvdW50KHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRIYXNOb0FjY291bnQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2FuX3RyYW5zZmVyKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyLmdlbmVyYWxfc3RvcmUuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbl90cmFuc2ZlcjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SGFzTm9BY2NvdW50c0JhbGFuY2UoaGFzX25vX2FjY291bnRzX2JhbGFuY2UpIHtcbiAgICAgICAgdGhpcy5oYXNfbm9fYWNjb3VudHNfYmFsYW5jZSA9IGhhc19ub19hY2NvdW50c19iYWxhbmNlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRIYXNOb0FjY291bnQoaGFzX25vX2FjY291bnQpIHtcbiAgICAgICAgdGhpcy5oYXNfbm9fYWNjb3VudCA9IGhhc19ub19hY2NvdW50O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRUcmFuc2ZlckZlZSgpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmZXJfZmVlID0gZ2V0UHJvcGVydHlWYWx1ZShnZXRDdXJyZW5jaWVzKCksIFtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfZnJvbS5jdXJyZW5jeSxcbiAgICAgICAgICAgICd0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzJyxcbiAgICAgICAgICAgICdmZWVzJyxcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfdG8uY3VycmVuY3ksXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLnRyYW5zZmVyX2ZlZSA9IE51bWJlcih0cmFuc2Zlcl9mZWUgfHwgMCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldE1pbmltdW1GZWUoKSB7XG4gICAgICAgIGNvbnN0IGRlY2ltYWxzID0gZ2V0RGVjaW1hbFBsYWNlcyh0aGlzLnNlbGVjdGVkX2Zyb20uY3VycmVuY3kpO1xuICAgICAgICAvLyB3ZSBuZWVkIC50b0ZpeGVkKCkgc28gdGhhdCBpdCBkb2Vzbid0IGRpc3BsYXkgaW4gc2NpZW50aWZpYyBub3RhdGlvbiwgZS5nLiAxZS04IGZvciBjdXJyZW5jaWVzIHdpdGggOCBkZWNpbWFsIHBsYWNlc1xuICAgICAgICB0aGlzLm1pbmltdW1fZmVlID0gKDEgLyBNYXRoLnBvdygxMCwgZGVjaW1hbHMpKS50b0ZpeGVkKGRlY2ltYWxzKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0VHJhbnNmZXJMaW1pdCgpIHtcbiAgICAgICAgY29uc3QgaXNfbXRfdHJhbnNmZXIgPSB0aGlzLnNlbGVjdGVkX2Zyb20uaXNfbXQgfHwgdGhpcy5zZWxlY3RlZF90by5pc19tdDtcbiAgICAgICAgY29uc3QgaXNfZHh0cmFkZV90cmFuc2ZlciA9IHRoaXMuc2VsZWN0ZWRfZnJvbS5pc19keHRyYWRlIHx8IHRoaXMuc2VsZWN0ZWRfdG8uaXNfZHh0cmFkZTtcblxuICAgICAgICBsZXQgbGltaXRzX2tleTtcbiAgICAgICAgaWYgKGlzX210X3RyYW5zZmVyKSB7XG4gICAgICAgICAgICBsaW1pdHNfa2V5ID0gJ2xpbWl0c19tdDUnO1xuICAgICAgICB9IGVsc2UgaWYgKGlzX2R4dHJhZGVfdHJhbnNmZXIpIHtcbiAgICAgICAgICAgIGxpbWl0c19rZXkgPSAnbGltaXRzX2R4dHJhZGUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGltaXRzX2tleSA9ICdsaW1pdHMnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHJhbnNmZXJfbGltaXQgPSBnZXRQcm9wZXJ0eVZhbHVlKGdldEN1cnJlbmNpZXMoKSwgW1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9mcm9tLmN1cnJlbmN5LFxuICAgICAgICAgICAgJ3RyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMnLFxuICAgICAgICAgICAgbGltaXRzX2tleSxcbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSB0aGlzLnNlbGVjdGVkX2Zyb20uYmFsYW5jZTtcbiAgICAgICAgY29uc3QgZGVjaW1hbF9wbGFjZXMgPSBnZXREZWNpbWFsUGxhY2VzKHRoaXMuc2VsZWN0ZWRfZnJvbS5jdXJyZW5jeSk7XG4gICAgICAgIC8vIHdlIG5lZWQgLnRvRml4ZWQoKSBzbyB0aGF0IGl0IGRvZXNuJ3QgZGlzcGxheSBpbiBzY2llbnRpZmljIG5vdGF0aW9uLCBlLmcuIDFlLTggZm9yIGN1cnJlbmNpZXMgd2l0aCA4IGRlY2ltYWwgcGxhY2VzXG4gICAgICAgIHRoaXMudHJhbnNmZXJfbGltaXQgPSB7XG4gICAgICAgICAgICBtYXg6XG4gICAgICAgICAgICAgICAgIXRyYW5zZmVyX2xpbWl0Py5tYXggfHwgKCtiYWxhbmNlID49ICh0cmFuc2Zlcl9saW1pdD8ubWluIHx8IDApICYmICtiYWxhbmNlIDw9IHRyYW5zZmVyX2xpbWl0Py5tYXgpXG4gICAgICAgICAgICAgICAgICAgID8gYmFsYW5jZVxuICAgICAgICAgICAgICAgICAgICA6IHRyYW5zZmVyX2xpbWl0Py5tYXgudG9GaXhlZChkZWNpbWFsX3BsYWNlcyksXG4gICAgICAgICAgICBtaW46IHRyYW5zZmVyX2xpbWl0Py5taW4gPyAoK3RyYW5zZmVyX2xpbWl0Py5taW4pLnRvRml4ZWQoZGVjaW1hbF9wbGFjZXMpIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgc29ydEFjY291bnRzVHJhbnNmZXIocmVzcG9uc2VfYWNjb3VudHMpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cyA9IHJlc3BvbnNlX2FjY291bnRzIHx8IChhd2FpdCB0aGlzLldTLmF1dGhvcml6ZWQudHJhbnNmZXJCZXR3ZWVuQWNjb3VudHMoKSk7XG4gICAgICAgIGlmICghdGhpcy5hY2NvdW50c19saXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtdDVfbG9naW5fbGlzdCA9IChhd2FpdCB0aGlzLldTLnN0b3JhZ2UubXQ1TG9naW5MaXN0KCkpPy5tdDVfbG9naW5fbGlzdDtcbiAgICAgICAgLy8gVE9ETzogbW92ZSBgdHJhZGluZ1BsYXRmb3JtQWNjb3VudHNMaXN0YCB0byBkZXJpdi1hcGkgdG8gdXNlIHN0b3JhZ2VcbiAgICAgICAgY29uc3QgZHh0cmFkZV9hY2NvdW50c19saXN0ID0gKGF3YWl0IHRoaXMuV1MudHJhZGluZ1BsYXRmb3JtQWNjb3VudHNMaXN0KENGRF9QTEFURk9STVMuRFhUUkFERSkpXG4gICAgICAgICAgICA/LnRyYWRpbmdfcGxhdGZvcm1fYWNjb3VudHM7XG5cbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgdGVtcG9yYXJ5IG1hcHBpbmcgd2hlbiBBUEkgYWRkcyBtYXJrZXRfdHlwZSBhbmQgc3ViX2FjY291bnRfdHlwZSB0byB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzXG4gICAgICAgIGNvbnN0IGFjY291bnRzID0gdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5hY2NvdW50cy5tYXAoYWNjb3VudCA9PiB7XG4gICAgICAgICAgICBpZiAoYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuTVQ1ICYmIEFycmF5LmlzQXJyYXkobXQ1X2xvZ2luX2xpc3QpICYmIG10NV9sb2dpbl9saXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIGFjY291bnRfdHlwZSBpbiB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzIChtdDV8YmluYXJ5KVxuICAgICAgICAgICAgICAgIC8vIGdldHMgb3ZlcnJpZGRlbiBieSBhY2NvdW50X3R5cGUgaW4gbXQ1X2xvZ2luX2xpc3QgKGRlbW98cmVhbClcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSBpbiBjYXNoaWVyIGFsbCB0aGVzZSBhcmUgcmVhbCBhY2NvdW50cywgdGhlIG10NSBhY2NvdW50IHR5cGUgaXMgd2hhdCB3ZSB3YW50IHRvIGtlZXBcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZF9hY2NvdW50ID0gbXQ1X2xvZ2luX2xpc3QuZmluZChhY2MgPT4gYWNjLmxvZ2luID09PSBhY2NvdW50LmxvZ2luaWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kX2FjY291bnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGFjY291bnQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5hY2NvdW50LCAuLi5mb3VuZF9hY2NvdW50LCBhY2NvdW50X3R5cGU6IENGRF9QTEFURk9STVMuTVQ1IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuRFhUUkFERSAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZHh0cmFkZV9hY2NvdW50c19saXN0KSAmJlxuICAgICAgICAgICAgICAgIGR4dHJhZGVfYWNjb3VudHNfbGlzdC5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIC8vIGFjY291bnRfdHlwZSBpbiB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzIChtdDV8YmluYXJ5KVxuICAgICAgICAgICAgICAgIC8vIGdldHMgb3ZlcnJpZGRlbiBieSBhY2NvdW50X3R5cGUgaW4gZHh0cmFkZV9hY2NvdW50c19saXN0IChkZW1vfHJlYWwpXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgaW4gY2FzaGllciBhbGwgdGhlc2UgYXJlIHJlYWwgYWNjb3VudHMsIHRoZSBtdDUgYWNjb3VudCB0eXBlIGlzIHdoYXQgd2Ugd2FudCB0byBrZWVwXG4gICAgICAgICAgICAgICAgY29uc3QgZm91bmRfYWNjb3VudCA9IGR4dHJhZGVfYWNjb3VudHNfbGlzdC5maW5kKGFjYyA9PiBhY2MuYWNjb3VudF9pZCA9PT0gYWNjb3VudC5sb2dpbmlkKTtcblxuICAgICAgICAgICAgICAgIGlmIChmb3VuZF9hY2NvdW50ID09PSB1bmRlZmluZWQpIHJldHVybiBhY2NvdW50O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uYWNjb3VudCwgLi4uZm91bmRfYWNjb3VudCwgYWNjb3VudF90eXBlOiBDRkRfUExBVEZPUk1TLkRYVFJBREUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2NvdW50O1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gc29ydCBhY2NvdW50cyBhcyBmb2xsb3dzOlxuICAgICAgICAvLyBmb3IgTVQ1LCBzeW50aGV0aWMsIGZpbmFuY2lhbCwgZmluYW5jaWFsIHN0cFxuICAgICAgICAvLyBmb3Igbm9uLU1UNSwgZmlhdCwgY3J5cHRvIChhbHBoYWJldGljYWxseSBieSBjdXJyZW5jeSlcbiAgICAgICAgLy8gc2hvdWxkIGhhdmUgbW9yZSB0aGFuIG9uZSBhY2NvdW50XG4gICAgICAgIGlmICh0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmFjY291bnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGFjY291bnRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhX2lzX210ID0gYS5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuTVQ1O1xuICAgICAgICAgICAgICAgIGNvbnN0IGJfaXNfbXQgPSBiLmFjY291bnRfdHlwZSA9PT0gQ0ZEX1BMQVRGT1JNUy5NVDU7XG4gICAgICAgICAgICAgICAgY29uc3QgYV9pc19jcnlwdG8gPSAhYV9pc19tdCAmJiBpc0NyeXB0b2N1cnJlbmN5KGEuY3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJfaXNfY3J5cHRvID0gIWJfaXNfbXQgJiYgaXNDcnlwdG9jdXJyZW5jeShiLmN1cnJlbmN5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhX2lzX2ZpYXQgPSAhYV9pc19tdCAmJiAhYV9pc19jcnlwdG87XG4gICAgICAgICAgICAgICAgY29uc3QgYl9pc19maWF0ID0gIWJfaXNfbXQgJiYgIWJfaXNfY3J5cHRvO1xuICAgICAgICAgICAgICAgIGlmIChhX2lzX210ICYmIGJfaXNfbXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubWFya2V0X3R5cGUgPT09ICdnYW1pbmcnIHx8IGEubWFya2V0X3R5cGUgPT09ICdzeW50aGV0aWMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGEuc3ViX2FjY291bnRfdHlwZSA9PT0gJ2ZpbmFuY2lhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLm1hcmtldF90eXBlID09PSAnZ2FtaW5nJyB8fCBiLm1hcmtldF90eXBlID09PSAnc3ludGhldGljJyA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChhX2lzX2NyeXB0byAmJiBiX2lzX2NyeXB0bykgfHwgKGFfaXNfZmlhdCAmJiBiX2lzX2ZpYXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmN1cnJlbmN5IDwgYi5jdXJyZW5jeSA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChhX2lzX2NyeXB0byAmJiBiX2lzX210KSB8fCAoYV9pc19maWF0ICYmIGJfaXNfY3J5cHRvKSB8fCAoYV9pc19maWF0ICYmIGJfaXNfbXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFfaXNfbXQgPyAtMSA6IDE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcnJfYWNjb3VudHMgPSBbXTtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFRvKHt9KTsgLy8gc2V0IHNlbGVjdGVkIHRvIGVtcHR5IGVhY2ggdGltZSBzbyB3ZSBjYW4gcmVkZXRlcm1pbmUgaXRzIHZhbHVlIG9uIHJlbG9hZFxuXG4gICAgICAgIGFjY291bnRzLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjZmRfcGxhdGZvcm1zID0ge1xuICAgICAgICAgICAgICAgIG10NTogeyBuYW1lOiAnRE1UNScsIGljb246ICdJY010NScgfSxcbiAgICAgICAgICAgICAgICBkeHRyYWRlOiB7IG5hbWU6ICdEZXJpdiBYJywgaWNvbjogJ0ljRHh0cmFkZScgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBpc19jZmQgPSBPYmplY3Qua2V5cyhjZmRfcGxhdGZvcm1zKS5pbmNsdWRlcyhhY2NvdW50LmFjY291bnRfdHlwZSk7XG4gICAgICAgICAgICBjb25zdCBjZmRfdGV4dF9kaXNwbGF5ID0gY2ZkX3BsYXRmb3Jtc1thY2NvdW50LmFjY291bnRfdHlwZV0/Lm5hbWU7XG4gICAgICAgICAgICBjb25zdCBjZmRfaWNvbl9kaXNwbGF5ID0gYCR7Y2ZkX3BsYXRmb3Jtc1thY2NvdW50LmFjY291bnRfdHlwZV0/Lmljb259LSR7Z2V0Q0ZEQWNjb3VudCh7XG4gICAgICAgICAgICAgICAgbWFya2V0X3R5cGU6IGFjY291bnQubWFya2V0X3R5cGUsXG4gICAgICAgICAgICAgICAgc3ViX2FjY291bnRfdHlwZTogYWNjb3VudC5zdWJfYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBhY2NvdW50LmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICBpc19ldTogdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19ldSxcbiAgICAgICAgICAgIH0pfWA7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50X3RleHRfZGlzcGxheSA9IGlzX2NmZFxuICAgICAgICAgICAgICAgID8gYCR7Y2ZkX3RleHRfZGlzcGxheX0gJHtnZXRDRkRBY2NvdW50RGlzcGxheSh7XG4gICAgICAgICAgICAgICAgICAgICAgbWFya2V0X3R5cGU6IGFjY291bnQubWFya2V0X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgc3ViX2FjY291bnRfdHlwZTogYWNjb3VudC5zdWJfYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBhY2NvdW50LmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICBpc19ldTogdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19ldSxcbiAgICAgICAgICAgICAgICAgIH0pfWBcbiAgICAgICAgICAgICAgICA6IGdldEN1cnJlbmN5RGlzcGxheUNvZGUoXG4gICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5jdXJyZW5jeSAhPT0gJ2VVU0RUJyA/IGFjY291bnQuY3VycmVuY3kudG9VcHBlckNhc2UoKSA6IGFjY291bnQuY3VycmVuY3lcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IG9ial92YWx1ZXMgPSB7XG4gICAgICAgICAgICAgICAgdGV4dDogYWNjb3VudF90ZXh0X2Rpc3BsYXksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGFjY291bnQubG9naW5pZCxcbiAgICAgICAgICAgICAgICBiYWxhbmNlOiBhY2NvdW50LmJhbGFuY2UsXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGFjY291bnQuY3VycmVuY3ksXG4gICAgICAgICAgICAgICAgaXNfY3J5cHRvOiBpc0NyeXB0b2N1cnJlbmN5KGFjY291bnQuY3VycmVuY3kpLFxuICAgICAgICAgICAgICAgIGlzX210OiBhY2NvdW50LmFjY291bnRfdHlwZSA9PT0gQ0ZEX1BMQVRGT1JNUy5NVDUsXG4gICAgICAgICAgICAgICAgaXNfZHh0cmFkZTogYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuRFhUUkFERSxcbiAgICAgICAgICAgICAgICAuLi4oaXNfY2ZkICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm1faWNvbjogY2ZkX2ljb25fZGlzcGxheSxcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0X3R5cGU6IGdldENGREFjY291bnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0X3R5cGU6IGFjY291bnQubWFya2V0X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJfYWNjb3VudF90eXBlOiBhY2NvdW50LnN1Yl9hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogYWNjb3VudC5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19ldTogdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19ldSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgbG9nZ2VkIGluIGNsaWVudCBhcyB0aGUgZGVmYXVsdCB0cmFuc2ZlciBmcm9tIGFjY291bnRcbiAgICAgICAgICAgIGlmIChhY2NvdW50LmxvZ2luaWQgPT09IHRoaXMucm9vdF9zdG9yZS5jbGllbnQubG9naW5pZCkge1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNlbGVjdGVkIGZyb20gaXMgbm90IGFsbG93ZWQgYWNjb3VudFxuICAgICAgICAgICAgICAgIGlmIChoYXNUcmFuc2Zlck5vdEFsbG93ZWRMb2dpbmlkKG9ial92YWx1ZXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9ial92YWx1ZXMuZXJyb3IgPSBnZXRTZWxlY3RlZEVycm9yKG9ial92YWx1ZXMudmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRGcm9tKG9ial92YWx1ZXMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0VtcHR5T2JqZWN0KHRoaXMuc2VsZWN0ZWRfdG8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1RyYW5zZmVyTm90QWxsb3dlZExvZ2luaWQob2JqX3ZhbHVlcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgc2VsZWN0ZWQgdG8gaXMgbm90IGFsbG93ZWQgYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICBvYmpfdmFsdWVzLmVycm9yID0gZ2V0U2VsZWN0ZWRFcnJvcihvYmpfdmFsdWVzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBmaXJzdCBhdmFpbGFibGUgYWNjb3VudCBhcyB0aGUgZGVmYXVsdCB0cmFuc2ZlciB0byBhY2NvdW50XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFRvKG9ial92YWx1ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJyX2FjY291bnRzLnB1c2gob2JqX3ZhbHVlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldEFjY291bnRzKGFycl9hY2NvdW50cyk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFNlbGVjdGVkRnJvbShvYmpfdmFsdWVzKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfZnJvbSA9IG9ial92YWx1ZXM7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFNlbGVjdGVkVG8ob2JqX3ZhbHVlcykge1xuICAgICAgICB0aGlzLnNlbGVjdGVkX3RvID0gb2JqX3ZhbHVlcztcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0QWNjb3VudHMoYXJyX2FjY291bnRzKSB7XG4gICAgICAgIHRoaXMuYWNjb3VudHNfbGlzdCA9IGFycl9hY2NvdW50cztcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNUcmFuc2ZlckNvbmZpcm0oaXNfdHJhbnNmZXJfY29uZmlybSkge1xuICAgICAgICB0aGlzLmlzX3RyYW5zZmVyX2NvbmZpcm0gPSBpc190cmFuc2Zlcl9jb25maXJtO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRBY2NvdW50VHJhbnNmZXJBbW91bnQoYW1vdW50KSB7XG4gICAgICAgIHRoaXMuYWNjb3VudF90cmFuc2Zlcl9hbW91bnQgPSBhbW91bnQ7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldElzVHJhbnNmZXJTdWNjZXNzZnVsKGlzX3RyYW5zZmVyX3N1Y2Nlc3NmdWwpIHtcbiAgICAgICAgdGhpcy5pc190cmFuc2Zlcl9zdWNjZXNzZnVsID0gaXNfdHJhbnNmZXJfc3VjY2Vzc2Z1bDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNNVDVUcmFuc2ZlckluUHJvZ3Jlc3MoaXNfbXQ1X3RyYW5zZmVyX2luX3Byb2dyZXNzKSB7XG4gICAgICAgIHRoaXMuaXNfbXQ1X3RyYW5zZmVyX2luX3Byb2dyZXNzID0gaXNfbXQ1X3RyYW5zZmVyX2luX3Byb2dyZXNzO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRSZWNlaXB0VHJhbnNmZXIoeyBhbW91bnQgfSkge1xuICAgICAgICB0aGlzLnJlY2VpcHQgPSB7XG4gICAgICAgICAgICBhbW91bnRfdHJhbnNmZXJyZWQ6IGFtb3VudCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25DaGFuZ2VUcmFuc2ZlckZyb20oeyB0YXJnZXQgfSkge1xuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfZnJvbS5lcnJvciA9ICcnO1xuXG4gICAgICAgIGNvbnN0IGFjY291bnRzID0gdGhpcy5hY2NvdW50c19saXN0O1xuICAgICAgICBjb25zdCBzZWxlY3RlZF9mcm9tID0gYWNjb3VudHMuZmluZChhY2NvdW50ID0+IGFjY291bnQudmFsdWUgPT09IHRhcmdldC52YWx1ZSk7XG5cbiAgICAgICAgLy8gaWYgbmV3IHZhbHVlIG9mIHNlbGVjdGVkX2Zyb20gaXMgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQgc2VsZWN0ZWRfdG9cbiAgICAgICAgLy8gc3dpdGNoIHRoZSB2YWx1ZSBvZiBzZWxlY3RlZF9mcm9tIGFuZCBzZWxlY3RlZF90b1xuICAgICAgICBpZiAoc2VsZWN0ZWRfZnJvbS52YWx1ZSA9PT0gdGhpcy5zZWxlY3RlZF90by52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZVRyYW5zZmVyVG8oeyB0YXJnZXQ6IHsgdmFsdWU6IHRoaXMuc2VsZWN0ZWRfZnJvbS52YWx1ZSB9IH0pO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgKHNlbGVjdGVkX2Zyb20uaXNfbXQgJiYgdGhpcy5zZWxlY3RlZF90by5pc19tdCkgfHxcbiAgICAgICAgICAgIChzZWxlY3RlZF9mcm9tLmlzX2R4dHJhZGUgJiYgdGhpcy5zZWxlY3RlZF90by5pc19keHRyYWRlKSB8fFxuICAgICAgICAgICAgKHNlbGVjdGVkX2Zyb20uaXNfZHh0cmFkZSAmJiB0aGlzLnNlbGVjdGVkX3RvLmlzX210KSB8fFxuICAgICAgICAgICAgKHNlbGVjdGVkX2Zyb20uaXNfbXQgJiYgdGhpcy5zZWxlY3RlZF90by5pc19keHRyYWRlKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIG5vdCBhbGxvd2VkIHRvIHRyYW5zZmVyIGZyb20gTVQgdG8gTVRcbiAgICAgICAgICAgIC8vIG5vdCBhbGxvd2VkIHRvIHRyYW5zZmVyIGZyb20gRHh0cmFkZSB0byBEeHRyYWRlXG4gICAgICAgICAgICAvLyBub3QgYWxsb3dlZCB0byB0cmFuc2ZlciBiZXR3ZWVuIE1UIGFuZCBEeHRyYWRlXG4gICAgICAgICAgICBjb25zdCBmaXJzdF9ub25fY2ZkID0gdGhpcy5hY2NvdW50c19saXN0LmZpbmQoYWNjb3VudCA9PiAhYWNjb3VudC5pc19tdCAmJiAhYWNjb3VudC5pc19keHRyYWRlKTtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2VUcmFuc2ZlclRvKHsgdGFyZ2V0OiB7IHZhbHVlOiBmaXJzdF9ub25fY2ZkLnZhbHVlIH0gfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVHJhbnNmZXJOb3RBbGxvd2VkTG9naW5pZChzZWxlY3RlZF9mcm9tLnZhbHVlKSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRfZnJvbS5lcnJvciA9IGdldFNlbGVjdGVkRXJyb3Ioc2VsZWN0ZWRfZnJvbS52YWx1ZSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlbGVjdGVkX2Zyb20gPSBzZWxlY3RlZF9mcm9tO1xuICAgICAgICB0aGlzLnNldFRyYW5zZmVyRmVlKCk7XG4gICAgICAgIHRoaXMuc2V0TWluaW11bUZlZSgpO1xuICAgICAgICB0aGlzLnNldFRyYW5zZmVyTGltaXQoKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25DaGFuZ2VUcmFuc2ZlclRvKHsgdGFyZ2V0IH0pIHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkX3RvLmVycm9yID0gJyc7XG5cbiAgICAgICAgY29uc3QgYWNjb3VudHMgPSB0aGlzLmFjY291bnRzX2xpc3Q7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfdG8gPSBhY2NvdW50cy5maW5kKGFjY291bnQgPT4gYWNjb3VudC52YWx1ZSA9PT0gdGFyZ2V0LnZhbHVlKSB8fCB7fTtcbiAgICAgICAgaWYgKGhhc1RyYW5zZmVyTm90QWxsb3dlZExvZ2luaWQodGhpcy5zZWxlY3RlZF90by52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfdG8uZXJyb3IgPSBnZXRTZWxlY3RlZEVycm9yKHRoaXMuc2VsZWN0ZWRfdG8udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0VHJhbnNmZXJGZWUoKTtcbiAgICAgICAgdGhpcy5zZXRNaW5pbXVtRmVlKCk7XG4gICAgICAgIHRoaXMuc2V0VHJhbnNmZXJMaW1pdCgpO1xuICAgIH1cblxuICAgIHJlcXVlc3RUcmFuc2ZlckJldHdlZW5BY2NvdW50cyA9IGFzeW5jICh7IGFtb3VudCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgc2V0TG9hZGluZyB9ID0gbW9kdWxlcy5jYXNoaWVyLmdlbmVyYWxfc3RvcmU7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGlzX2xvZ2dlZF9pbixcbiAgICAgICAgICAgIHJlc3BvbnNlTXQ1TG9naW5MaXN0LFxuICAgICAgICAgICAgcmVzcG9uc2VUcmFkaW5nUGxhdGZvcm1BY2NvdW50c0xpc3QsXG4gICAgICAgICAgICBzZXRBY2NvdW50U3RhdHVzLFxuICAgICAgICAgICAgc2V0QmFsYW5jZU90aGVyQWNjb3VudHMsXG4gICAgICAgIH0gPSBjbGllbnQ7XG5cbiAgICAgICAgaWYgKCFpc19sb2dnZWRfaW4pIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuXG4gICAgICAgIGNvbnN0IGlzX210X3RyYW5zZmVyID0gdGhpcy5zZWxlY3RlZF9mcm9tLmlzX210IHx8IHRoaXMuc2VsZWN0ZWRfdG8uaXNfbXQ7XG5cbiAgICAgICAgaWYgKGlzX210X3RyYW5zZmVyKSB0aGlzLnNldElzTVQ1VHJhbnNmZXJJblByb2dyZXNzKHRydWUpO1xuXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5ID0gdGhpcy5zZWxlY3RlZF9mcm9tLmN1cnJlbmN5O1xuICAgICAgICBjb25zdCB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnRyYW5zZmVyQmV0d2VlbkFjY291bnRzKFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9mcm9tLnZhbHVlLFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF90by52YWx1ZSxcbiAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgYW1vdW50XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGlzX210X3RyYW5zZmVyKSB0aGlzLnNldElzTVQ1VHJhbnNmZXJJblByb2dyZXNzKGZhbHNlKTtcblxuICAgICAgICBpZiAodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5lcnJvcikge1xuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgZmlhdDJjcnlwdG8gdHJhbnNmZXIgbGltaXQgZXJyb3IsIHdlIG5lZWQgdG8gcmVmcmVzaCB0aGUgYWNjb3VudF9zdGF0dXMgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICBpZiAodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5lcnJvci5jb2RlID09PSAnRmlhdDJDcnlwdG9UcmFuc2Zlck92ZXJMaW1pdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50X3N0YXR1c19yZXNwb25zZSA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5nZXRBY2NvdW50U3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFhY2NvdW50X3N0YXR1c19yZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBzZXRBY2NvdW50U3RhdHVzKGFjY291bnRfc3RhdHVzX3Jlc3BvbnNlLmdldF9hY2NvdW50X3N0YXR1cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5lcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlY2VpcHRUcmFuc2Zlcih7IGFtb3VudDogZm9ybWF0TW9uZXkoY3VycmVuY3ksIGFtb3VudCwgdHJ1ZSkgfSk7XG4gICAgICAgICAgICB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmFjY291bnRzLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCYWxhbmNlQnlMb2dpbklkKGFjY291bnQubG9naW5pZCwgYWNjb3VudC5iYWxhbmNlKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudC5sb2dpbmlkID09PSB0aGlzLnNlbGVjdGVkX2Zyb20udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRCYWxhbmNlU2VsZWN0ZWRGcm9tKGFjY291bnQuYmFsYW5jZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY2NvdW50LmxvZ2luaWQgPT09IHRoaXMuc2VsZWN0ZWRfdG8udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRCYWxhbmNlU2VsZWN0ZWRUbyhhY2NvdW50LmJhbGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiBvbmUgb2YgdGhlIGFjY291bnRzIHdhcyBtdDVcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuTVQ1KSB7XG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFt0aGlzLldTLm10NUxvZ2luTGlzdCgpLCB0aGlzLldTLmJhbGFuY2VBbGwoKV0pLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAoW210NV9sb2dpbl9saXN0X3Jlc3BvbnNlLCBiYWxhbmNlX3Jlc3BvbnNlXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgYmFsYW5jZSBmb3IgYWNjb3VudCBzd2l0Y2hlciBieSByZW5ld2luZyB0aGUgbXQ1X2xvZ2luX2xpc3QgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZU10NUxvZ2luTGlzdChtdDVfbG9naW5fbGlzdF9yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRvdGFsIGJhbGFuY2Ugc2luY2UgTVQ1IHRvdGFsIG9ubHkgY29tZXMgaW4gbm9uLXN0cmVhbSBiYWxhbmNlIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCYWxhbmNlT3RoZXJBY2NvdW50cyhiYWxhbmNlX3Jlc3BvbnNlLmJhbGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiBvbmUgb2YgdGhlIGFjY291bnRzIHdhcyBkeHRyYWRlXG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnQuYWNjb3VudF90eXBlID09PSBDRkRfUExBVEZPUk1TLkRYVFJBREUpIHtcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5XUy50cmFkaW5nUGxhdGZvcm1BY2NvdW50c0xpc3QoQ0ZEX1BMQVRGT1JNUy5EWFRSQURFKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuV1MuYmFsYW5jZUFsbCgpLFxuICAgICAgICAgICAgICAgICAgICBdKS50aGVuKChbZHh0cmFkZV9sb2dpbl9saXN0X3Jlc3BvbnNlLCBiYWxhbmNlX3Jlc3BvbnNlXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBiYWxhbmNlIGZvciBhY2NvdW50IHN3aXRjaGVyIGJ5IHJlbmV3aW5nIHRoZSBkeHRyYWRlX2xvZ2luX2xpc3RfcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHJhZGluZ1BsYXRmb3JtQWNjb3VudHNMaXN0KGR4dHJhZGVfbG9naW5fbGlzdF9yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdG90YWwgYmFsYW5jZSBzaW5jZSBEeHRyYWRlIHRvdGFsIG9ubHkgY29tZXMgaW4gbm9uLXN0cmVhbSBiYWxhbmNlIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJhbGFuY2VPdGhlckFjY291bnRzKGJhbGFuY2VfcmVzcG9uc2UuYmFsYW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRBY2NvdW50VHJhbnNmZXJBbW91bnQobnVsbCk7XG4gICAgICAgICAgICB0aGlzLnNldElzVHJhbnNmZXJDb25maXJtKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cztcbiAgICB9O1xuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHJlc2V0QWNjb3VudFRyYW5zZmVyID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLnNldElzVHJhbnNmZXJDb25maXJtKGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRUcmFuc2ZlckxpbWl0KCk7XG4gICAgfTtcblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRUcmFuc2ZlclBlcmNlbnRhZ2VTZWxlY3RvclJlc3VsdChhbW91bnQpIHtcbiAgICAgICAgY29uc3QgeyBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIsIGdlbmVyYWxfc3RvcmUgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRfZnJvbV9jdXJyZW5jeSA9IHRoaXMuc2VsZWN0ZWRfZnJvbS5jdXJyZW5jeTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRfdG9fY3VycmVuY3kgPSB0aGlzLnNlbGVjdGVkX3RvLmN1cnJlbmN5O1xuXG4gICAgICAgIGlmIChhbW91bnQgPiAwIHx8ICt0aGlzLnNlbGVjdGVkX2Zyb20uYmFsYW5jZSA9PT0gMCkge1xuICAgICAgICAgICAgY3J5cHRvX2ZpYXRfY29udmVydGVyLnNldENvbnZlcnRlckZyb21BbW91bnQoYW1vdW50KTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVUcmFuc2ZlckZyb21BbW91bnQoKTtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5vbkNoYW5nZUNvbnZlcnRlckZyb21BbW91bnQoXG4gICAgICAgICAgICAgICAgeyB0YXJnZXQ6IHsgdmFsdWU6IGFtb3VudCB9IH0sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRfZnJvbV9jdXJyZW5jeSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZF90b19jdXJyZW5jeVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICgrdGhpcy5zZWxlY3RlZF9mcm9tLmJhbGFuY2UgPT09IDApIHtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KGFtb3VudCk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlVHJhbnNmZXJGcm9tQW1vdW50KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIucmVzZXRDb252ZXJ0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIuc2V0SXNUaW1lclZpc2libGUoZmFsc2UpO1xuICAgICAgICBnZW5lcmFsX3N0b3JlLnBlcmNlbnRhZ2VTZWxlY3RvclNlbGVjdGlvblN0YXR1cyhmYWxzZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHZhbGlkYXRlVHJhbnNmZXJGcm9tQW1vdW50KCkge1xuICAgICAgICBjb25zdCB7IGNvbnZlcnRlcl9mcm9tX2Ftb3VudCwgc2V0Q29udmVydGVyRnJvbUVycm9yIH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyLmNyeXB0b19maWF0X2NvbnZlcnRlcjtcblxuICAgICAgICBpZiAoIWNvbnZlcnRlcl9mcm9tX2Ftb3VudCkge1xuICAgICAgICAgICAgc2V0Q29udmVydGVyRnJvbUVycm9yKGxvY2FsaXplKCdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXNfb2ssIG1lc3NhZ2UgfSA9IHZhbGlkTnVtYmVyKGNvbnZlcnRlcl9mcm9tX2Ftb3VudCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgZGVjaW1hbHM6IGdldERlY2ltYWxQbGFjZXModGhpcy5zZWxlY3RlZF9mcm9tLmN1cnJlbmN5KSxcbiAgICAgICAgICAgICAgICBtaW46IHRoaXMudHJhbnNmZXJfbGltaXQubWluLFxuICAgICAgICAgICAgICAgIG1heDogdGhpcy50cmFuc2Zlcl9saW1pdC5tYXgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghaXNfb2spIHtcbiAgICAgICAgICAgICAgICBzZXRDb252ZXJ0ZXJGcm9tRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCt0aGlzLnNlbGVjdGVkX2Zyb20uYmFsYW5jZSA8ICtjb252ZXJ0ZXJfZnJvbV9hbW91bnQpIHtcbiAgICAgICAgICAgICAgICBzZXRDb252ZXJ0ZXJGcm9tRXJyb3IobG9jYWxpemUoJ0luc3VmZmljaWVudCBmdW5kcycpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0Q29udmVydGVyRnJvbUVycm9yKCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICB2YWxpZGF0ZVRyYW5zZmVyVG9BbW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udmVydGVyX3RvX2Ftb3VudCwgc2V0Q29udmVydGVyVG9FcnJvciB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllci5jcnlwdG9fZmlhdF9jb252ZXJ0ZXI7XG5cbiAgICAgICAgaWYgKGNvbnZlcnRlcl90b19hbW91bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbmN5ID0gdGhpcy5zZWxlY3RlZF90by5jdXJyZW5jeTtcbiAgICAgICAgICAgIGNvbnN0IHsgaXNfb2ssIG1lc3NhZ2UgfSA9IHZhbGlkTnVtYmVyKGNvbnZlcnRlcl90b19hbW91bnQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgIGRlY2ltYWxzOiBnZXREZWNpbWFsUGxhY2VzKGN1cnJlbmN5KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpc19vaykge1xuICAgICAgICAgICAgICAgIHNldENvbnZlcnRlclRvRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldENvbnZlcnRlclRvRXJyb3IoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBvYnNlcnZhYmxlIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBnZXREZWNpbWFsUGxhY2VzIH0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyeXB0b0ZpYXRDb252ZXJ0ZXJTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoeyBXUywgcm9vdF9zdG9yZSB9KSB7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG4gICAgICAgIHRoaXMuV1MgPSBXUztcbiAgICB9XG5cbiAgICBAb2JzZXJ2YWJsZSBjb252ZXJ0ZXJfZnJvbV9hbW91bnQgPSAnJztcbiAgICBAb2JzZXJ2YWJsZSBjb252ZXJ0ZXJfdG9fYW1vdW50ID0gJyc7XG4gICAgQG9ic2VydmFibGUgY29udmVydGVyX2Zyb21fZXJyb3IgPSAnJztcbiAgICBAb2JzZXJ2YWJsZSBjb252ZXJ0ZXJfdG9fZXJyb3IgPSAnJztcbiAgICBAb2JzZXJ2YWJsZSBpc190aW1lcl92aXNpYmxlID0gZmFsc2U7XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0Q29udmVydGVyRnJvbUFtb3VudChhbW91bnQpIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXJfZnJvbV9hbW91bnQgPSBhbW91bnQ7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldENvbnZlcnRlclRvQW1vdW50KGFtb3VudCkge1xuICAgICAgICB0aGlzLmNvbnZlcnRlcl90b19hbW91bnQgPSBhbW91bnQ7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldENvbnZlcnRlckZyb21FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlcl9mcm9tX2Vycm9yID0gZXJyb3I7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldENvbnZlcnRlclRvRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXJfdG9fZXJyb3IgPSBlcnJvcjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNUaW1lclZpc2libGUoaXNfdGltZXJfdmlzaWJsZSkge1xuICAgICAgICB0aGlzLmlzX3RpbWVyX3Zpc2libGUgPSBpc190aW1lcl92aXNpYmxlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICByZXNldFRpbWVyKCkge1xuICAgICAgICB0aGlzLnNldElzVGltZXJWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgZ2V0RXhjaGFuZ2VSYXRlKGZyb21fY3VycmVuY3ksIHRvX2N1cnJlbmN5KSB7XG4gICAgICAgIGNvbnN0IHsgZXhjaGFuZ2VfcmF0ZXMgfSA9IGF3YWl0IHRoaXMuV1Muc2VuZCh7XG4gICAgICAgICAgICBleGNoYW5nZV9yYXRlczogMSxcbiAgICAgICAgICAgIGJhc2VfY3VycmVuY3k6IGZyb21fY3VycmVuY3ksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZXhjaGFuZ2VfcmF0ZXMucmF0ZXNbdG9fY3VycmVuY3ldO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICB2YWxpZGF0ZUZyb21BbW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHsgYWNjb3VudF90cmFuc2ZlciwgZ2VuZXJhbF9zdG9yZSwgd2l0aGRyYXcgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgaWYgKGdlbmVyYWxfc3RvcmUuYWN0aXZlX2NvbnRhaW5lciA9PT0gYWNjb3VudF90cmFuc2Zlci5jb250YWluZXIpIHtcbiAgICAgICAgICAgIGFjY291bnRfdHJhbnNmZXIudmFsaWRhdGVUcmFuc2ZlckZyb21BbW91bnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpdGhkcmF3LnZhbGlkYXRlV2l0aGRyYXdGcm9tQW1vdW50KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgdmFsaWRhdGVUb0Ftb3VudCgpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3RyYW5zZmVyLCBnZW5lcmFsX3N0b3JlLCB3aXRoZHJhdyB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllcjtcblxuICAgICAgICBpZiAoZ2VuZXJhbF9zdG9yZS5hY3RpdmVfY29udGFpbmVyID09PSBhY2NvdW50X3RyYW5zZmVyLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci52YWxpZGF0ZVRyYW5zZmVyVG9BbW91bnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpdGhkcmF3LnZhbGlkYXRlV2l0aGRyYXdUb0Ftb3VudCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIG9uQ2hhbmdlQ29udmVydGVyRnJvbUFtb3VudCh7IHRhcmdldCB9LCBmcm9tX2N1cnJlbmN5LCB0b19jdXJyZW5jeSkge1xuICAgICAgICBjb25zdCB7IGFjY291bnRfdHJhbnNmZXIsIGdlbmVyYWxfc3RvcmUgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgdGhpcy5yZXNldFRpbWVyKCk7XG4gICAgICAgIGlmICh0YXJnZXQudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyRnJvbUFtb3VudCh0YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUZyb21BbW91bnQoKTtcbiAgICAgICAgICAgIGdlbmVyYWxfc3RvcmUucGVyY2VudGFnZVNlbGVjdG9yU2VsZWN0aW9uU3RhdHVzKHRydWUpO1xuICAgICAgICAgICAgZ2VuZXJhbF9zdG9yZS5jYWxjdWxhdGVQZXJjZW50YWdlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb252ZXJ0ZXJfZnJvbV9lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyVG9BbW91bnQoJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyVG9FcnJvcignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc1RpbWVyVmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci5zZXRBY2NvdW50VHJhbnNmZXJBbW91bnQoJycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXRlID0gYXdhaXQgdGhpcy5nZXRFeGNoYW5nZVJhdGUoZnJvbV9jdXJyZW5jeSwgdG9fY3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY2ltYWxzID0gZ2V0RGVjaW1hbFBsYWNlcyh0b19jdXJyZW5jeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gKHJhdGUgKiB0YXJnZXQudmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuICAgICAgICAgICAgICAgIGlmICgrYW1vdW50IHx8IHRoaXMuY29udmVydGVyX2Zyb21fYW1vdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyVG9BbW91bnQoYW1vdW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnZlcnRlclRvQW1vdW50KCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVRvQW1vdW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Vycm9yKCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzVGltZXJWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgIGFjY291bnRfdHJhbnNmZXIuc2V0QWNjb3VudFRyYW5zZmVyQW1vdW50KHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0Q29udmVydGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgb25DaGFuZ2VDb252ZXJ0ZXJUb0Ftb3VudCh7IHRhcmdldCB9LCBmcm9tX2N1cnJlbmN5LCB0b19jdXJyZW5jeSkge1xuICAgICAgICBjb25zdCB7IGFjY291bnRfdHJhbnNmZXIsIGdlbmVyYWxfc3RvcmUgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgdGhpcy5yZXNldFRpbWVyKCk7XG4gICAgICAgIGlmICh0YXJnZXQudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyVG9BbW91bnQodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVUb0Ftb3VudCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udmVydGVyX3RvX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbnZlcnRlckZyb21FcnJvcignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc1RpbWVyVmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci5zZXRBY2NvdW50VHJhbnNmZXJBbW91bnQoJycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXRlID0gYXdhaXQgdGhpcy5nZXRFeGNoYW5nZVJhdGUoZnJvbV9jdXJyZW5jeSwgdG9fY3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY2ltYWxzID0gZ2V0RGVjaW1hbFBsYWNlcyh0b19jdXJyZW5jeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gKHJhdGUgKiB0YXJnZXQudmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuICAgICAgICAgICAgICAgIGlmICgrYW1vdW50IHx8IHRoaXMuY29udmVydGVyX3RvX2Ftb3VudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnZlcnRlckZyb21BbW91bnQoYW1vdW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnZlcnRlckZyb21BbW91bnQoJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnZW5lcmFsX3N0b3JlLnBlcmNlbnRhZ2VTZWxlY3RvclNlbGVjdGlvblN0YXR1cyh0cnVlKTtcbiAgICAgICAgICAgICAgICBnZW5lcmFsX3N0b3JlLmNhbGN1bGF0ZVBlcmNlbnRhZ2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRnJvbUFtb3VudCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnZlcnRlcl9mcm9tX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNUaW1lclZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50X3RyYW5zZmVyLnNldEFjY291bnRUcmFuc2ZlckFtb3VudCgnJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tRXJyb3IoJycpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldElzVGltZXJWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50X3RyYW5zZmVyLnNldEFjY291bnRUcmFuc2ZlckFtb3VudChhbW91bnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRDb252ZXJ0ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICByZXNldENvbnZlcnRlcigpIHtcbiAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KCcnKTtcbiAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Ftb3VudCgnJyk7XG4gICAgICAgIHRoaXMuc2V0Q29udmVydGVyRnJvbUVycm9yKCcnKTtcbiAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Vycm9yKCcnKTtcbiAgICAgICAgdGhpcy5zZXRJc1RpbWVyVmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZS5wZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXModHJ1ZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBjb21wdXRlZCwgb2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZXBvc2l0U3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHsgV1MsIHJvb3Rfc3RvcmUgfSkge1xuICAgICAgICB0aGlzLnJvb3Rfc3RvcmUgPSByb290X3N0b3JlO1xuICAgICAgICB0aGlzLldTID0gV1M7XG4gICAgfVxuXG4gICAgQG9ic2VydmFibGUgY29udGFpbmVyID0gQ29uc3RhbnRzLmNvbnRhaW5lcnMuZGVwb3NpdDtcbiAgICBAb2JzZXJ2YWJsZSBlcnJvciA9IG5ldyBFcnJvclN0b3JlKCk7XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgb25Nb3VudERlcG9zaXQoKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgYWN0aXZlX2NvbnRhaW5lciwgaXNfY3J5cHRvLCBvbk1vdW50Q29tbW9uLCBzZXRMb2FkaW5nLCBzZXRPblJlbW91bnQgfSA9IG1vZHVsZXMuY2FzaGllci5nZW5lcmFsX3N0b3JlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjaGVja0lmcmFtZUxvYWRlZCxcbiAgICAgICAgICAgIGNsZWFyVGltZW91dENhc2hpZXJVcmwsXG4gICAgICAgICAgICBpc19zZXNzaW9uX3RpbWVvdXQsXG4gICAgICAgICAgICBzZXRDb250YWluZXJIZWlnaHQsXG4gICAgICAgICAgICBzZXRJZnJhbWVVcmwsXG4gICAgICAgICAgICBzZXRTZXNzaW9uVGltZW91dCxcbiAgICAgICAgICAgIHNldFRpbWVvdXRDYXNoaWVyVXJsLFxuICAgICAgICB9ID0gbW9kdWxlcy5jYXNoaWVyLmlmcmFtZTtcbiAgICAgICAgY29uc3QgeyBpc192aXJ0dWFsIH0gPSBjbGllbnQ7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29udGFpbmVyID0gYWN0aXZlX2NvbnRhaW5lcjtcblxuICAgICAgICBzZXRPblJlbW91bnQodGhpcy5vbk1vdW50RGVwb3NpdCk7XG4gICAgICAgIGF3YWl0IG9uTW91bnRDb21tb24oKTtcblxuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgICAgIHNldENvbnRhaW5lckhlaWdodCgwKTtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcblxuICAgICAgICBpZiAoIWlzX3Nlc3Npb25fdGltZW91dCkge1xuICAgICAgICAgICAgY2hlY2tJZnJhbWVMb2FkZWQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHNlc3Npb24gaGFzIHRpbWVkIG91dCByZXNldCBldmVyeXRoaW5nXG4gICAgICAgIHNldElmcmFtZVVybCgnJyk7XG4gICAgICAgIGlmIChpc192aXJ0dWFsKSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIC8vIGlmIHZpcnR1YWwsIGNsZWFyIGV2ZXJ5dGhpbmcgYW5kIGRvbid0IHByb2NlZWQgZnVydGhlclxuICAgICAgICAgICAgLy8gaWYgbm8gdmVyaWZpY2F0aW9uIGNvZGUsIHdlIHNob3VsZCByZXF1ZXN0IGFnYWluXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzX2NyeXB0bykge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VfY2FzaGllciA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5jYXNoaWVyKGFjdGl2ZV9jb250YWluZXIsIHtcbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25fY29kZTogJ3VuZGVmaW5lZCcsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gaWYgdGFiIGNoYW5nZWQgd2hpbGUgd2FpdGluZyBmb3IgcmVzcG9uc2UsIGlnbm9yZSBpdFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRfY29udGFpbmVyICE9PSBhY3RpdmVfY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlX2Nhc2hpZXIuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yLmhhbmRsZUNhc2hpZXJFcnJvcihyZXNwb25zZV9jYXNoaWVyLmVycm9yKTtcbiAgICAgICAgICAgICAgICBzZXRTZXNzaW9uVGltZW91dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXRDYXNoaWVyVXJsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNoZWNrSWZyYW1lTG9hZGVkKCk7XG4gICAgICAgICAgICAgICAgc2V0SWZyYW1lVXJsKHJlc3BvbnNlX2Nhc2hpZXIuY2FzaGllcik7XG4gICAgICAgICAgICAgICAgc2V0U2Vzc2lvblRpbWVvdXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXRDYXNoaWVyVXJsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuXG4gICAgQGNvbXB1dGVkXG4gICAgZ2V0IGlzX2RlcG9zaXRfbG9ja2VkKCkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpc19hdXRoZW50aWNhdGlvbl9uZWVkZWQsXG4gICAgICAgICAgICBpc190bmNfbmVlZGVkLFxuICAgICAgICAgICAgaXNfZmluYW5jaWFsX2FjY291bnQsXG4gICAgICAgICAgICBpc19maW5hbmNpYWxfaW5mb3JtYXRpb25faW5jb21wbGV0ZSxcbiAgICAgICAgICAgIGlzX3RyYWRpbmdfZXhwZXJpZW5jZV9pbmNvbXBsZXRlLFxuICAgICAgICAgICAgYWNjb3VudF9zdGF0dXMsXG4gICAgICAgICAgICBpc19ldSxcbiAgICAgICAgICAgIG10NV9sb2dpbl9saXN0LFxuICAgICAgICAgICAgaXNfZGVwb3NpdF9sb2NrLFxuICAgICAgICB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcbiAgICAgICAgaWYgKCFhY2NvdW50X3N0YXR1cz8uc3RhdHVzKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgbmVlZF9hdXRoZW50aWNhdGlvbiA9IHRoaXMuZXJyb3IuaXNfYXNrX2F1dGhlbnRpY2F0aW9uIHx8IChpc19hdXRoZW50aWNhdGlvbl9uZWVkZWQgJiYgaXNfZXUpO1xuICAgICAgICBjb25zdCBuZWVkX2ZpbmFuY2lhbF9hc3Nlc3NtZW50ID1cbiAgICAgICAgICAgIGlzX2ZpbmFuY2lhbF9hY2NvdW50ICYmIChpc19maW5hbmNpYWxfaW5mb3JtYXRpb25faW5jb21wbGV0ZSB8fCBpc190cmFkaW5nX2V4cGVyaWVuY2VfaW5jb21wbGV0ZSk7XG4gICAgICAgIC8vIENSIGNhbiBkZXBvc2l0IHdpdGhvdXQgYWNjZXB0aW5nIGxhdGVzdCB0bmMgZXhjZXB0IHRob3NlIHdpdGggRmluYW5jaWFsIFNUUFxuICAgICAgICBjb25zdCBuZWVkX3RuYyA9XG4gICAgICAgICAgICAoaXNfZXUgfHxcbiAgICAgICAgICAgICAgICBtdDVfbG9naW5fbGlzdC5zb21lKFxuICAgICAgICAgICAgICAgICAgICBpdGVtID0+IGl0ZW0uYWNjb3VudF90eXBlID09PSAncmVhbCcgJiYgaXRlbS5zdWJfYWNjb3VudF90eXBlID09PSAnZmluYW5jaWFsX3N0cCdcbiAgICAgICAgICAgICAgICApKSAmJlxuICAgICAgICAgICAgaXNfdG5jX25lZWRlZDtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgaXNfZGVwb3NpdF9sb2NrIHx8XG4gICAgICAgICAgICBuZWVkX2F1dGhlbnRpY2F0aW9uIHx8XG4gICAgICAgICAgICBuZWVkX3RuYyB8fFxuICAgICAgICAgICAgbmVlZF9maW5hbmNpYWxfYXNzZXNzbWVudCB8fFxuICAgICAgICAgICAgdGhpcy5lcnJvci5pc19hc2tfZmluYW5jaWFsX3Jpc2tfYXBwcm92YWxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc3VibWl0RnVuZHNQcm90ZWN0aW9uKCkge1xuICAgICAgICB0aGlzLldTLnNlbmQoeyB1a2djX2Z1bmRzX3Byb3RlY3Rpb246IDEsIHRuY19hcHByb3ZhbDogMSB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3Iuc2V0TWVzc2FnZShyZXNwb25zZS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG9ic2VydmFibGUsIGFjdGlvbiB9IGZyb20gJ21vYngnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcnJvckRpYWxvZ1N0b3JlIHtcbiAgICBAb2JzZXJ2YWJsZSBjb25maXJtX2J1dHRvbl90ZXh0ID0gJyc7XG4gICAgQG9ic2VydmFibGUgZXJyb3JfbWVzc2FnZSA9ICcnO1xuICAgIEBvYnNlcnZhYmxlIGhhc19ub19jbG9zZV9pY29uID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgc2hvdWxkX3Nob3cgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBzaG91bGRfbm90X3Nob3dfdGl0bGUgPSBmYWxzZTtcblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRTaG91bGRTaG93KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2hvdWxkX3Nob3cgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0RXJyb3JNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5lcnJvcl9tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5zZXRTaG91bGRTaG93KHRydWUpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRDb25maXJtQnV0dG9uVGV4dCh0ZXh0KSB7XG4gICAgICAgIHRoaXMuY29uZmlybV9idXR0b25fdGV4dCA9IHRleHQ7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFNob3VsZE5vdFNob3dUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNob3VsZF9ub3Rfc2hvd190aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRIYXNOb0Nsb3NlSWNvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmhhc19ub19jbG9zZV9pY29uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIG9wZW5SZWFkTW9yZURpYWxvZyhlcnJvcl9jb250ZW50LCBjb25maXJtX2J1dHRvbl90ZXh0KSB7XG4gICAgICAgIHRoaXMuc2V0RXJyb3JNZXNzYWdlKGVycm9yX2NvbnRlbnQpO1xuICAgICAgICB0aGlzLnNldENvbmZpcm1CdXR0b25UZXh0KGNvbmZpcm1fYnV0dG9uX3RleHQpO1xuICAgICAgICB0aGlzLnNldEhhc05vQ2xvc2VJY29uKHRydWUpO1xuICAgICAgICB0aGlzLnNldFNob3VsZE5vdFNob3dUaXRsZSh0cnVlKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2V0Q29uZmlybUJ1dHRvblRleHQoJycpO1xuICAgICAgICB0aGlzLnNldFNob3VsZE5vdFNob3dUaXRsZShmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0SGFzTm9DbG9zZUljb24oZmFsc2UpO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgSWNvbiwgQ291bnRlciB9IGZyb20gJ0BkZXJpdi9jb21wb25lbnRzJztcblxuY29uc3QgQ2FzaGllck5vdGlmaWNhdGlvbnMgPSAoeyBwMnBfbm90aWZpY2F0aW9uX2NvdW50IH0pID0+IChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgIDxJY29uIGljb249J0ljQ2FzaGllcicgY2xhc3NOYW1lPSdoZWFkZXJfX2ljb24nIC8+XG4gICAgICAgIHshIXAycF9ub3RpZmljYXRpb25fY291bnQgJiYgPENvdW50ZXIgY2xhc3NOYW1lPSdjYXNoaWVyX19jb3VudGVyJyBjb3VudD17cDJwX25vdGlmaWNhdGlvbl9jb3VudH0gLz59XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbik7XG5cbkNhc2hpZXJOb3RpZmljYXRpb25zLnByb3BUeXBlcyA9IHtcbiAgICBwMnBfbm90aWZpY2F0aW9uX2NvdW50OiBQcm9wVHlwZXMubnVtYmVyLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FzaGllck5vdGlmaWNhdGlvbnM7XG4iLCJpbXBvcnQgeyBnZXRDdXJyZW5jeURpc3BsYXlDb2RlIH0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5cbmNvbnN0IHRlbXBsYXRlID0gKHN0cmluZywgY29udGVudCkgPT4ge1xuICAgIGxldCB0b19yZXBsYWNlID0gY29udGVudDtcbiAgICBpZiAoY29udGVudCAmJiAhQXJyYXkuaXNBcnJheShjb250ZW50KSkge1xuICAgICAgICB0b19yZXBsYWNlID0gW2NvbnRlbnRdO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcW18oXFxkKyldL2csIChzLCBpbmRleCkgPT4gdG9fcmVwbGFjZVsraW5kZXggLSAxXSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBET00gZWxlbWVudCBhbmQgYWRkcyBhbnkgYXR0cmlidXRlcyB0byBpdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGFnX25hbWU6IHRoZSB0YWcgdG8gY3JlYXRlLCBlLmcuICdkaXYnLCAnYScsIGV0Y1xuICogQHBhcmFtIHtPYmplY3R9IGF0dHJpYnV0ZXM6IGFsbCB0aGUgYXR0cmlidXRlcyB0byBhc3NpZ24sIGUuZy4geyBpZDogJy4uLicsIGNsYXNzOiAnLi4uJywgaHRtbDogJy4uLicsIC4uLiB9XG4gKiBAcmV0dXJuIHRoZSBjcmVhdGVkIERPTSBlbGVtZW50XG4gKi9cbmNvbnN0IGNyZWF0ZUVsZW1lbnQgPSAodGFnX25hbWUsIGF0dHJpYnV0ZXMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdfbmFtZSk7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChhdHRyID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhdHRyaWJ1dGVzW2F0dHJdO1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKGF0dHIgPT09ICdodG1sJykge1xuICAgICAgICAgICAgZWwuaHRtbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGVsO1xufTtcblxubGV0IHN0YXRpY19oYXNoO1xuY29uc3QgZ2V0U3RhdGljSGFzaCA9ICgpID0+IHtcbiAgICBzdGF0aWNfaGFzaCA9XG4gICAgICAgIHN0YXRpY19oYXNoIHx8IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbc3JjKj1cIm1haW5cIl0nKS5nZXRBdHRyaWJ1dGUoJ3NyYycpIHx8ICcnKS5zcGxpdCgnLicpWzFdO1xuICAgIHJldHVybiBzdGF0aWNfaGFzaDtcbn07XG5cbmNsYXNzIFByb21pc2VDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jb25zdCBjb3B5VG9DbGlwYm9hcmQgPSB0ZXh0ID0+IHtcbiAgICBjb25zdCB0ZXh0RmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHRleHRGaWVsZC5pbm5lclRleHQgPSB0ZXh0O1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dEZpZWxkKTtcbiAgICB0ZXh0RmllbGQuc2VsZWN0KCk7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICB0ZXh0RmllbGQucmVtb3ZlKCk7XG59O1xuLy8gZXUgY291bnRyaWVzIHRvIHN1cHBvcnRcbmNvbnN0IGV1X2NvdW50cmllcyA9IFtcbiAgICAnaXQnLFxuICAgICdkZScsXG4gICAgJ2ZyJyxcbiAgICAnbHUnLFxuICAgICdncicsXG4gICAgJ21mJyxcbiAgICAnZXMnLFxuICAgICdzaycsXG4gICAgJ2x0JyxcbiAgICAnbmwnLFxuICAgICdhdCcsXG4gICAgJ2JnJyxcbiAgICAnc2knLFxuICAgICdjeScsXG4gICAgJ2JlJyxcbiAgICAncm8nLFxuICAgICdocicsXG4gICAgJ3B0JyxcbiAgICAncGwnLFxuICAgICdsdicsXG4gICAgJ2VlJyxcbiAgICAnY3onLFxuICAgICdmaScsXG4gICAgJ2h1JyxcbiAgICAnZGsnLFxuICAgICdzZScsXG4gICAgJ2llJyxcbiAgICAnaW0nLFxuICAgICdnYicsXG4gICAgJ210Jyxcbl07XG4vLyBjaGVjayBpZiBjbGllbnQgaXMgZnJvbSBFVVxuY29uc3QgaXNFdUNvdW50cnkgPSBjb3VudHJ5ID0+IGV1X2NvdW50cmllcy5pbmNsdWRlcyhjb3VudHJ5KTtcblxuLy8gY2hlY2sgaWYgbWx0IG9yIGR4dHJhZGUgZm9yIGFjY291bnQgdGV4dFxuY29uc3QgZ2V0QWNjb3VudFRleHQgPSBhY2NvdW50ID0+IHtcbiAgICBsZXQgYWNjb3VudF90ZXh0ID0gJyc7XG4gICAgaWYgKGFjY291bnQuaXNfZHh0cmFkZSB8fCBhY2NvdW50LmlzX210KSB7XG4gICAgICAgIGFjY291bnRfdGV4dCA9IGFjY291bnQudGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhY2NvdW50X3RleHQgPSBnZXRDdXJyZW5jeURpc3BsYXlDb2RlKGFjY291bnQudGV4dCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjY291bnRfdGV4dDtcbn07XG5cbmV4cG9ydCB7IGNvcHlUb0NsaXBib2FyZCwgY3JlYXRlRWxlbWVudCwgZ2V0QWNjb3VudFRleHQsIGdldFN0YXRpY0hhc2gsIGlzRXVDb3VudHJ5LCBQcm9taXNlQ2xhc3MsIHRlbXBsYXRlIH07XG4iLCJjbGFzcyBFcnJvcnMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmVycm9ycyA9IHt9O1xuICAgIH1cblxuICAgIGFkZChhdHRyaWJ1dGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yc1thdHRyaWJ1dGVdID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5lcnJvcnNbYXR0cmlidXRlXS5pbmRleE9mKG1lc3NhZ2UpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvcnNbYXR0cmlidXRlXS5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnM7XG4gICAgfVxuXG4gICAgZmlyc3QoYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyhhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNbYXR0cmlidXRlXVswXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBnZXQoYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyhhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNbYXR0cmlidXRlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBoYXMoYXR0cmlidXRlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5lcnJvcnMsIGF0dHJpYnV0ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBFcnJvcnM7XG4iLCJpbXBvcnQgeyBnZXRQcmVCdWlsZERWUnMgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCB7IHRlbXBsYXRlIH0gZnJvbSAnX2NvbW1vbi91dGlsaXR5JztcbmltcG9ydCBFcnJvciBmcm9tICcuL2Vycm9ycyc7XG5cbmNsYXNzIFZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoaW5wdXQsIHJ1bGVzLCBzdG9yZSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLnJ1bGVzID0gcnVsZXM7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBuZXcgRXJyb3IoKTtcblxuICAgICAgICB0aGlzLmVycm9yX2NvdW50ID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZmFpbHVyZSBhbmQgZXJyb3IgbWVzc2FnZSBmb3IgZ2l2ZW4gcnVsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBydWxlXG4gICAgICovXG4gICAgYWRkRmFpbHVyZShhdHRyaWJ1dGUsIHJ1bGUsIGVycm9yX21lc3NhZ2UpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBlcnJvcl9tZXNzYWdlIHx8IHJ1bGUub3B0aW9ucy5tZXNzYWdlIHx8IGdldFByZUJ1aWxkRFZScygpW3J1bGUubmFtZV0ubWVzc2FnZSgpO1xuICAgICAgICBpZiAocnVsZS5uYW1lID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRlbXBsYXRlKG1lc3NhZ2UsIFtcbiAgICAgICAgICAgICAgICBydWxlLm9wdGlvbnMubWluID09PSBydWxlLm9wdGlvbnMubWF4ID8gcnVsZS5vcHRpb25zLm1pbiA6IGAke3J1bGUub3B0aW9ucy5taW59LSR7cnVsZS5vcHRpb25zLm1heH1gLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0gZWxzZSBpZiAocnVsZS5uYW1lID09PSAnbWluJykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRlbXBsYXRlKG1lc3NhZ2UsIFtydWxlLm9wdGlvbnMubWluXSk7XG4gICAgICAgIH0gZWxzZSBpZiAocnVsZS5uYW1lID09PSAnbm90X2VxdWFsJykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRlbXBsYXRlKG1lc3NhZ2UsIFtydWxlLm9wdGlvbnMubmFtZTEsIHJ1bGUub3B0aW9ucy5uYW1lMl0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXJyb3JzLmFkZChhdHRyaWJ1dGUsIG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmVycm9yX2NvdW50Kys7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUnVucyB2YWxpZGF0b3JcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgaXQgcGFzc2VzOyB0cnVlID0gcGFzc2VzLCBmYWxzZSA9IGZhaWxzXG4gICAgICovXG4gICAgY2hlY2soKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuaW5wdXQpLmZvckVhY2goYXR0cmlidXRlID0+IHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMucnVsZXMsIGF0dHJpYnV0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucnVsZXNbYXR0cmlidXRlXS5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bGVPYmplY3QgPSBWYWxpZGF0b3IuZ2V0UnVsZU9iamVjdChydWxlKTtcblxuICAgICAgICAgICAgICAgIGlmICghcnVsZU9iamVjdC52YWxpZGF0b3IgJiYgdHlwZW9mIHJ1bGVPYmplY3QudmFsaWRhdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocnVsZU9iamVjdC5vcHRpb25zLmNvbmRpdGlvbiAmJiAhcnVsZU9iamVjdC5vcHRpb25zLmNvbmRpdGlvbih0aGlzLnN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRbYXR0cmlidXRlXSA9PT0gJycgJiYgcnVsZU9iamVjdC5uYW1lICE9PSAncmVxJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IGlzX3ZhbGlkLCBlcnJvcl9tZXNzYWdlO1xuICAgICAgICAgICAgICAgIGlmIChydWxlT2JqZWN0Lm5hbWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgaXNfb2ssIG1lc3NhZ2UgfSA9IHJ1bGVPYmplY3QudmFsaWRhdG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dFthdHRyaWJ1dGVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZU9iamVjdC5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgaXNfdmFsaWQgPSBpc19vaztcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfbWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXNfdmFsaWQgPSBydWxlT2JqZWN0LnZhbGlkYXRvcih0aGlzLmlucHV0W2F0dHJpYnV0ZV0sIHJ1bGVPYmplY3Qub3B0aW9ucywgdGhpcy5zdG9yZSwgdGhpcy5pbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFpc192YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEZhaWx1cmUoYXR0cmlidXRlLCBydWxlT2JqZWN0LCBlcnJvcl9tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhdGhpcy5lcnJvcl9jb3VudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdmFsaWRhdGlvbiBwYXNzZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNQYXNzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIHJ1bGUgYXJyYXkgdG8gYW4gb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBydWxlXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRSdWxlT2JqZWN0KHJ1bGUpIHtcbiAgICAgICAgY29uc3QgaXNfcnVsZV9zdHJpbmcgPSB0eXBlb2YgcnVsZSA9PT0gJ3N0cmluZyc7XG4gICAgICAgIGNvbnN0IHJ1bGVfb2JqZWN0ID0ge1xuICAgICAgICAgICAgbmFtZTogaXNfcnVsZV9zdHJpbmcgPyBydWxlIDogcnVsZVswXSxcbiAgICAgICAgICAgIG9wdGlvbnM6IGlzX3J1bGVfc3RyaW5nID8ge30gOiBydWxlWzFdIHx8IHt9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHJ1bGVfb2JqZWN0LnZhbGlkYXRvciA9IHJ1bGVfb2JqZWN0Lm5hbWUgPT09ICdjdXN0b20nID8gcnVsZVsxXS5mdW5jIDogZ2V0UHJlQnVpbGREVlJzKClbcnVsZV9vYmplY3QubmFtZV0uZnVuYztcblxuICAgICAgICByZXR1cm4gcnVsZV9vYmplY3Q7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBWYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBmcm9tICcuL3ZhbGlkYXRvcic7XG4iLCJpbXBvcnQgeyBhY3Rpb24sIGludGVyY2VwdCwgb2JzZXJ2YWJsZSwgcmVhY3Rpb24sIHRvSlMsIHdoZW4gfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IGlzUHJvZHVjdGlvbiwgaXNFbXB0eU9iamVjdCB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuXG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gJ1V0aWxzL1ZhbGlkYXRvcic7XG5cbi8qKlxuICogQmFzZVN0b3JlIGNsYXNzIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBhbGwgZGVmaW5lZCBzdG9yZXMgaW4gdGhlIGFwcGxpY2F0aW9uLiBJdCBoYW5kbGVzIHNvbWUgc3R1ZmYgc3VjaCBhczpcbiAqICAxLiBDcmVhdGluZyBzbmFwc2hvdCBvYmplY3QgZnJvbSB0aGUgc3RvcmUuXG4gKiAgMi4gU2F2aW5nIHRoZSBzdG9yZSdzIHNuYXBzaG90IGluIGxvY2FsL3Nlc3Npb24gc3RvcmFnZSBhbmQga2VlcGluZyB0aGVtIGluIHN5bmMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VTdG9yZSB7XG4gICAgLyoqXG4gICAgICogQW4gZW51bSBvYmplY3QgdG8gZGVmaW5lIExPQ0FMX1NUT1JBR0UgYW5kIFNFU1NJT05fU1RPUkFHRVxuICAgICAqL1xuICAgIHN0YXRpYyBTVE9SQUdFUyA9IE9iamVjdC5mcmVlemUoe1xuICAgICAgICBMT0NBTF9TVE9SQUdFOiBTeW1ib2woJ0xPQ0FMX1NUT1JBR0UnKSxcbiAgICAgICAgU0VTU0lPTl9TVE9SQUdFOiBTeW1ib2woJ1NFU1NJT05fU1RPUkFHRScpLFxuICAgIH0pO1xuXG4gICAgQG9ic2VydmFibGVcbiAgICB2YWxpZGF0aW9uX2Vycm9ycyA9IHt9O1xuXG4gICAgQG9ic2VydmFibGVcbiAgICB2YWxpZGF0aW9uX3J1bGVzID0ge307XG5cbiAgICBwcmVTd2l0Y2hBY2NvdW50RGlzcG9zZXIgPSBudWxsO1xuICAgIHByZV9zd2l0Y2hfYWNjb3VudF9saXN0ZW5lciA9IG51bGw7XG5cbiAgICBzd2l0Y2hBY2NvdW50RGlzcG9zZXIgPSBudWxsO1xuICAgIHN3aXRjaF9hY2NvdW50X2xpc3RlbmVyID0gbnVsbDtcblxuICAgIGxvZ291dERpc3Bvc2VyID0gbnVsbDtcbiAgICBsb2dvdXRfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgY2xpZW50SW5pdERpc3Bvc2VyID0gbnVsbDtcbiAgICBjbGllbnRfaW5pdF9saXN0ZW5lciA9IG51bGw7XG5cbiAgICBuZXR3b3JrU3RhdHVzQ2hhbmdlRGlzcG9zZXIgPSBudWxsO1xuICAgIG5ldHdvcmtfc3RhdHVzX2NoYW5nZV9saXN0ZW5lciA9IG51bGw7XG5cbiAgICB0aGVtZUNoYW5nZURpc3Bvc2VyID0gbnVsbDtcbiAgICB0aGVtZV9jaGFuZ2VfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgcmVhbEFjY291bnRTaWdudXBFbmRlZERpc3Bvc2VyID0gbnVsbDtcbiAgICByZWFsX2FjY291bnRfc2lnbnVwX2VuZGVkX2xpc3RlbmVyID0gbnVsbDtcblxuICAgIEBvYnNlcnZhYmxlIHBhcnRpYWxfZmV0Y2hfdGltZSA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvciBvZiB0aGUgYmFzZSBjbGFzcyB0aGF0IGdldHMgcHJvcGVydGllcycgbmFtZSBvZiBjaGlsZCB3aGljaCBzaG91bGQgYmUgc2F2ZWQgaW4gc3RvcmFnZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAqICAgICBAcHJvcGVydHkge09iamVjdH0gICByb290X3N0b3JlIC0gQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHJvb3Qgc3RvcmUgb2YgdGhlIGFwcC5cbiAgICAgKiAgICAgQHByb3BlcnR5IHtTdHJpbmdbXX0gbG9jYWxfc3RvcmFnZV9wcm9wZXJ0aWVzIC0gQSBsaXN0IG9mIHByb3BlcnRpZXMnIG5hbWVzIHRoYXQgc2hvdWxkIGJlIGtlcHQgaW4gbG9jYWxTdG9yYWdlLlxuICAgICAqICAgICBAcHJvcGVydHkge1N0cmluZ1tdfSBzZXNzaW9uX3N0b3JhZ2VfcHJvcGVydGllcyAtIEEgbGlzdCBvZiBwcm9wZXJ0aWVzJyBuYW1lcyB0aGF0IHNob3VsZCBiZSBrZXB0IGluIHNlc3Npb25TdG9yYWdlLlxuICAgICAqICAgICBAcHJvcGVydHkge09iamVjdH0gICB2YWxpZGF0aW9uX3J1bGVzIC0gQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHZhbGlkYXRpb24gcnVsZXMgZm9yIGVhY2ggcHJvcGVydHkgb2YgdGhlIHN0b3JlLlxuICAgICAqICAgICBAcHJvcGVydHkge1N0cmluZ30gICBzdG9yZV9uYW1lIC0gRXhwbGljaXQgc3RvcmUgbmFtZSBmb3IgYnJvd3NlciBhcHBsaWNhdGlvbiBzdG9yYWdlICh0byBieXBhc3MgbWluaWZpY2F0aW9uKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCB7IHJvb3Rfc3RvcmUsIGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcywgc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMsIHZhbGlkYXRpb25fcnVsZXMsIHN0b3JlX25hbWUgfSA9XG4gICAgICAgICAgICBvcHRpb25zO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncm9vdF9zdG9yZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2xvY2FsX3N0b3JhZ2VfcHJvcGVydGllcycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Nlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFzX2xvY2FsX29yX3Nlc3Npb25fc3RvcmFnZSA9XG4gICAgICAgICAgICAobG9jYWxfc3RvcmFnZV9wcm9wZXJ0aWVzICYmIGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcy5sZW5ndGgpIHx8XG4gICAgICAgICAgICAoc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgJiYgc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMubGVuZ3RoKTtcblxuICAgICAgICBpZiAoaGFzX2xvY2FsX29yX3Nlc3Npb25fc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKCFzdG9yZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdG9yZV9uYW1lIGlzIHJlcXVpcmVkIGZvciBsb2NhbC9zZXNzaW9uIHN0b3JhZ2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzdG9yZV9uYW1lJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZV9uYW1lLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5sb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMgPSBsb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMgfHwgW107XG4gICAgICAgIHRoaXMuc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgPSBzZXNzaW9uX3N0b3JhZ2VfcHJvcGVydGllcyB8fCBbXTtcbiAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uUnVsZXModmFsaWRhdGlvbl9ydWxlcyk7XG5cbiAgICAgICAgdGhpcy5zZXR1cFJlYWN0aW9uRm9yTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgIHRoaXMuc2V0dXBSZWFjdGlvbkZvclNlc3Npb25TdG9yYWdlKCk7XG4gICAgICAgIHRoaXMucmV0cmlldmVGcm9tU3RvcmFnZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gc25hcHNob3Qgb2YgdGhlIGN1cnJlbnQgc3RvcmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IHByb3BlcnRpZXMgLSBBIGxpc3Qgb2YgcHJvcGVydGllcycgbmFtZXMgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHNuYXBzaG90LlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBSZXR1cm5zIGEgY2xvbmVkIG9iamVjdCBvZiB0aGUgc3RvcmUuXG4gICAgICovXG4gICAgZ2V0U25hcHNob3QocHJvcGVydGllcykge1xuICAgICAgICBsZXQgc25hcHNob3QgPSB0b0pTKHRoaXMpO1xuXG4gICAgICAgIGlmICghaXNFbXB0eU9iamVjdCh0aGlzLnJvb3Rfc3RvcmUpKSB7XG4gICAgICAgICAgICBzbmFwc2hvdC5yb290X3N0b3JlID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb3BlcnRpZXMgJiYgcHJvcGVydGllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNuYXBzaG90ID0gcHJvcGVydGllcy5yZWR1Y2UoKHJlc3VsdCwgcCkgPT4gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHsgW3BdOiBzbmFwc2hvdFtwXSB9KSwge30pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgYSByZWFjdGlvbiBvbiBwcm9wZXJ0aWVzIHdoaWNoIGFyZSBtZW50aW9uZWQgaW4gYGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllc2BcbiAgICAgKiAgYW5kIGludm9rZXMgYHNhdmVUb1N0b3JhZ2VgIHdoZW4gdGhlcmUgYXJlIGFueSBjaGFuZ2VzIG9uIHRoZW0uXG4gICAgICpcbiAgICAgKi9cbiAgICBzZXR1cFJlYWN0aW9uRm9yTG9jYWxTdG9yYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5sb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWFjdGlvbihcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLmxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcy5tYXAoaSA9PiB0aGlzW2ldKSxcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnNhdmVUb1N0b3JhZ2UodGhpcy5sb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMsIEJhc2VTdG9yZS5TVE9SQUdFUy5MT0NBTF9TVE9SQUdFKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgYSByZWFjdGlvbiBvbiBwcm9wZXJ0aWVzIHdoaWNoIGFyZSBtZW50aW9uZWQgaW4gYHNlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzYFxuICAgICAqICBhbmQgaW52b2tlcyBgc2F2ZVRvU3RvcmFnZWAgd2hlbiB0aGVyZSBhcmUgYW55IGNoYW5nZXMgb24gdGhlbS5cbiAgICAgKlxuICAgICAqL1xuICAgIHNldHVwUmVhY3Rpb25Gb3JTZXNzaW9uU3RvcmFnZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWFjdGlvbihcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnNlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzLm1hcChpID0+IHRoaXNbaV0pLFxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMuc2F2ZVRvU3RvcmFnZSh0aGlzLnNlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzLCBCYXNlU3RvcmUuU1RPUkFHRVMuU0VTU0lPTl9TVE9SQUdFKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcHJvcGVydGllcyB0aGF0IGFyZSBub3QgcGFzc2VkIGZyb20gdGhlIHNuYXBzaG90IG9mIHRoZSBzdG9yZSBhbmQgc2F2ZXMgaXQgdG8gdGhlIHBhc3NlZCBzdG9yYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBwcm9wZXJ0aWVzIC0gQSBsaXN0IG9mIHRoZSBzdG9yZSdzIHByb3BlcnRpZXMnIG5hbWVzIHdoaWNoIHNob3VsZCBiZSBzYXZlZCBpbiB0aGUgc3RvcmFnZS5cbiAgICAgKiBAcGFyYW0ge1N5bWJvbH0gICBzdG9yYWdlICAgIC0gQSBzeW1ib2wgb2JqZWN0IHRoYXQgZGVmaW5lcyB0aGUgc3RvcmFnZSB3aGljaCB0aGUgc25hcHNob3Qgc2hvdWxkIGJlIHN0b3JlZCBpbiBpdC5cbiAgICAgKlxuICAgICAqL1xuICAgIHNhdmVUb1N0b3JhZ2UocHJvcGVydGllcywgc3RvcmFnZSkge1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0U25hcHNob3QocHJvcGVydGllcyksIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzdG9yYWdlID09PSBCYXNlU3RvcmUuU1RPUkFHRVMuTE9DQUxfU1RPUkFHRSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5zdG9yZV9uYW1lLCBzbmFwc2hvdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RvcmFnZSA9PT0gQmFzZVN0b3JlLlNUT1JBR0VTLlNFU1NJT05fU1RPUkFHRSkge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JlX25hbWUsIHNuYXBzaG90KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBzYXZlZCBzbmFwc2hvdCBvZiB0aGUgc3RvcmUgYW5kIGFzc2lnbnMgdG8gdGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKi9cbiAgICBAYWN0aW9uXG4gICAgcmV0cmlldmVGcm9tU3RvcmFnZSgpIHtcbiAgICAgICAgY29uc3QgbG9jYWxfc3RvcmFnZV9zbmFwc2hvdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5zdG9yZV9uYW1lLCB7fSkpO1xuICAgICAgICBjb25zdCBzZXNzaW9uX3N0b3JhZ2Vfc25hcHNob3QgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0odGhpcy5zdG9yZV9uYW1lLCB7fSkpO1xuXG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0geyAuLi5sb2NhbF9zdG9yYWdlX3NuYXBzaG90LCAuLi5zZXNzaW9uX3N0b3JhZ2Vfc25hcHNob3QgfTtcblxuICAgICAgICBPYmplY3Qua2V5cyhzbmFwc2hvdCkuZm9yRWFjaChrID0+ICh0aGlzW2tdID0gc25hcHNob3Rba10pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZXMgZm9yIGFuIG9ic2VydmFibGUgcHJvcGVydHkgb2YgdGhlIHN0b3JlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlOYW1lIC0gVGhlIG9ic2VydmFibGUgcHJvcGVydHkncyBuYW1lXG4gICAgICogQHBhcmFtIFt7U3RyaW5nfV0gbWVzc2FnZXMgLSBBbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgY29udGFpbnMgdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyBmb3IgdGhlIHBhcnRpY3VsYXIgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKi9cbiAgICBAYWN0aW9uXG4gICAgc2V0VmFsaWRhdGlvbkVycm9yTWVzc2FnZXMocHJvcGVydHlOYW1lLCBtZXNzYWdlcykge1xuICAgICAgICBjb25zdCBpc19kaWZmZXJlbnQgPSAoKSA9PlxuICAgICAgICAgICAgISF0aGlzLnZhbGlkYXRpb25fZXJyb3JzW3Byb3BlcnR5TmFtZV1cbiAgICAgICAgICAgICAgICAuZmlsdGVyKHggPT4gIW1lc3NhZ2VzLmluY2x1ZGVzKHgpKVxuICAgICAgICAgICAgICAgIC5jb25jYXQobWVzc2FnZXMuZmlsdGVyKHggPT4gIXRoaXMudmFsaWRhdGlvbl9lcnJvcnNbcHJvcGVydHlOYW1lXS5pbmNsdWRlcyh4KSkpLmxlbmd0aDtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRpb25fZXJyb3JzW3Byb3BlcnR5TmFtZV0gfHwgaXNfZGlmZmVyZW50KCkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbl9lcnJvcnNbcHJvcGVydHlOYW1lXSA9IG1lc3NhZ2VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB2YWxpZGF0aW9uIHJ1bGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcnVsZXNcbiAgICAgKlxuICAgICAqL1xuICAgIEBhY3Rpb25cbiAgICBzZXRWYWxpZGF0aW9uUnVsZXMocnVsZXMgPSB7fSkge1xuICAgICAgICBPYmplY3Qua2V5cyhydWxlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRSdWxlKGtleSwgcnVsZXNba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgcnVsZXMgdG8gdGhlIHBhcnRpY3VsYXIgcHJvcGVydHlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBydWxlc1xuICAgICAqXG4gICAgICovXG4gICAgQGFjdGlvblxuICAgIGFkZFJ1bGUocHJvcGVydHksIHJ1bGVzKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGlvbl9ydWxlc1twcm9wZXJ0eV0gPSBydWxlcztcblxuICAgICAgICBpbnRlcmNlcHQodGhpcywgcHJvcGVydHksIGNoYW5nZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUHJvcGVydHkocHJvcGVydHksIGNoYW5nZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgYSBwYXJ0aWN1bGFyIHByb3BlcnR5IG9mIHRoZSBzdG9yZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IGluIHRoZSBzdG9yZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZSAgICAtIFRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHksIGl0IGNhbiBiZSB1bmRlZmluZWQuXG4gICAgICpcbiAgICAgKi9cbiAgICBAYWN0aW9uXG4gICAgdmFsaWRhdGVQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgdHJpZ2dlciA9IHRoaXMudmFsaWRhdGlvbl9ydWxlc1twcm9wZXJ0eV0udHJpZ2dlcjtcbiAgICAgICAgY29uc3QgaW5wdXRzID0geyBbcHJvcGVydHldOiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiB0aGlzW3Byb3BlcnR5XSB9O1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uX3J1bGVzID0geyBbcHJvcGVydHldOiB0aGlzLnZhbGlkYXRpb25fcnVsZXNbcHJvcGVydHldLnJ1bGVzIHx8IFtdIH07XG5cbiAgICAgICAgaWYgKCEhdHJpZ2dlciAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLCB0cmlnZ2VyKSkge1xuICAgICAgICAgICAgaW5wdXRzW3RyaWdnZXJdID0gdGhpc1t0cmlnZ2VyXTtcbiAgICAgICAgICAgIHZhbGlkYXRpb25fcnVsZXNbdHJpZ2dlcl0gPSB0aGlzLnZhbGlkYXRpb25fcnVsZXNbdHJpZ2dlcl0ucnVsZXMgfHwgW107XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKGlucHV0cywgdmFsaWRhdGlvbl9ydWxlcywgdGhpcyk7XG5cbiAgICAgICAgdmFsaWRhdG9yLmlzUGFzc2VkKCk7XG5cbiAgICAgICAgT2JqZWN0LmtleXMoaW5wdXRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbGlkYXRpb25FcnJvck1lc3NhZ2VzKGtleSwgdmFsaWRhdG9yLmVycm9ycy5nZXQoa2V5KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhbGwgcHJvcGVydGllcyB3aGljaCB2YWxpZGF0aW9uIHJ1bGUgaGFzIGJlZW4gc2V0IGZvci5cbiAgICAgKlxuICAgICAqL1xuICAgIEBhY3Rpb25cbiAgICB2YWxpZGF0ZUFsbFByb3BlcnRpZXMoKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25fcnVsZXMgPSBPYmplY3Qua2V5cyh0aGlzLnZhbGlkYXRpb25fcnVsZXMpO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uX2Vycm9ycyA9IE9iamVjdC5rZXlzKHRoaXMudmFsaWRhdGlvbl9lcnJvcnMpO1xuXG4gICAgICAgIHZhbGlkYXRpb25fcnVsZXMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQcm9wZXJ0eShwLCB0aGlzW3BdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGtleXMgdGhhdCBhcmUgcHJlc2VudCBpbiBlcnJvciwgYnV0IG5vdCBpbiBydWxlczpcbiAgICAgICAgdmFsaWRhdGlvbl9lcnJvcnMuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRpb25fcnVsZXMuaW5jbHVkZXMoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsaWRhdGlvbl9lcnJvcnNbZXJyb3JdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25Td2l0Y2hBY2NvdW50KGxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5zd2l0Y2hfYWNjb3VudF9saXN0ZW5lciA9IGxpc3RlbmVyO1xuXG4gICAgICAgICAgICB0aGlzLnN3aXRjaEFjY291bnREaXNwb3NlciA9IHdoZW4oXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5yb290X3N0b3JlLmNsaWVudC5zd2l0Y2hfYnJvYWRjYXN0LFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc3dpdGNoX2FjY291bnRfbGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4gJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnN3aXRjaEVuZFNpZ25hbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3dpdGNoQWNjb3VudCh0aGlzLnN3aXRjaF9hY2NvdW50X2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTd2l0Y2hpbmcgYWNjb3VudCBsaXN0ZW5lcnMgYXJlIHJlcXVpcmVkIHRvIHJldHVybiBhIHByb21pc2UuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBsaXN0ZW5lciBjdXJyZW50bHkgYWN0aXZlLiBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGVycm9yIHJhaXNlZCBmcm9tIHRyZWF0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhIG51bGwgb2JqZWN0IGFzIGEgZnVuY3Rpb24uIEFsdGhvdWdoLCBpbiBkZXZlbG9wbWVudCBtb2RlLCB3ZSB0aHJvdyBhIGNvbnNvbGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25QcmVTd2l0Y2hBY2NvdW50KGxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5wcmVfc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICAgICAgICAgIHRoaXMucHJlU3dpdGNoQWNjb3VudERpc3Bvc2VyID0gd2hlbihcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnByZV9zd2l0Y2hfYnJvYWRjYXN0LFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucHJlX3N3aXRjaF9hY2NvdW50X2xpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC50aGVuICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5zZXRQcmVTd2l0Y2hBY2NvdW50KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByZVN3aXRjaEFjY291bnQodGhpcy5wcmVfc3dpdGNoX2FjY291bnRfbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ByZS1zd2l0Y2ggYWNjb3VudCBsaXN0ZW5lcnMgYXJlIHJlcXVpcmVkIHRvIHJldHVybiBhIHByb21pc2UuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBsaXN0ZW5lciBjdXJyZW50bHkgYWN0aXZlLiBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGVycm9yIHJhaXNlZCBmcm9tIHRyZWF0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhIG51bGwgb2JqZWN0IGFzIGEgZnVuY3Rpb24uIEFsdGhvdWdoLCBpbiBkZXZlbG9wbWVudCBtb2RlLCB3ZSB0aHJvdyBhIGNvbnNvbGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25Mb2dvdXQobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5sb2dvdXREaXNwb3NlciA9IHdoZW4oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50Lmhhc19sb2dnZWRfb3V0LFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubG9nb3V0X2xpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4gJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5zZXRMb2dvdXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Mb2dvdXQodGhpcy5sb2dvdXRfbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xvZ291dCBsaXN0ZW5lcnMgYXJlIHJlcXVpcmVkIHRvIHJldHVybiBhIHByb21pc2UuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBsaXN0ZW5lciBjdXJyZW50bHkgYWN0aXZlLiBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGVycm9yIHJhaXNlZCBmcm9tIHRyZWF0aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgbnVsbCBvYmplY3QgYXMgYSBmdW5jdGlvbi4gQWx0aG91Z2gsIGluIGRldmVsb3BtZW50IG1vZGUsIHdlIHRocm93IGEgY29uc29sZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5sb2dvdXRfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25DbGllbnRJbml0KGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SW5pdERpc3Bvc2VyID0gd2hlbihcbiAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaW5pdGlhbGl6ZWRfYnJvYWRjYXN0LFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2xpZW50X2luaXRfbGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbiAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnNldEluaXRpYWxpemVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2xpZW50SW5pdCh0aGlzLmNsaWVudF9pbml0X2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgaW5pdCBsaXN0ZW5lcnMgYXJlIHJlcXVpcmVkIHRvIHJldHVybiBhIHByb21pc2UuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBsaXN0ZW5lciBjdXJyZW50bHkgYWN0aXZlLiBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGVycm9yIHJhaXNlZCBmcm9tIHRyZWF0aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgbnVsbCBvYmplY3QgYXMgYSBmdW5jdGlvbi4gQWx0aG91Z2gsIGluIGRldmVsb3BtZW50IG1vZGUsIHdlIHRocm93IGEgY29uc29sZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jbGllbnRfaW5pdF9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBvbk5ldHdvcmtTdGF0dXNDaGFuZ2UobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrU3RhdHVzQ2hhbmdlRGlzcG9zZXIgPSByZWFjdGlvbihcbiAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS5jb21tb24uaXNfbmV0d29ya19vbmxpbmUsXG4gICAgICAgICAgICBpc19vbmxpbmUgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya19zdGF0dXNfY2hhbmdlX2xpc3RlbmVyKGlzX29ubGluZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gbGlzdGVuZXIgY3VycmVudGx5IGFjdGl2ZS4gc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBlcnJvciByYWlzZWQgZnJvbSB0cmVhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhIG51bGwgb2JqZWN0IGFzIGEgZnVuY3Rpb24uIEFsdGhvdWdoLCBpbiBkZXZlbG9wbWVudCBtb2RlLCB3ZSB0aHJvdyBhIGNvbnNvbGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uZXR3b3JrX3N0YXR1c19jaGFuZ2VfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25UaGVtZUNoYW5nZShsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnRoZW1lQ2hhbmdlRGlzcG9zZXIgPSByZWFjdGlvbihcbiAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS51aS5pc19kYXJrX21vZGVfb24sXG4gICAgICAgICAgICBpc19kYXJrX21vZGVfb24gPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhlbWVfY2hhbmdlX2xpc3RlbmVyKGlzX2RhcmtfbW9kZV9vbik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gbGlzdGVuZXIgY3VycmVudGx5IGFjdGl2ZS4gc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBlcnJvciByYWlzZWQgZnJvbSB0cmVhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhIG51bGwgb2JqZWN0IGFzIGEgZnVuY3Rpb24uIEFsdGhvdWdoLCBpbiBkZXZlbG9wbWVudCBtb2RlLCB3ZSB0aHJvdyBhIGNvbnNvbGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy50aGVtZV9jaGFuZ2VfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25SZWFsQWNjb3VudFNpZ251cEVuZChsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlYWxBY2NvdW50U2lnbnVwRW5kZWREaXNwb3NlciA9IHdoZW4oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUudWkuaGFzX3JlYWxfYWNjb3VudF9zaWdudXBfZW5kZWQsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZWFsX2FjY291bnRfc2lnbnVwX2VuZGVkX2xpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4gJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLnVpLnNldFJlYWxBY2NvdW50U2lnbnVwRW5kKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVhbEFjY291bnRTaWdudXBFbmQodGhpcy5yZWFsX2FjY291bnRfc2lnbnVwX2VuZGVkX2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWFsIGFjY291bnQgc2lnbnVwIGxpc3RlbmVycyBhcmUgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcHJvbWlzZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGN1cnJlbnRseSBhY3RpdmUuIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgcmFpc2VkIGZyb20gdHJlYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBudWxsIG9iamVjdCBhcyBhIGZ1bmN0aW9uLiBBbHRob3VnaCwgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgd2UgdGhyb3cgYSBjb25zb2xlIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucmVhbF9hY2NvdW50X3NpZ251cF9lbmRlZF9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBkaXNwb3NlUHJlU3dpdGNoQWNjb3VudCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByZVN3aXRjaEFjY291bnREaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5wcmVTd2l0Y2hBY2NvdW50RGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZV9zd2l0Y2hfYWNjb3VudF9saXN0ZW5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGRpc3Bvc2VTd2l0Y2hBY2NvdW50KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuc3dpdGNoQWNjb3VudERpc3Bvc2VyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnN3aXRjaEFjY291bnREaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBudWxsO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBkaXNwb3NlTG9nb3V0KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMubG9nb3V0RGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMubG9nb3V0RGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ291dF9saXN0ZW5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGRpc3Bvc2VDbGllbnRJbml0KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY2xpZW50SW5pdERpc3Bvc2VyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudEluaXREaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpZW50X2luaXRfbGlzdGVuZXIgPSBudWxsO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBkaXNwb3NlTmV0d29ya1N0YXR1c0NoYW5nZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm5ldHdvcmtTdGF0dXNDaGFuZ2VEaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5uZXR3b3JrU3RhdHVzQ2hhbmdlRGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5ldHdvcmtfc3RhdHVzX2NoYW5nZV9saXN0ZW5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGRpc3Bvc2VUaGVtZUNoYW5nZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRoZW1lQ2hhbmdlRGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMudGhlbWVDaGFuZ2VEaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGhlbWVfY2hhbmdlX2xpc3RlbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgZGlzcG9zZVJlYWxBY2NvdW50U2lnbnVwRW5kKCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMucmVhbEFjY291bnRTaWdudXBFbmRlZERpc3Bvc2VyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWxBY2NvdW50U2lnbnVwRW5kZWREaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVhbF9hY2NvdW50X3NpZ251cF9lbmRlZF9saXN0ZW5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIG9uVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlUHJlU3dpdGNoQWNjb3VudCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2VTd2l0Y2hBY2NvdW50KCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZUxvZ291dCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2VDbGllbnRJbml0KCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZU5ldHdvcmtTdGF0dXNDaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlVGhlbWVDaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlUmVhbEFjY291bnRTaWdudXBFbmQoKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXNzZXJ0SGFzVmFsaWRDYWNoZShsb2dpbmlkLCAuLi5yZWFjdGlvbnMpIHtcbiAgICAgICAgLy8gYWNjb3VudCB3YXMgY2hhbmdlZCB3aGVuIHRoaXMgd2FzIHVubW91bnRlZC5cbiAgICAgICAgaWYgKHRoaXMucm9vdF9zdG9yZS5jbGllbnQubG9naW5pZCAhPT0gbG9naW5pZCkge1xuICAgICAgICAgICAgcmVhY3Rpb25zLmZvckVhY2goYWN0ID0+IGFjdCgpKTtcbiAgICAgICAgICAgIHRoaXMucGFydGlhbF9mZXRjaF90aW1lID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgYWN0aW9uLCBjb21wdXRlZCwgb2JzZXJ2YWJsZSwgcmVhY3Rpb24sIHdoZW4gfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IGlzQ3J5cHRvY3VycmVuY3ksIGdldFByb3BlcnR5VmFsdWUsIHJvdXRlcyB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnQ29uc3RhbnRzL2NvbnN0YW50cyc7XG5pbXBvcnQgQ2FzaGllck5vdGlmaWNhdGlvbnMgZnJvbSAnQ29udGFpbmVycy9jYXNoaWVyLW5vdGlmaWNhdGlvbnMuanN4JztcbmltcG9ydCBCYXNlU3RvcmUgZnJvbSAnLi9iYXNlLXN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2VuZXJhbFN0b3JlIGV4dGVuZHMgQmFzZVN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHJvb3Rfc3RvcmUsIFdTIH0pIHtcbiAgICAgICAgc3VwZXIoeyByb290X3N0b3JlIH0pO1xuICAgICAgICB0aGlzLldTID0gV1M7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG5cbiAgICAgICAgd2hlbihcbiAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaXNfbG9nZ2VkX2luLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGFzU2V0Q3VycmVuY3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaENhc2hpZXJUb01lbnUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXRoaXMuaGFzX3NldF9jdXJyZW5jeSkge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTZXRDdXJyZW5jeU1vZGFsVGl0bGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlYWN0aW9uKFxuICAgICAgICAgICAgKCkgPT4gW1xuICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuc3dpdGNoZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19sb2dnZWRfaW4sXG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5jdXJyZW5jeSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgQG9ic2VydmFibGUgaXNfbG9hZGluZyA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX3AycF92aXNpYmxlID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgcDJwX25vdGlmaWNhdGlvbl9jb3VudCA9IDA7XG4gICAgQG9ic2VydmFibGUgY2FzaGllcl9yb3V0ZV90YWJfaW5kZXggPSAwO1xuICAgIEBvYnNlcnZhYmxlIGlzX2RlcG9zaXQgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBzaG91bGRfc2hvd19hbGxfYXZhaWxhYmxlX2N1cnJlbmNpZXMgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc19jYXNoaWVyX2RlZmF1bHQgPSB0cnVlO1xuICAgIEBvYnNlcnZhYmxlIGRlcG9zaXRfdGFyZ2V0ID0gJyc7XG4gICAgQG9ic2VydmFibGUgc2hvdWxkX3NldF9jdXJyZW5jeV9tb2RhbF90aXRsZV9jaGFuZ2UgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBwMnBfYWR2ZXJ0aXNlcl9lcnJvciA9IHVuZGVmaW5lZDtcbiAgICBAb2JzZXJ2YWJsZSBoYXNfc2V0X2N1cnJlbmN5ID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgc2hvdWxkX3BlcmNlbnRhZ2VfcmVzZXQgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBwZXJjZW50YWdlID0gMDtcbiAgICBAb2JzZXJ2YWJsZSBzaG93X3AycF9pbl9jYXNoaWVyX2RlZmF1bHQgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBvblJlbW91bnQgPSAoKSA9PiB7fTtcblxuICAgIGFjdGl2ZV9jb250YWluZXIgPSBDb25zdGFudHMuY29udGFpbmVycy5kZXBvc2l0O1xuICAgIGlzX3BvcHVsYXRpbmdfdmFsdWVzID0gZmFsc2U7XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0T25SZW1vdW50KGZ1bmMpIHtcbiAgICAgICAgdGhpcy5vblJlbW91bnQgPSBmdW5jO1xuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBpc19jcnlwdG8oKSB7XG4gICAgICAgIGNvbnN0IHsgY3VycmVuY3kgfSA9IHRoaXMucm9vdF9zdG9yZS5jbGllbnQ7XG4gICAgICAgIHJldHVybiAhIWN1cnJlbmN5ICYmIGlzQ3J5cHRvY3VycmVuY3koY3VycmVuY3kpO1xuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBpc19wMnBfZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNfcDJwX3Zpc2libGUgJiYgIXRoaXMucm9vdF9zdG9yZS5jbGllbnQuaXNfZXU7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNob3dQMnBJbkNhc2hpZXJEZWZhdWx0KCkge1xuICAgICAgICBjb25zdCB7IGFjY291bnRfbGlzdCwgaXNfdmlydHVhbCB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcblxuICAgICAgICBjb25zdCBpc19wMnBfcmVzdHJpY3RlZCA9IHRoaXMucDJwX2FkdmVydGlzZXJfZXJyb3IgPT09ICdSZXN0cmljdGVkQ291bnRyeSc7XG4gICAgICAgIGNvbnN0IGhhc191c2RfY3VycmVuY3kgPSBhY2NvdW50X2xpc3Quc29tZShhY2NvdW50ID0+IGFjY291bnQudGl0bGUgPT09ICdVU0QnKTtcbiAgICAgICAgY29uc3QgaGFzX3VzZXJfZmlhdF9jdXJyZW5jeSA9IGFjY291bnRfbGlzdC5zb21lKFxuICAgICAgICAgICAgYWNjb3VudCA9PiAhaXNDcnlwdG9jdXJyZW5jeShhY2NvdW50LnRpdGxlKSAmJiBhY2NvdW50LnRpdGxlICE9PSAnUmVhbCdcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoaXNfcDJwX3Jlc3RyaWN0ZWQgfHwgaXNfdmlydHVhbCB8fCAoaGFzX3VzZXJfZmlhdF9jdXJyZW5jeSAmJiAhaGFzX3VzZF9jdXJyZW5jeSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd19wMnBfaW5fY2FzaGllcl9kZWZhdWx0ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3dfcDJwX2luX2Nhc2hpZXJfZGVmYXVsdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXR0YWNoQ2FzaGllclRvTWVudSgpIHtcbiAgICAgICAgY29uc3QgeyBtZW51LCB1aSB9ID0gdGhpcy5yb290X3N0b3JlO1xuXG4gICAgICAgIGlmICghdGhpcy5oYXNfc2V0X2N1cnJlbmN5KSB7XG4gICAgICAgICAgICB0aGlzLnNldEhhc1NldEN1cnJlbmN5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBtZW51LmF0dGFjaCh7XG4gICAgICAgICAgICBpZDogJ2R0X2Nhc2hpZXJfdGFiJyxcbiAgICAgICAgICAgIGljb246IDxDYXNoaWVyTm90aWZpY2F0aW9ucyBwMnBfbm90aWZpY2F0aW9uX2NvdW50PXt0aGlzLnAycF9ub3RpZmljYXRpb25fY291bnR9IC8+LFxuICAgICAgICAgICAgdGV4dDogKCkgPT4gbG9jYWxpemUoJ0Nhc2hpZXInKSxcbiAgICAgICAgICAgIGxpbmtfdG86IHRoaXMuaGFzX3NldF9jdXJyZW5jeSAmJiByb3V0ZXMuY2FzaGllcixcbiAgICAgICAgICAgIG9uQ2xpY2s6ICF0aGlzLmhhc19zZXRfY3VycmVuY3kgJiYgdWkudG9nZ2xlU2V0Q3VycmVuY3lNb2RhbCxcbiAgICAgICAgICAgIGxvZ2luX29ubHk6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICByZXBsYWNlQ2FzaGllck1lbnVPbmNsaWNrKCkge1xuICAgICAgICBjb25zdCB7IG1lbnUsIHVpIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG5cbiAgICAgICAgdGhpcy5zZXRIYXNTZXRDdXJyZW5jeSgpO1xuXG4gICAgICAgIG1lbnUudXBkYXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAnZHRfY2FzaGllcl90YWInLFxuICAgICAgICAgICAgICAgIGljb246IDxDYXNoaWVyTm90aWZpY2F0aW9ucyBwMnBfbm90aWZpY2F0aW9uX2NvdW50PXt0aGlzLnAycF9ub3RpZmljYXRpb25fY291bnR9IC8+LFxuICAgICAgICAgICAgICAgIHRleHQ6ICgpID0+IGxvY2FsaXplKCdDYXNoaWVyJyksXG4gICAgICAgICAgICAgICAgbGlua190bzogdGhpcy5oYXNfc2V0X2N1cnJlbmN5ICYmIHJvdXRlcy5jYXNoaWVyLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICF0aGlzLmhhc19zZXRfY3VycmVuY3kgPyB1aS50b2dnbGVTZXRDdXJyZW5jeU1vZGFsIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9naW5fb25seTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldEhhc1NldEN1cnJlbmN5KCkge1xuICAgICAgICBjb25zdCB7IGFjY291bnRfbGlzdCwgaGFzX2FjdGl2ZV9yZWFsX2FjY291bnQgfSA9IHRoaXMucm9vdF9zdG9yZS5jbGllbnQ7XG5cbiAgICAgICAgdGhpcy5oYXNfc2V0X2N1cnJlbmN5ID1cbiAgICAgICAgICAgIGFjY291bnRfbGlzdC5maWx0ZXIoYWNjb3VudCA9PiAhYWNjb3VudC5pc192aXJ0dWFsKS5zb21lKGFjY291bnQgPT4gYWNjb3VudC50aXRsZSAhPT0gJ1JlYWwnKSB8fFxuICAgICAgICAgICAgIWhhc19hY3RpdmVfcmVhbF9hY2NvdW50O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBjaGFuZ2VTZXRDdXJyZW5jeU1vZGFsVGl0bGUoKSB7XG4gICAgICAgIHRoaXMuc2hvdWxkX3NldF9jdXJyZW5jeV9tb2RhbF90aXRsZV9jaGFuZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBvbk1vdW50Q2FzaGllckRlZmF1bHQoKSB7XG4gICAgICAgIGNvbnN0IHsgYWNjb3VudF9wcm9tcHRfZGlhbG9nLCBwYXltZW50X2FnZW50IH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyO1xuXG4gICAgICAgIGlmICghdGhpcy5oYXNfc2V0X2N1cnJlbmN5KSB7XG4gICAgICAgICAgICB0aGlzLnNldEhhc1NldEN1cnJlbmN5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRJc0Nhc2hpZXJEZWZhdWx0KHRydWUpO1xuICAgICAgICBhY2NvdW50X3Byb21wdF9kaWFsb2cucmVzZXRJc0NvbmZpcm1lZCgpO1xuXG4gICAgICAgIHRoaXMuc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgaWYgKCFwYXltZW50X2FnZW50LmFsbF9wYXltZW50X2FnZW50X2xpc3Q/LnBheW1lbnRhZ2VudF9saXN0Py5saXN0KSB7XG4gICAgICAgICAgICBjb25zdCBhZ2VudF9saXN0ID0gYXdhaXQgcGF5bWVudF9hZ2VudC5nZXRBbGxQYXltZW50QWdlbnRMaXN0KCk7XG4gICAgICAgICAgICBwYXltZW50X2FnZW50LnNldEFsbFBheW1lbnRBZ2VudExpc3QoYWdlbnRfbGlzdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgY2FsY3VsYXRlUGVyY2VudGFnZShhbW91bnQgPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyLmNyeXB0b19maWF0X2NvbnZlcnRlci5jb252ZXJ0ZXJfZnJvbV9hbW91bnQpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3RyYW5zZmVyIH0gPSBtb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlX2NvbnRhaW5lciA9PT0gYWNjb3VudF90cmFuc2Zlci5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGVyY2VudGFnZSA9ICsoKGFtb3VudCAvICthY2NvdW50X3RyYW5zZmVyLnNlbGVjdGVkX2Zyb20uYmFsYW5jZSkgKiAxMDApLnRvRml4ZWQoMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSArKChhbW91bnQgLyArY2xpZW50LmJhbGFuY2UpICogMTAwKS50b0ZpeGVkKDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNGaW5pdGUodGhpcy5wZXJjZW50YWdlKSkge1xuICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBwZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXMoc2hvdWxkX3BlcmNlbnRhZ2VfcmVzZXQpIHtcbiAgICAgICAgdGhpcy5zaG91bGRfcGVyY2VudGFnZV9yZXNldCA9IHNob3VsZF9wZXJjZW50YWdlX3Jlc2V0O1xuXG4gICAgICAgIGlmIChzaG91bGRfcGVyY2VudGFnZV9yZXNldCkge1xuICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc0RlcG9zaXQoaXNfZGVwb3NpdCkge1xuICAgICAgICB0aGlzLmlzX2RlcG9zaXQgPSBpc19kZXBvc2l0O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRTaG91bGRTaG93QWxsQXZhaWxhYmxlQ3VycmVuY2llcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNob3VsZF9zaG93X2FsbF9hdmFpbGFibGVfY3VycmVuY2llcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc0Nhc2hpZXJEZWZhdWx0KGlzX2Nhc2hpZXJfZGVmYXVsdCkge1xuICAgICAgICB0aGlzLmlzX2Nhc2hpZXJfZGVmYXVsdCA9IGlzX2Nhc2hpZXJfZGVmYXVsdDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0RGVwb3NpdFRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5kZXBvc2l0X3RhcmdldCA9IHRhcmdldDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgY29udGludWVSb3V0ZSgpIHtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlLmNvbW1vbi5yb3V0ZVRvKHRoaXMuZGVwb3NpdF90YXJnZXQpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRBY2NvdW50U3dpdGNoTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIGNhc2hpZXIgaW5pdHMgb25jZSBhbmQgdHJpZXMgdG8gc3RheSBhY3RpdmUgdW50aWwgc3dpdGNoaW5nIGFjY291bnRcbiAgICAgICAgLy8gc2luY2UgY2FzaGllciBjYWxscyB0YWtlIGEgbG9uZyB0aW1lIHRvIHJlc3BvbmQgb3IgZGlzcGxheSBpbiBpZnJhbWVcbiAgICAgICAgLy8gc28gd2UgZG9uJ3QgaGF2ZSBhbnkgdW5tb3VudCBmdW5jdGlvbiBoZXJlIGFuZCBldmVyeXRoaW5nIGdldHMgcmVzZXQgb24gc3dpdGNoIGluc3RlYWRcbiAgICAgICAgdGhpcy5kaXNwb3NlU3dpdGNoQWNjb3VudCgpO1xuICAgICAgICB0aGlzLm9uU3dpdGNoQWNjb3VudCh0aGlzLmFjY291bnRTd2l0Y2hlckxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXNlIFAyUCBhdHRyaWJ1dGVzIG9uIGFwcCBsb2FkIHdpdGhvdXQgbW91bnRpbmcgdGhlIGVudGlyZSBjYXNoaWVyXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyKSB7XG4gICAgICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICAgICAgY29uc3QgeyBhY2NvdW50X3Byb21wdF9kaWFsb2csIHdpdGhkcmF3IH0gPSBtb2R1bGVzLmNhc2hpZXI7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbmN5LCBpc19sb2dnZWRfaW4sIHN3aXRjaGVkIH0gPSBjbGllbnQ7XG5cbiAgICAgICAgICAgIHdoZW4oXG4gICAgICAgICAgICAgICAgKCkgPT4gaXNfbG9nZ2VkX2luLFxuICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRBZHZlcnRpemVyRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1AycFN0YXR1cygpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3aXRoZHJhdy5jaGVjazEwa0xpbWl0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmVhY3Rpb24oXG4gICAgICAgICAgICAgICAgKCkgPT4gW3N3aXRjaGVkLCBpc19sb2dnZWRfaW4sIGN1cnJlbmN5XSxcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdhaXQgZm9yIGNsaWVudCBzZXR0aW5ncyB0byBiZSBwb3B1bGF0ZWQgaW4gY2xpZW50LXN0b3JlXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuV1Mud2FpdCgnZ2V0X3NldHRpbmdzJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRBZHZlcnRpemVyRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRfcHJvbXB0X2RpYWxvZy5yZXNldExhc3RMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzd2l0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQMnBTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB3aXRoZHJhd2FsIGxpbWl0IGlzIHJlYWNoZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB5ZXMsIHRoaXMgd2lsbCB0cmlnZ2VyIHRvIHNob3cgYSBub3RpZmljYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrMTBrTGltaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJlYWN0aW9uKFxuICAgICAgICAgICAgICAgICgpID0+IGN1cnJlbmN5LFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd2l0aGRyYXcuc2V0SXNXaXRoZHJhd0NvbmZpcm1lZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBnZXRBZHZlcnRpemVyRXJyb3IoKSB7XG4gICAgICAgIGNvbnN0IGFkdmVydGlzZXJfaW5mbyA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5wMnBBZHZlcnRpc2VySW5mbygpO1xuICAgICAgICB0aGlzLnNldFAycEFkdmVydGlzZXJFcnJvcihnZXRQcm9wZXJ0eVZhbHVlKGFkdmVydGlzZXJfaW5mbywgWydlcnJvcicsICdjb2RlJ10pKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0UDJwQWR2ZXJ0aXNlckVycm9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucDJwX2FkdmVydGlzZXJfZXJyb3IgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgY2hlY2tQMnBTdGF0dXMoKSB7XG4gICAgICAgIGNvbnN0IGFkdmVydGlzZXJfZXJyb3IgPSB0aGlzLnAycF9hZHZlcnRpc2VyX2Vycm9yO1xuICAgICAgICBjb25zdCBpc19wMnBfcmVzdHJpY3RlZCA9IGFkdmVydGlzZXJfZXJyb3IgPT09ICdSZXN0cmljdGVkQ291bnRyeScgfHwgYWR2ZXJ0aXNlcl9lcnJvciA9PT0gJ1Jlc3RyaWN0ZWRDdXJyZW5jeSc7XG4gICAgICAgIHRoaXMuc2V0SXNQMnBWaXNpYmxlKCEoaXNfcDJwX3Jlc3RyaWN0ZWQgfHwgdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc192aXJ0dWFsKSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIG9uTW91bnRDb21tb24oc2hvdWxkX3JlbW91bnQpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIGNvbW1vbiwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IGFjY291bnRfdHJhbnNmZXIsIG9ucmFtcCwgcGF5bWVudF9hZ2VudCwgcGF5bWVudF9hZ2VudF90cmFuc2ZlciwgdHJhbnNhY3Rpb25faGlzdG9yeSB9ID1cbiAgICAgICAgICAgIG1vZHVsZXMuY2FzaGllcjtcblxuICAgICAgICBpZiAoY2xpZW50LmlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgLy8gYXZvaWQgY2FsbGluZyB0aGlzIGFnYWluXG4gICAgICAgICAgICBpZiAodGhpcy5pc19wb3B1bGF0aW5nX3ZhbHVlcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5pc19wb3B1bGF0aW5nX3ZhbHVlcyA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRfcmVtb3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0T25SZW1vdW50KHRoaXMub25Nb3VudENvbW1vbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIHNlZSBpZiBjbGllbnQncyBjb3VudHJ5IGhhcyBQQVxuICAgICAgICAgICAgLy8gaWYgeWVzLCB3ZSBjYW4gc2hvdyB0aGUgUEEgdGFiIGluIGNhc2hpZXJcbiAgICAgICAgICAgIHBheW1lbnRfYWdlbnQuc2V0UGF5bWVudEFnZW50TGlzdCgpLnRoZW4ocGF5bWVudF9hZ2VudC5maWx0ZXJQYXltZW50QWdlbnRMaXN0KTtcblxuICAgICAgICAgICAgaWYgKCFwYXltZW50X2FnZW50X3RyYW5zZmVyLmlzX3BheW1lbnRfYWdlbnQpIHtcbiAgICAgICAgICAgICAgICBwYXltZW50X2FnZW50X3RyYW5zZmVyLmNoZWNrSXNQYXltZW50QWdlbnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFhY2NvdW50X3RyYW5zZmVyLmFjY291bnRzX2xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci5zb3J0QWNjb3VudHNUcmFuc2ZlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW9ucmFtcC5pc19vbnJhbXBfdGFiX3Zpc2libGUgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmVuZHNXaXRoKHJvdXRlcy5jYXNoaWVyX29ucmFtcCkpIHtcbiAgICAgICAgICAgICAgICBjb21tb24ucm91dGVUbyhyb3V0ZXMuY2FzaGllcl9kZXBvc2l0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0cmFuc2FjdGlvbl9oaXN0b3J5LmlzX2NyeXB0b190cmFuc2FjdGlvbnNfdmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5lbmRzV2l0aChyb3V0ZXMuY2FzaGllcl9jcnlwdG9fdHJhbnNhY3Rpb25zKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29tbW9uLnJvdXRlVG8ocm91dGVzLmNhc2hpZXJfZGVwb3NpdCk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25faGlzdG9yeS5zZXRJc0NyeXB0b1RyYW5zYWN0aW9uc1Zpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25faGlzdG9yeS5vbk1vdW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0Q2FzaGllclRhYkluZGV4KGluZGV4KSB7XG4gICAgICAgIHRoaXMuY2FzaGllcl9yb3V0ZV90YWJfaW5kZXggPSBpbmRleDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0Tm90aWZpY2F0aW9uQ291bnQobm90aWZpY2F0aW9uX2NvdW50KSB7XG4gICAgICAgIHRoaXMucDJwX25vdGlmaWNhdGlvbl9jb3VudCA9IG5vdGlmaWNhdGlvbl9jb3VudDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNQMnBWaXNpYmxlKGlzX3AycF92aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuaXNfcDJwX3Zpc2libGUgPSBpc19wMnBfdmlzaWJsZTtcbiAgICAgICAgaWYgKCFpc19wMnBfdmlzaWJsZSAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuZW5kc1dpdGgocm91dGVzLmNhc2hpZXJfcDJwKSkge1xuICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNvbW1vbi5yb3V0ZVRvKFxuICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuYWNjb3VudF9wcm9tcHRfZGlhbG9nLmxhc3RfbG9jYXRpb24gPz8gcm91dGVzLmNhc2hpZXJfZGVwb3NpdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBpc19jYXNoaWVyX2xvY2tlZCgpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3N0YXR1cyB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcblxuICAgICAgICBpZiAoIWFjY291bnRfc3RhdHVzPy5zdGF0dXMpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGFjY291bnRfc3RhdHVzLnN0YXR1cy5zb21lKHN0YXR1c19uYW1lID0+IHN0YXR1c19uYW1lID09PSAnY2FzaGllcl9sb2NrZWQnKTtcbiAgICB9XG5cbiAgICBAY29tcHV0ZWRcbiAgICBnZXQgaXNfc3lzdGVtX21haW50ZW5hbmNlKCkge1xuICAgICAgICBjb25zdCB7IGFjY291bnRfc3RhdHVzIH0gPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50O1xuXG4gICAgICAgIGlmICghYWNjb3VudF9zdGF0dXM/LmNhc2hpZXJfdmFsaWRhdGlvbikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gYWNjb3VudF9zdGF0dXMuY2FzaGllcl92YWxpZGF0aW9uLnNvbWUodmFsaWRhdGlvbiA9PiB2YWxpZGF0aW9uID09PSAnc3lzdGVtX21haW50ZW5hbmNlJyk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldExvYWRpbmcoaXNfbG9hZGluZykge1xuICAgICAgICB0aGlzLmlzX2xvYWRpbmcgPSBpc19sb2FkaW5nO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRBY3RpdmVUYWIoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBhY2NvdW50U3dpdGNoZXJMaXN0ZW5lcigpIHtcbiAgICAgICAgY29uc3QgeyBpZnJhbWUsIHBheW1lbnRfYWdlbnQsIHdpdGhkcmF3IH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyO1xuXG4gICAgICAgIHdpdGhkcmF3LnZlcmlmaWNhdGlvbi5jbGVhclZlcmlmaWNhdGlvbigpO1xuICAgICAgICBwYXltZW50X2FnZW50LnZlcmlmaWNhdGlvbi5jbGVhclZlcmlmaWNhdGlvbigpO1xuICAgICAgICBpZnJhbWUuY2xlYXJJZnJhbWUoKTtcblxuICAgICAgICB0aGlzLnBheW1lbnRfYWdlbnQgPSBwYXltZW50X2FnZW50O1xuICAgICAgICB0aGlzLmlzX3BvcHVsYXRpbmdfdmFsdWVzID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5vblJlbW91bnQoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBvYnNlcnZhYmxlIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ0NvbnN0YW50cy9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJZnJhbWVTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoeyBXUywgcm9vdF9zdG9yZSB9KSB7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG4gICAgICAgIHRoaXMuV1MgPSBXUztcbiAgICB9XG5cbiAgICBAb2JzZXJ2YWJsZSBpZnJhbWVfaGVpZ2h0ID0gMDtcbiAgICBAb2JzZXJ2YWJsZSBpZnJhbWVfdXJsID0gJyc7XG4gICAgQG9ic2VydmFibGUgaXNfc2Vzc2lvbl90aW1lb3V0ID0gdHJ1ZTtcblxuICAgIG9uSWZyYW1lTG9hZGVkID0gJyc7XG4gICAgQG9ic2VydmFibGUgdGltZW91dF9zZXNzaW9uID0gJyc7XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0U2Vzc2lvblRpbWVvdXQoaXNfc2Vzc2lvbl90aW1lX291dCkge1xuICAgICAgICB0aGlzLmlzX3Nlc3Npb25fdGltZW91dCA9IGlzX3Nlc3Npb25fdGltZV9vdXQ7XG4gICAgICAgIGlmIChpc19zZXNzaW9uX3RpbWVfb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZU9uSWZyYW1lTG9hZGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgY2hlY2tJZnJhbWVMb2FkZWQoKSB7XG4gICAgICAgIGNvbnN0IHsgbW9kdWxlcywgdWkgfSA9IHRoaXMucm9vdF9zdG9yZTtcblxuICAgICAgICB0aGlzLnJlbW92ZU9uSWZyYW1lTG9hZGVkKCk7XG4gICAgICAgIHRoaXMub25JZnJhbWVMb2FkZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKC9jYXNoaWVyfGRvdWdoZmxvdy8udGVzdChlLm9yaWdpbikpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZS5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGhlaWdodCBvZiB0aGUgY29udGFpbmVyIGFmdGVyIGNvbnRlbnQgbG9hZHMgc28gdGhhdCB0aGVcbiAgICAgICAgICAgICAgICAvLyBsb2FkaW5nIGJhciBzdGF5cyB2ZXJ0aWNhbGx5IGNlbnRlcmVkIHVudGlsIHRoZSBlbmRcbiAgICAgICAgICAgICAgICBpZiAodWkuaXNfbW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGFpbmVySGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCAtIDEwMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250YWluZXJIZWlnaHQod2luZG93LmlubmVySGVpZ2h0IC0gMTkwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHJlbW92ZSB0aGUgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICAvLyBvbiBldmVyeSBpZnJhbWUgc2NyZWVuIGNoYW5nZSB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgaGVpZ2h0IHRvIG1vcmUvbGVzcyB0byBtYXRjaCB0aGUgbmV3IGNvbnRlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25JZnJhbWVMb2FkZWQsIGZhbHNlKTtcbiAgICB9XG5cbiAgICByZW1vdmVPbklmcmFtZUxvYWRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMub25JZnJhbWVMb2FkZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vbklmcmFtZUxvYWRlZCwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5vbklmcmFtZUxvYWRlZCA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGNsZWFyVGltZW91dENhc2hpZXJVcmwoKSB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXRfc2Vzc2lvbikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dF9zZXNzaW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRUaW1lb3V0Q2FzaGllclVybCgpIHtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRDYXNoaWVyVXJsKCk7XG4gICAgICAgIHRoaXMudGltZW91dF9zZXNzaW9uID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFNlc3Npb25UaW1lb3V0KHRydWUpO1xuICAgICAgICB9LCA2MDAwMCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldElmcmFtZVVybCh1cmwsIGNvbnRhaW5lciA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZS5hY3RpdmVfY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCB1aSB9ID0gdGhpcy5yb290X3N0b3JlO1xuXG4gICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lX3VybCA9IGAke3VybH0mdGhlbWU9JHt1aS5pc19kYXJrX21vZGVfb24gPyAnZGFyaycgOiAnbGlnaHQnfWA7XG4gICAgICAgICAgICAvLyBhZnRlciB3ZSBzZXQgaWZyYW1lIHVybCB3ZSBjYW4gY2xlYXIgdmVyaWZpY2F0aW9uIGNvZGVcbiAgICAgICAgICAgIGNsaWVudC5zZXRWZXJpZmljYXRpb25Db2RlKCcnLCBDb25zdGFudHMubWFwX2FjdGlvbltjb250YWluZXJdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lX3VybCA9IHVybDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRDb250YWluZXJIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuaWZyYW1lX2hlaWdodCA9IGhlaWdodDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgY2xlYXJJZnJhbWUoKSB7XG4gICAgICAgIHRoaXMuc2V0SWZyYW1lVXJsKCcnKTtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRDYXNoaWVyVXJsKCk7XG4gICAgICAgIHRoaXMuc2V0U2Vzc2lvblRpbWVvdXQodHJ1ZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcblxuY29uc3QgY3JlYXRlQmFueGFQcm92aWRlciA9IHN0b3JlID0+ICh7XG4gICAgaWNvbjogeyBkYXJrOiAnSWNDYXNoaWVyQmFueGFEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJCYW54YUxpZ2h0JyB9LFxuICAgIG5hbWU6ICdCYW54YScsXG4gICAgZ2V0RGVzY3JpcHRpb246ICgpID0+XG4gICAgICAgIGxvY2FsaXplKFxuICAgICAgICAgICAgJ0EgZmFzdCBhbmQgc2VjdXJlIGZpYXQtdG8tY3J5cHRvIHBheW1lbnQgc2VydmljZS4gRGVwb3NpdCBjcnlwdG9jdXJyZW5jaWVzIGZyb20gYW55d2hlcmUgaW4gdGhlIHdvcmxkIHVzaW5nIHlvdXIgY3JlZGl0L2RlYml0IGNhcmRzIGFuZCBiYW5rIHRyYW5zZmVycy4nXG4gICAgICAgICksXG4gICAgZ2V0QWxsb3dlZFJlc2lkZW5jaWVzOiAoKSA9PiBbJyonXSxcbiAgICBnZXRQYXltZW50SWNvbnM6ICgpID0+IFtcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyVmlzYURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclZpc2FMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyTWFzdGVyY2FyZERhcmsnLCBsaWdodDogJ0ljQ2FzaGllck1hc3RlcmNhcmRMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyQnBheURhcmsnLCBsaWdodDogJ0ljQ2FzaGllckJwYXlMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyU2VwYURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclNlcGFMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyQmx1ZXNoeWZ0RGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyQmx1ZXNoeWZ0TGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckZsZXhlcGluRGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyRmxleGVwaW5MaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyUGF5SWREYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJQYXlJZExpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJQb2xpRGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyUG9saUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJBcHBsZVBheScsIGxpZ2h0OiAnSWNDYXNoaWVyQXBwbGVQYXknIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckludGVyYWNFdHJhbnNmZXInLCBsaWdodDogJ0ljQ2FzaGllckludGVyYWNFdHJhbnNmZXInIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllcklkZWFsJywgbGlnaHQ6ICdJY0Nhc2hpZXJJZGVhbCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyUG9zdEJpbGxQYXlEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJQb3N0QmlsbFBheUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJTb2ZvcnQnLCBsaWdodDogJ0ljQ2FzaGllclNvZm9ydCcgfSxcbiAgICBdLFxuICAgIGdldFNjcmlwdERlcGVuZGVuY2llczogKCkgPT4gW10sIC8vIE5vbmUuXG4gICAgZ2V0RGVmYXVsdEZyb21DdXJyZW5jeTogKCkgPT4gJycsXG4gICAgZ2V0RnJvbUN1cnJlbmNpZXM6ICgpID0+IFsnKiddLFxuICAgIGdldFRvQ3VycmVuY2llczogKCkgPT4gWycqJ10sXG4gICAgZ2V0V2lkZ2V0SHRtbDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgc3RvcmUuV1Muc2VydmljZVRva2VuKHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX3Rva2VuOiAxLFxuICAgICAgICAgICAgICAgIHNlcnZpY2U6ICdiYW54YScsXG4gICAgICAgICAgICAgICAgcmVmZXJyZXI6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHVybCB9ID0gcmVzcG9uc2Uuc2VydmljZV90b2tlbi5iYW54YTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih1cmwpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzb2x2aW5nIGVtcHR5IHdpbGwvc2hvdWxkIHJlZGlyZWN0IHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBvbk1vdW50V2lkZ2V0Q29udGFpbmVyOiAoKSA9PiB7fSxcbiAgICBzaG91bGRfc2hvd19kZXBvc2l0X2FkZHJlc3M6IGZhbHNlLFxufSk7XG5cbmNvbnN0IGNyZWF0ZUNoYW5nZWxseVByb3ZpZGVyID0gc3RvcmUgPT4gKHtcbiAgICBpY29uOiB7IGRhcms6ICdJY0Nhc2hpZXJDaGFuZ2VsbHlEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJDaGFuZ2VsbHlMaWdodCcgfSxcbiAgICBuYW1lOiAnQ2hhbmdlbGx5JyxcbiAgICBnZXREZXNjcmlwdGlvbjogKCkgPT5cbiAgICAgICAgbG9jYWxpemUoXG4gICAgICAgICAgICAnWW91ciBzaW1wbGUgYWNjZXNzIHRvIGNyeXB0by4gRmFzdCBhbmQgc2VjdXJlIHdheSB0byBleGNoYW5nZSBhbmQgcHVyY2hhc2UgY3J5cHRvY3VycmVuY2llcy4gMjQvNyBsaXZlIGNoYXQgc3VwcG9ydC4nXG4gICAgICAgICksXG4gICAgZ2V0QWxsb3dlZFJlc2lkZW5jaWVzOiAoKSA9PiBbJyonXSxcbiAgICBnZXRQYXltZW50SWNvbnM6ICgpID0+IFtcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyVmlzYURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclZpc2FMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyTWFzdGVyY2FyZERhcmsnLCBsaWdodDogJ0ljQ2FzaGllck1hc3RlcmNhcmRMaWdodCcgfSxcbiAgICBdLFxuICAgIGdldFNjcmlwdERlcGVuZGVuY2llczogKCkgPT4gW10sXG4gICAgZ2V0RGVmYXVsdEZyb21DdXJyZW5jeTogKCkgPT4gJ3VzZCcsXG4gICAgZ2V0RnJvbUN1cnJlbmNpZXM6ICgpID0+IFsndXNkJywgJ2V1cicsICdnYnAnXSxcbiAgICBnZXRUb0N1cnJlbmNpZXM6ICgpID0+IFsnYmNoJywgJ2J0YycsICdldGMnLCAnZXRoJywgJ2x0YycsICd1c3QnXSxcbiAgICBnZXRXaWRnZXRIdG1sKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwczovL3dpZGdldC5jaGFuZ2VsbHkuY29tLz92PTMmdGhlbWU9ZGVmYXVsdCcpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ2Zyb21EZWZhdWx0JywgdGhpcy5nZXREZWZhdWx0RnJvbUN1cnJlbmN5KCkpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVuY3kgPSBzdG9yZS5yb290X3N0b3JlLmNsaWVudC5jdXJyZW5jeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VG9DdXJyZW5jaWVzKCkuaW5jbHVkZXMoY3VycmVuY3kpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9fY3VycmVuY3kgPSBjdXJyZW5jeSA9PT0gJ3VzdCcgPyAndXNkdCcgOiBjdXJyZW5jeTtcbiAgICAgICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgndG8nLCB0b19jdXJyZW5jeSk7XG4gICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ3RvRGVmYXVsdCcsIHRvX2N1cnJlbmN5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ2Ftb3VudCcsIDEpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ21lcmNoYW50X2lkJywgJ2lpcTNqZHQycDQ0eXJmYngnKTtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgb25Nb3VudFdpZGdldENvbnRhaW5lcjogKCkgPT4ge30sXG4gICAgc2hvdWxkX3Nob3dfZGVwb3NpdF9hZGRyZXNzOiB0cnVlLFxufSk7XG5cbmNvbnN0IGNyZWF0ZVhhblBvb2xQcm92aWRlciA9IHN0b3JlID0+ICh7XG4gICAgaWNvbjogeyBkYXJrOiAnSWNDYXNoaWVyWGFucG9vbERhcmsnLCBsaWdodDogJ0ljQ2FzaGllclhhbnBvb2xMaWdodCcgfSxcbiAgICBuYW1lOiAnWGFuUG9vbCcsXG4gICAgZ2V0RGVzY3JpcHRpb246ICgpID0+XG4gICAgICAgIGxvY2FsaXplKFxuICAgICAgICAgICAgJ0J1eSBjcnlwdG9jdXJyZW5jaWVzIGluIGFuIGluc3RhbnQuIEVuam95IGVhc3ksIHF1aWNrLCBhbmQgc2VjdXJlIGV4Y2hhbmdlcyB1c2luZyB5b3VyIGxvY2FsIHBheW1lbnQgbWV0aG9kcy4nXG4gICAgICAgICksXG4gICAgZ2V0QWxsb3dlZFJlc2lkZW5jaWVzOiAoKSA9PiBbJyonXSxcbiAgICBnZXRQYXltZW50SWNvbnM6ICgpID0+IFtcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyRnBzRGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyRnBzTGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckFsaVBheURhcmsnLCBsaWdodDogJ0ljQ2FzaGllckFsaVBheUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJHb1BheURhcmsnLCBsaWdodDogJ0ljQ2FzaGllckdvUGF5TGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllck1hbmRpcmlQYXknLCBsaWdodDogJ0ljQ2FzaGllck1hbmRpcmlQYXknIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckluc3RhUGF5TGlnaHQnLCBsaWdodDogJ0ljQ2FzaGllckluc3RhUGF5RGFyaycgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyQ2VidWFuYUxodWlsbGllckRhcmsnLCBsaWdodDogJ0ljQ2FzaGllckNlYnVhbmFMaHVpbGxpZXJMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyUGF5Tm93RGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyUGF5Tm93TGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllclVwaURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclVwaUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJQcm9tcHRQYXlEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJQcm9tcHRQYXlMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyVmlldHRsZVBheScsIGxpZ2h0OiAnSWNDYXNoaWVyVmlldHRsZVBheScgfSxcbiAgICBdLFxuICAgIGdldFNjcmlwdERlcGVuZGVuY2llczogKCkgPT4gW10sXG4gICAgZ2V0VG9DdXJyZW5jaWVzOiAoKSA9PiBbJ2J0YycsICdldGgnLCAndXN0JywgJ3ppbCcsICduZW0nXSxcbiAgICBnZXRXaWRnZXRIdG1sKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbmN5IH0gPSBzdG9yZS5yb290X3N0b3JlLmNsaWVudDtcblxuICAgICAgICAgICAgbGV0IHVybCA9ICdodHRwczovL2NoZWNrb3V0LnhhbnBvb2wuY29tLyc7XG5cbiAgICAgICAgICAgIHVybCArPSBgP2FwaUtleT1kYjRlYzYzOGRmZjlhNjhhYmRhMWVmNmI3NjM4YzIyMGA7XG4gICAgICAgICAgICB1cmwgKz0gYCZyZWRpcmVjdFVybD0ke3dpbmRvdy5sb2NhdGlvbi5ocmVmfWA7XG4gICAgICAgICAgICB1cmwgKz0gYCZ3YWxsZXQ9JHtzdG9yZS5kZXBvc2l0X2FkZHJlc3N9YDtcbiAgICAgICAgICAgIHVybCArPSBgJmNyeXB0b0N1cnJlbmN5PSR7Y3VycmVuY3kgPT09ICdVU1QnID8gJ1VTRFQnIDogY3VycmVuY3l9YDtcbiAgICAgICAgICAgIHVybCArPSBgJnRyYW5zYWN0aW9uVHlwZT1idXlgO1xuXG4gICAgICAgICAgICB3aW5kb3cub3Blbih1cmwpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIG9uTW91bnRXaWRnZXRDb250YWluZXI6ICgpID0+IHt9LFxuICAgIHNob3VsZF9zaG93X2RlcG9zaXRfYWRkcmVzczogZmFsc2UsXG59KTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNyZWF0ZUJhbnhhUHJvdmlkZXIsXG4gICAgY3JlYXRlQ2hhbmdlbGx5UHJvdmlkZXIsXG4gICAgY3JlYXRlWGFuUG9vbFByb3ZpZGVyLFxufTtcbiIsImltcG9ydCB7IGFjdGlvbiwgY29tcHV0ZWQsIG9ic2VydmFibGUsIHJlYWN0aW9uIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBsb2NhbGl6ZSB9IGZyb20gJ0BkZXJpdi90cmFuc2xhdGlvbnMnO1xuaW1wb3J0IHsgZ2V0S2ViYWJDYXNlLCBpc0NyeXB0b2N1cnJlbmN5LCByb3V0ZXMsIHdlYnNpdGVVcmwgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCBPbnJhbXBQcm92aWRlcnMgZnJvbSAnQ29uZmlnL29uLXJhbXAtcHJvdmlkZXJzJztcbmltcG9ydCBCYXNlU3RvcmUgZnJvbSAnLi9iYXNlLXN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT25SYW1wU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmUge1xuICAgIEBvYnNlcnZhYmxlIGFwaV9lcnJvciA9IG51bGw7XG4gICAgQG9ic2VydmFibGUgZGVwb3NpdF9hZGRyZXNzID0gbnVsbDtcbiAgICBAb2JzZXJ2YWJsZSBpc19kZXBvc2l0X2FkZHJlc3NfbG9hZGluZyA9IHRydWU7XG4gICAgQG9ic2VydmFibGUgaXNfZGVwb3NpdF9hZGRyZXNzX3BvcG92ZXJfb3BlbiA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX29ucmFtcF9tb2RhbF9vcGVuID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgaXNfcmVxdWVzdGluZ193aWRnZXRfaHRtbCA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlLnNoYWxsb3cgb25yYW1wX3Byb3ZpZGVycyA9IFtdO1xuICAgIEBvYnNlcnZhYmxlLnJlZiBzZWxlY3RlZF9wcm92aWRlciA9IG51bGw7XG4gICAgQG9ic2VydmFibGUgc2hvdWxkX3Nob3dfd2lkZ2V0ID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgd2lkZ2V0X2Vycm9yID0gbnVsbDtcbiAgICBAb2JzZXJ2YWJsZSB3aWRnZXRfaHRtbCA9IG51bGw7XG5cbiAgICBkZXBvc2l0X2FkZHJlc3NfcmVmID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHsgV1MsIHJvb3Rfc3RvcmUgfSkge1xuICAgICAgICBzdXBlcih7IHJvb3Rfc3RvcmUgfSk7XG4gICAgICAgIHRoaXMuV1MgPSBXUztcblxuICAgICAgICB0aGlzLm9uQ2xpZW50SW5pdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldE9ucmFtcFByb3ZpZGVycyhbXG4gICAgICAgICAgICAgICAgT25yYW1wUHJvdmlkZXJzLmNyZWF0ZUNoYW5nZWxseVByb3ZpZGVyKHRoaXMpLFxuICAgICAgICAgICAgICAgIE9ucmFtcFByb3ZpZGVycy5jcmVhdGVYYW5Qb29sUHJvdmlkZXIodGhpcyksXG4gICAgICAgICAgICAgICAgT25yYW1wUHJvdmlkZXJzLmNyZWF0ZUJhbnhhUHJvdmlkZXIodGhpcyksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQGNvbXB1dGVkXG4gICAgZ2V0IGlzX29ucmFtcF90YWJfdmlzaWJsZSgpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQgfSA9IHRoaXMucm9vdF9zdG9yZTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgY2xpZW50LmlzX3ZpcnR1YWwgPT09IGZhbHNlICYmXG4gICAgICAgICAgICBpc0NyeXB0b2N1cnJlbmN5KGNsaWVudC5jdXJyZW5jeSkgJiZcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRfb25yYW1wX3Byb3ZpZGVycy5sZW5ndGggPiAwXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgQGNvbXB1dGVkXG4gICAgZ2V0IGZpbHRlcmVkX29ucmFtcF9wcm92aWRlcnMoKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50IH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMub25yYW1wX3Byb3ZpZGVyc1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBwcm92aWRlciBzdXBwb3J0cyB0aGlzIHVzZXIncyBhY2NvdW50IGN1cnJlbmN5LlxuICAgICAgICAgICAgICAgIC5maWx0ZXIocHJvdmlkZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b19jdXJyZW5jaWVzID0gcHJvdmlkZXIuZ2V0VG9DdXJyZW5jaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b19jdXJyZW5jaWVzLmluY2x1ZGVzKCcqJykgfHwgdG9fY3VycmVuY2llcy5pbmNsdWRlcyhjbGllbnQuY3VycmVuY3kudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgcHJvdmlkZXIgc3VwcG9ydHMgdGhpcyB1c2VyJ3MgcmVzaWRlbmN5LlxuICAgICAgICAgICAgICAgIC5maWx0ZXIocHJvdmlkZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkX3Jlc2lkZW5jaWVzID0gcHJvdmlkZXIuZ2V0QWxsb3dlZFJlc2lkZW5jaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkX3Jlc2lkZW5jaWVzLmluY2x1ZGVzKCcqJykgfHwgYWxsb3dlZF9yZXNpZGVuY2llcy5pbmNsdWRlcyhjbGllbnQucmVzaWRlbmNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBvbnJhbXBfcG9wdXBfbW9kYWxfdGl0bGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZF9zaG93X3dpZGdldCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdQYXltZW50IGNoYW5uZWwnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkX3Byb3ZpZGVyKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRfc2hvd19kaWFsb2cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ091ciBzZXJ2ZXIgY2Fubm90IHJldHJpZXZlIGFuIGFkZHJlc3MuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJyAnOyAvLyBFbXB0eSBzdHJpbmcgdG8gcmVuZGVyIGhlYWRlciArIGNsb3NlIGljb24uXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBAY29tcHV0ZWRcbiAgICBnZXQgc2hvdWxkX3Nob3dfZGlhbG9nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGlfZXJyb3I7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIG9uTW91bnRPbnJhbXAoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZVRoaXJkUGFydHlKc1JlYWN0aW9uID0gcmVhY3Rpb24oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnNlbGVjdGVkX3Byb3ZpZGVyLFxuICAgICAgICAgICAgYXN5bmMgcHJvdmlkZXIgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IHByb3ZpZGVyLmdldFNjcmlwdERlcGVuZGVuY2llcygpO1xuICAgICAgICAgICAgICAgIGlmIChkZXBlbmRlbmNpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IGRlZmF1bHQ6IGxvYWRqcyB9ID0gYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwibG9hZGpzXCIgKi8gJ2xvYWRqcycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdF9uYW1lID0gYCR7Z2V0S2ViYWJDYXNlKHByb3ZpZGVyLm5hbWUpfS1vbnJhbXBgO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkanMuaXNEZWZpbmVkKHNjcmlwdF9uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkanMoZGVwZW5kZW5jaWVzLCBzY3JpcHRfbmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRGVwZW5kZW5jaWVzIGZvciBvbnJhbXAgcHJvdmlkZXIgJHtwcm92aWRlci5uYW1lfSBjb3VsZCBub3QgYmUgbG9hZGVkLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQcm92aWRlcihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBXaGVuIFwic2hvdWxkX3Nob3dfd2lkZ2V0XCIsIGF0dGVtcHQgdG8gZmV0Y2ggXCJzZWxlY3RlZF9wcm92aWRlclwiJ3MgXCJ3aWRnZXRfaHRtbFwiLlxuICAgICAgICB0aGlzLmRpc3Bvc2VHZXRXaWRnZXRIdG1sUmVhY3Rpb24gPSByZWFjdGlvbihcbiAgICAgICAgICAgICgpID0+IHRoaXMuc2hvdWxkX3Nob3dfd2lkZ2V0LFxuICAgICAgICAgICAgc2hvdWxkX3Nob3dfd2lkZ2V0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkX3Nob3dfd2lkZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzX3JlcXVlc3Rpbmdfd2lkZ2V0X2h0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNSZXF1ZXN0aW5nV2lkZ2V0SHRtbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9wcm92aWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldFdpZGdldEh0bWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4od2lkZ2V0X2h0bWwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aWRnZXRfaHRtbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWd1bGFyIHByb3ZpZGVycyAoaWZyYW1lL0pTIGVtYmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpZGdldEh0bWwod2lkZ2V0X2h0bWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuIGVtcHR5IHJlc29sdmUgKHdpZGdldF9odG1sKSBpZGVudGlmaWVzIGEgcmVkaXJlY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2hvdWxkU2hvd1dpZGdldChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRXaWRnZXRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy5zZXRJc1JlcXVlc3RpbmdXaWRnZXRIdG1sKGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBvblVubW91bnRPbnJhbXAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kaXNwb3NlVGhpcmRQYXJ0eUpzUmVhY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZVRoaXJkUGFydHlKc1JlYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRpc3Bvc2VHZXRXaWRnZXRIdG1sUmVhY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUdldFdpZGdldEh0bWxSZWFjdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIG9uQ2xpY2tDb3B5RGVwb3NpdEFkZHJlc3MoKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHRoaXMuZGVwb3NpdF9hZGRyZXNzX3JlZik7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0aW9ucyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgc2VsZWN0aW9ucy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgc2VsZWN0aW9ucy5hZGRSYW5nZShyYW5nZSk7XG5cbiAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGhpcy5kZXBvc2l0X2FkZHJlc3MpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRJc0RlcG9zaXRBZGRyZXNzUG9wb3Zlck9wZW4odHJ1ZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0SXNEZXBvc2l0QWRkcmVzc1BvcG92ZXJPcGVuKGZhbHNlKSwgNTAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIG9uQ2xpY2tEaXNjbGFpbWVyQ29udGludWUoKSB7XG4gICAgICAgIHRoaXMuc2V0U2hvdWxkU2hvd1dpZGdldCh0cnVlKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgb25DbGlja0dvVG9EZXBvc2l0UGFnZSgpIHtcbiAgICAgICAgdGhpcy5wb2xsQXBpRm9yRGVwb3NpdEFkZHJlc3MoZmFsc2UpO1xuICAgICAgICB3aW5kb3cub3Blbih3ZWJzaXRlVXJsKCkgKyByb3V0ZXMuY2FzaGllcl9kZXBvc2l0LnN1YnN0cmluZygxKSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHBvbGxBcGlGb3JEZXBvc2l0QWRkcmVzcyhzaG91bGRfYWxsb3dfZW1wdHlfYWRkcmVzcykge1xuICAgICAgICAvLyBzaG91bGRfYWxsb3dfZW1wdHlfYWRkcmVzczogQVBJIHJldHVybnMgZW1wdHkgZGVwb3NpdCBhZGRyZXNzIGZvciBsZWdhY3kgYWNjb3VudHNcbiAgICAgICAgLy8gdGhhdCBoYXZlIG5ldmVyIGdlbmVyYXRlZCBhIGRlcG9zaXQgYWRkcmVzcy4gU2V0dGluZyB0aGlzIHRvIFwidHJ1ZVwiIHdpbGwgYWxsb3dcbiAgICAgICAgLy8gdGhlIHVzZXIgdG8gYmUgcmVkaXJlY3RlZCB0byB0aGUgRGVwb3NpdCBwYWdlICh3aGVyZSBhbiBhZGRyZXNzIHdpbGwgYmUgZ2VuZXJhdGVkKS5cbiAgICAgICAgLy8gU2V0dGluZyB0aGlzIHRvIFwiZmFsc2VcIiB3aWxsIHN0YXJ0IHBvbGxpbmcgdGhlIEFQSSBmb3IgdGhpcyBkZXBvc2l0IGFkZHJlc3MuXG5cbiAgICAgICAgdGhpcy5zZXRJc0RlcG9zaXRBZGRyZXNzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgdGhpcy5zZXRBcGlFcnJvcihudWxsKTtcblxuICAgICAgICBjb25zdCBkZXBvc2l0X2FkZHJlc3NfaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBnZXREZXBvc2l0QWRkcmVzc0Zyb21BcGksIDMwMDApO1xuICAgICAgICBjb25zdCBnZXREZXBvc2l0QWRkcmVzc0Zyb21BcGkgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLldTLmF1dGhvcml6ZWQuY2FzaGllcignZGVwb3NpdCcsIHsgcHJvdmlkZXI6ICdjcnlwdG8nLCB0eXBlOiAnYXBpJyB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2hvdWxkX2NsZWFyX2ludGVydmFsID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBcGlFcnJvcihyZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZF9jbGVhcl9pbnRlcnZhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhZGRyZXNzIH0gPSByZXNwb25zZS5jYXNoaWVyLmRlcG9zaXQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3MgfHwgc2hvdWxkX2FsbG93X2VtcHR5X2FkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGVwb3NpdEFkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRfY2xlYXJfaW50ZXJ2YWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZF9jbGVhcl9pbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGRlcG9zaXRfYWRkcmVzc19pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNEZXBvc2l0QWRkcmVzc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGdldERlcG9zaXRBZGRyZXNzRnJvbUFwaSgpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZGVwb3NpdF9hZGRyZXNzX2ludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SXNEZXBvc2l0QWRkcmVzc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9LCAzMDAwMCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHJlc2V0UG9wdXAoKSB7XG4gICAgICAgIHRoaXMuc2V0QXBpRXJyb3IobnVsbCk7XG4gICAgICAgIHRoaXMuc2V0RGVwb3NpdEFkZHJlc3MobnVsbCk7XG4gICAgICAgIHRoaXMuc2V0RGVwb3NpdEFkZHJlc3NSZWYobnVsbCk7XG4gICAgICAgIHRoaXMuc2V0SXNEZXBvc2l0QWRkcmVzc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQcm92aWRlcihudWxsKTtcbiAgICAgICAgdGhpcy5zZXRTaG91bGRTaG93V2lkZ2V0KGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRXaWRnZXRFcnJvcihudWxsKTtcbiAgICAgICAgdGhpcy5zZXRXaWRnZXRIdG1sKG51bGwpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRBcGlFcnJvcihhcGlfZXJyb3IpIHtcbiAgICAgICAgdGhpcy5hcGlfZXJyb3IgPSBhcGlfZXJyb3I7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldENvcHlJY29uUmVmKHJlZikge1xuICAgICAgICB0aGlzLmNvcHlfaWNvbl9yZWYgPSByZWY7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldERlcG9zaXRBZGRyZXNzKGRlcG9zaXRfYWRkcmVzcykge1xuICAgICAgICB0aGlzLmRlcG9zaXRfYWRkcmVzcyA9IGRlcG9zaXRfYWRkcmVzcztcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0RGVwb3NpdEFkZHJlc3NSZWYocmVmKSB7XG4gICAgICAgIHRoaXMuZGVwb3NpdF9hZGRyZXNzX3JlZiA9IHJlZjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNEZXBvc2l0QWRkcmVzc0xvYWRpbmcoaXNfbG9hZGluZykge1xuICAgICAgICB0aGlzLmlzX2RlcG9zaXRfYWRkcmVzc19sb2FkaW5nID0gaXNfbG9hZGluZztcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNEZXBvc2l0QWRkcmVzc1BvcG92ZXJPcGVuKGlzX29wZW4pIHtcbiAgICAgICAgdGhpcy5pc19kZXBvc2l0X2FkZHJlc3NfcG9wb3Zlcl9vcGVuID0gaXNfb3BlbjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNPblJhbXBNb2RhbE9wZW4oaXNfb3Blbikge1xuICAgICAgICB0aGlzLmlzX29ucmFtcF9tb2RhbF9vcGVuID0gaXNfb3BlbjtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNSZXF1ZXN0aW5nV2lkZ2V0SHRtbChpc19yZXF1ZXN0aW5nX3dpZGdldF9odG1sKSB7XG4gICAgICAgIHRoaXMuaXNfcmVxdWVzdGluZ193aWRnZXRfaHRtbCA9IGlzX3JlcXVlc3Rpbmdfd2lkZ2V0X2h0bWw7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFNlbGVjdGVkUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICAgICAgaWYgKHByb3ZpZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkX3Byb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgICAgICAgICB0aGlzLnNldElzT25SYW1wTW9kYWxPcGVuKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5wb2xsQXBpRm9yRGVwb3NpdEFkZHJlc3ModHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldElzT25SYW1wTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfcHJvdmlkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFNob3VsZFNob3dXaWRnZXQoc2hvdWxkX3Nob3cpIHtcbiAgICAgICAgdGhpcy5zaG91bGRfc2hvd193aWRnZXQgPSBzaG91bGRfc2hvdztcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0T25yYW1wUHJvdmlkZXJzKG9ucmFtcF9wcm92aWRlcnMpIHtcbiAgICAgICAgdGhpcy5vbnJhbXBfcHJvdmlkZXJzID0gb25yYW1wX3Byb3ZpZGVycy5zbGljZSgpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRXaWRnZXRFcnJvcih3aWRnZXRfZXJyb3IpIHtcbiAgICAgICAgdGhpcy53aWRnZXRfZXJyb3IgPSB3aWRnZXRfZXJyb3I7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFdpZGdldEh0bWwod2lkZ2V0X2h0bWwpIHtcbiAgICAgICAgdGhpcy53aWRnZXRfaHRtbCA9IHdpZGdldF9odG1sO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGFjdGlvbiwgb2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZXJpZmljYXRpb25TdG9yZSB7XG4gICAgY29uc3RydWN0b3IoeyBXUywgcm9vdF9zdG9yZSB9KSB7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG4gICAgICAgIHRoaXMuV1MgPSBXUztcbiAgICB9XG5cbiAgICBAb2JzZXJ2YWJsZSBpc19idXR0b25fY2xpY2tlZCA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIHRpbWVvdXRfYnV0dG9uID0gJyc7XG4gICAgQG9ic2VydmFibGUgZXJyb3IgPSBuZXcgRXJyb3JTdG9yZSgpO1xuICAgIEBvYnNlcnZhYmxlIGlzX2VtYWlsX3NlbnQgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc19yZXNlbmRfY2xpY2tlZCA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIHJlc2VuZF90aW1lb3V0ID0gNjA7XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNCdXR0b25DbGlja2VkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXNfYnV0dG9uX2NsaWNrZWQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0VGltZW91dEJ1dHRvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpbWVvdXRfYnV0dG9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldElzRW1haWxTZW50KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXNfZW1haWxfc2VudCA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc1Jlc2VuZENsaWNrZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pc19yZXNlbmRfY2xpY2tlZCA9IHZhbHVlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRSZXNlbmRUaW1lb3V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMucmVzZW5kX3RpbWVvdXQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXRWZXJpZmljYXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXRfYnV0dG9uKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0X2J1dHRvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0VGltZW91dFZlcmlmaWNhdGlvbigpIHtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRWZXJpZmljYXRpb24oKTtcbiAgICAgICAgdGhpcy5zZXRUaW1lb3V0QnV0dG9uKFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclZlcmlmaWNhdGlvbigpO1xuICAgICAgICAgICAgfSwgMzYwMDAwMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsKCkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IHJlc2V0UGF5bWVudEFnZW50IH0gPSBtb2R1bGVzLmNhc2hpZXIucGF5bWVudF9hZ2VudDtcbiAgICAgICAgY29uc3QgeyBhY3RpdmVfY29udGFpbmVyIH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gQ29uc3RhbnRzLm1hcF9hY3Rpb25bYWN0aXZlX2NvbnRhaW5lcl07XG5cbiAgICAgICAgaWYgKHRoaXMuaXNfYnV0dG9uX2NsaWNrZWQgfHwgIWNsaWVudC5lbWFpbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICB0aGlzLnNldElzQnV0dG9uQ2xpY2tlZCh0cnVlKTtcbiAgICAgICAgY29uc3Qgd2l0aGRyYXdhbF90eXBlID0gY29udGFpbmVyID09PSAncGF5bWVudF9hZ2VudF93aXRoZHJhdycgPyAncGF5bWVudGFnZW50X3dpdGhkcmF3JyA6ICdwYXltZW50X3dpdGhkcmF3JztcbiAgICAgICAgY29uc3QgcmVzcG9uc2VfdmVyaWZ5X2VtYWlsID0gYXdhaXQgdGhpcy5XUy52ZXJpZnlFbWFpbChjbGllbnQuZW1haWwsIHdpdGhkcmF3YWxfdHlwZSk7XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlX3ZlcmlmeV9lbWFpbC5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5jbGVhclZlcmlmaWNhdGlvbigpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlX3ZlcmlmeV9lbWFpbC5lcnJvci5jb2RlID09PSAnUGF5bWVudEFnZW50V2l0aGRyYXdFcnJvcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZShyZXNwb25zZV92ZXJpZnlfZW1haWwuZXJyb3IsIHJlc2V0UGF5bWVudEFnZW50LCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX3ZlcmlmeV9lbWFpbC5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SXNFbWFpbFNlbnQodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldFRpbWVvdXRWZXJpZmljYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICByZXNlbmRWZXJpZmljYXRpb25FbWFpbCgpIHtcbiAgICAgICAgLy8gZG9uJ3QgYWxsb3cgY2xpY2tpbmcgd2hpbGUgb25nb2luZyB0aW1lb3V0XG4gICAgICAgIGlmICh0aGlzLnJlc2VuZF90aW1lb3V0IDwgNjApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldElzQnV0dG9uQ2xpY2tlZChmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0Q291bnREb3duUmVzZW5kVmVyaWZpY2F0aW9uKCk7XG4gICAgICAgIHRoaXMuc2VuZFZlcmlmaWNhdGlvbkVtYWlsKCk7XG4gICAgfVxuXG4gICAgc2V0Q291bnREb3duUmVzZW5kVmVyaWZpY2F0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFJlc2VuZFRpbWVvdXQodGhpcy5yZXNlbmRfdGltZW91dCAtIDEpO1xuICAgICAgICBjb25zdCByZXNlbmRfaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNlbmRfdGltZW91dCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzZW5kVGltZW91dCg2MCk7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChyZXNlbmRfaW50ZXJ2YWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlc2VuZFRpbWVvdXQodGhpcy5yZXNlbmRfdGltZW91dCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAxMDAwKTtcbiAgICB9XG5cbiAgICBjbGVhclZlcmlmaWNhdGlvbigpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBhY3RpdmVfY29udGFpbmVyIH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gQ29uc3RhbnRzLm1hcF9hY3Rpb25bYWN0aXZlX2NvbnRhaW5lcl07XG5cbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRWZXJpZmljYXRpb24oKTtcbiAgICAgICAgdGhpcy5zZXRJc0J1dHRvbkNsaWNrZWQoZmFsc2UpO1xuICAgICAgICB0aGlzLnNldElzRW1haWxTZW50KGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRJc1Jlc2VuZENsaWNrZWQoZmFsc2UpO1xuICAgICAgICB0aGlzLnNldFJlc2VuZFRpbWVvdXQoNjApO1xuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJywgbnVsbCwgbnVsbCk7XG4gICAgICAgIGNsaWVudC5zZXRWZXJpZmljYXRpb25Db2RlKCcnLCBjb250YWluZXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGFjdGlvbiwgY29tcHV0ZWQsIG9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IGZvcm1hdE1vbmV5LCByb3V0ZXMgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnQ29uc3RhbnRzL2NvbnN0YW50cyc7XG5pbXBvcnQgRXJyb3JTdG9yZSBmcm9tICcuL2Vycm9yLXN0b3JlJztcbmltcG9ydCBWZXJpZmljYXRpb25TdG9yZSBmcm9tICcuL3ZlcmlmaWNhdGlvbi1zdG9yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBZ2VudFN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5XUyA9IFdTO1xuICAgIH1cblxuICAgIEBvYnNlcnZhYmxlIGxpc3QgPSBbXTtcbiAgICBAb2JzZXJ2YWJsZSBhZ2VudHMgPSBbXTtcbiAgICBAb2JzZXJ2YWJsZSBjb250YWluZXIgPSBDb25zdGFudHMuY29udGFpbmVycy5wYXltZW50X2FnZW50O1xuICAgIEBvYnNlcnZhYmxlIGVycm9yID0gbmV3IEVycm9yU3RvcmUoKTtcbiAgICBAb2JzZXJ2YWJsZSBmaWx0ZXJlZF9saXN0ID0gW107XG4gICAgQG9ic2VydmFibGUgaXNfbmFtZV9zZWxlY3RlZCA9IHRydWU7XG4gICAgQG9ic2VydmFibGUgaXNfd2l0aGRyYXcgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc190cnlfd2l0aGRyYXdfc3VjY2Vzc2Z1bCA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX3dpdGhkcmF3X3N1Y2Nlc3NmdWwgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBjb25maXJtID0ge307XG4gICAgQG9ic2VydmFibGUgcmVjZWlwdCA9IHt9O1xuICAgIEBvYnNlcnZhYmxlIHNlbGVjdGVkX2JhbmsgPSAwO1xuICAgIEBvYnNlcnZhYmxlIHN1cHBvcnRlZF9iYW5rcyA9IFtdO1xuICAgIEBvYnNlcnZhYmxlIHZlcmlmaWNhdGlvbiA9IG5ldyBWZXJpZmljYXRpb25TdG9yZSh7IHJvb3Rfc3RvcmU6IHRoaXMucm9vdF9zdG9yZSwgV1M6IHRoaXMuV1MgfSk7XG4gICAgQG9ic2VydmFibGUgYWN0aXZlX3RhYl9pbmRleCA9IDA7XG4gICAgQG9ic2VydmFibGUgYWxsX3BheW1lbnRfYWdlbnRfbGlzdCA9IFtdO1xuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldEFjdGl2ZVRhYkluZGV4KGluZGV4KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlX3RhYl9pbmRleCA9IGluZGV4O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRBY3RpdmVUYWIoaW5kZXgpIHtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWJJbmRleChpbmRleCk7XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBpc19wYXltZW50X2FnZW50X3Zpc2libGUoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLmZpbHRlcmVkX2xpc3QubGVuZ3RoIHx8IHRoaXMuYWdlbnRzLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIGdldFBheW1lbnRBZ2VudExpc3QoKSB7XG4gICAgICAgIC8vIHdhaXQgZm9yIGdldF9zZXR0aW5ncyBzbyByZXNpZGVuY2UgZ2V0cyBwb3B1bGF0ZWQgaW4gY2xpZW50LXN0b3JlXG4gICAgICAgIC8vIFRPRE86IHNldCByZXNpZGVuY2UgaW4gY2xpZW50LXN0b3JlIGZyb20gYXV0aG9yaXplIHNvIGl0J3MgZmFzdGVyXG4gICAgICAgIGF3YWl0IHRoaXMuV1Mud2FpdCgnZ2V0X3NldHRpbmdzJyk7XG4gICAgICAgIGNvbnN0IHsgcmVzaWRlbmNlLCBjdXJyZW5jeSB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcbiAgICAgICAgcmV0dXJuIHRoaXMuV1MuYXV0aG9yaXplZC5wYXltZW50QWdlbnRMaXN0KHJlc2lkZW5jZSwgY3VycmVuY3kpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBnZXRQYXltZW50QWdlbnREZXRhaWxzKCkge1xuICAgICAgICBjb25zdCB7IHBheW1lbnRhZ2VudF9kZXRhaWxzIH0gPSBhd2FpdCB0aGlzLldTLmF1dGhvcml6ZWQucGF5bWVudEFnZW50RGV0YWlscygpO1xuICAgICAgICByZXR1cm4gcGF5bWVudGFnZW50X2RldGFpbHM7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFkZFN1cHBvcnRlZEJhbmsoYmFuaykge1xuICAgICAgICBjb25zdCBzdXBwb3J0ZWRfYmFua19leGlzdHMgPSB0aGlzLnN1cHBvcnRlZF9iYW5rcy5maW5kKFxuICAgICAgICAgICAgc3VwcG9ydGVkX2JhbmsgPT4gc3VwcG9ydGVkX2JhbmsudmFsdWUgPT09IGJhbmsudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgICAgICBpZiAoIXN1cHBvcnRlZF9iYW5rX2V4aXN0cykge1xuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRfYmFua3MucHVzaCh7IHRleHQ6IGJhbmssIHZhbHVlOiBiYW5rLnRvTG93ZXJDYXNlKCkgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgY2xlYXJTdXBwZXJ0ZWRCYW5rcygpIHtcbiAgICAgICAgdGhpcy5zdXBwb3J0ZWRfYmFua3MgPSBbXTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc29ydFN1cHBvcnRlZEJhbmtzKCkge1xuICAgICAgICAvLyBzb3J0IHN1cHBvcnRlZCBiYW5rcyBhbHBoYWJldGljYWxseSBieSB2YWx1ZSwgdGhlIG9wdGlvbiAnQWxsIHBheW1lbnQgYWdlbnRzJyB3aXRoIHZhbHVlIDAgc2hvdWxkIGJlIG9uIHRvcFxuICAgICAgICB0aGlzLnN1cHBvcnRlZF9iYW5rcy5yZXBsYWNlKFxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRfYmFua3Muc2xpY2UoKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGEudmFsdWUgPCBiLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGEudmFsdWUgPiBiLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldExpc3QocGFfbGlzdCkge1xuICAgICAgICB0aGlzLmxpc3QucHVzaChwYV9saXN0KTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgY2xlYXJMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3QgPSBbXTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgc2V0UGF5bWVudEFnZW50TGlzdChwYV9saXN0KSB7XG4gICAgICAgIGNvbnN0IHBheW1lbnRfYWdlbnRfbGlzdCA9IHBhX2xpc3QgfHwgKGF3YWl0IHRoaXMuZ2V0UGF5bWVudEFnZW50TGlzdCgpKTtcbiAgICAgICAgdGhpcy5jbGVhckxpc3QoKTtcbiAgICAgICAgdGhpcy5jbGVhclN1cHBlcnRlZEJhbmtzKCk7XG4gICAgICAgIC8vIFRPRE86IE9uY2UgdGVsZXBob25lLCB1cmwgYW5kIHN1cHBvcnRlZF9iYW5rcyByZW1vdmVkIGZyb20gcGF5bWVudGFnZW50X2xpc3QubGlzdCB3ZSBjYW4gcmVtb3ZlIHRoZW0gYW5kIGp1c3QgdXNlIHRoZSBwbHVyYWwgb25lc1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9saXN0LnBheW1lbnRhZ2VudF9saXN0Py5saXN0LmZvckVhY2gocGF5bWVudF9hZ2VudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRMaXN0KHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHBheW1lbnRfYWdlbnQuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHBob25lczogcGF5bWVudF9hZ2VudD8ucGhvbmVfbnVtYmVycyB8fCBwYXltZW50X2FnZW50Py50ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBheW1lbnRfYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkX2JhbmtzOiBwYXltZW50X2FnZW50Py5zdXBwb3J0ZWRfcGF5bWVudF9tZXRob2RzIHx8IHBheW1lbnRfYWdlbnQ/LnN1cHBvcnRlZF9iYW5rcyxcbiAgICAgICAgICAgICAgICAgICAgdXJsczogcGF5bWVudF9hZ2VudD8udXJscyB8fCBwYXltZW50X2FnZW50Py51cmwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHBheW1lbnRfYWdlbnQuc3VwcG9ydGVkX2JhbmtzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRlZF9iYW5rc19hcnJheSA9IHBheW1lbnRfYWdlbnQ/LnN1cHBvcnRlZF9wYXltZW50X21ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcGF5bWVudF9hZ2VudC5zdXBwb3J0ZWRfcGF5bWVudF9tZXRob2RzLm1hcChiYW5rID0+IGJhbmsucGF5bWVudF9tZXRob2QpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHBheW1lbnRfYWdlbnQuc3VwcG9ydGVkX2JhbmtzLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZF9iYW5rc19hcnJheS5mb3JFYWNoKGJhbmsgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTdXBwb3J0ZWRCYW5rKGJhbmspO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNvcnRTdXBwb3J0ZWRCYW5rcygpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBmaWx0ZXJQYXltZW50QWdlbnRMaXN0KGJhbmspIHtcbiAgICAgICAgY29uc3QgeyBjb21tb24gfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgaWYgKGJhbmspIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRfbGlzdCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5saXN0LmZvckVhY2gocGF5bWVudF9hZ2VudCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VwcG9ydGVkX2JhbmtzID0gcGF5bWVudF9hZ2VudD8uc3VwcG9ydGVkX2JhbmtzO1xuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0ZWRfYmFua3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNfc3RyaW5nID0gdHlwZW9mIHN1cHBvcnRlZF9iYW5rcyA9PT0gJ3N0cmluZyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhbmtfaW5kZXggPSBpc19zdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3VwcG9ydGVkX2JhbmtzLnRvTG93ZXJDYXNlKCkuc3BsaXQoJywnKS5pbmRleE9mKGJhbmspXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHN1cHBvcnRlZF9iYW5rcy5tYXAoeCA9PiB4LnBheW1lbnRfbWV0aG9kLnRvTG93ZXJDYXNlKCkpLmluZGV4T2YoYmFuayk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhbmtfaW5kZXggIT09IC0xKSB0aGlzLmZpbHRlcmVkX2xpc3QucHVzaChwYXltZW50X2FnZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRfbGlzdCA9IHRoaXMubGlzdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNfcGF5bWVudF9hZ2VudF92aXNpYmxlICYmIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5lbmRzV2l0aChyb3V0ZXMuY2FzaGllcl9wYSkpIHtcbiAgICAgICAgICAgIGNvbW1vbi5yb3V0ZVRvKHJvdXRlcy5jYXNoaWVyX2RlcG9zaXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIG9uQ2hhbmdlUGF5bWVudE1ldGhvZCh7IHRhcmdldCB9KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0LnZhbHVlID09PSAnMCcgPyBwYXJzZUludCh0YXJnZXQudmFsdWUpIDogdGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkX2JhbmsgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5maWx0ZXJQYXltZW50QWdlbnRMaXN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNXaXRoZHJhdyhpc193aXRoZHJhdyA9ICF0aGlzLmlzX3dpdGhkcmF3KSB7XG4gICAgICAgIHRoaXMuaXNfd2l0aGRyYXcgPSBpc193aXRoZHJhdztcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNUcnlXaXRoZHJhd1N1Y2Nlc3NmdWwoaXNfdHJ5X3dpdGhkcmF3X3N1Y2Nlc3NmdWwpIHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICB0aGlzLmlzX3RyeV93aXRoZHJhd19zdWNjZXNzZnVsID0gaXNfdHJ5X3dpdGhkcmF3X3N1Y2Nlc3NmdWw7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldElzV2l0aGRyYXdTdWNjZXNzZnVsKGlzX3dpdGhkcmF3X3N1Y2Nlc3NmdWwpIHtcbiAgICAgICAgdGhpcy5pc193aXRoZHJhd19zdWNjZXNzZnVsID0gaXNfd2l0aGRyYXdfc3VjY2Vzc2Z1bDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0Q29uZmlybWF0aW9uKHsgYW1vdW50LCBjdXJyZW5jeSwgbG9naW5pZCwgcGF5bWVudF9hZ2VudF9uYW1lIH0pIHtcbiAgICAgICAgdGhpcy5jb25maXJtID0ge1xuICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgICBsb2dpbmlkLFxuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9uYW1lLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRSZWNlaXB0KHtcbiAgICAgICAgYW1vdW50X3RyYW5zZmVycmVkLFxuICAgICAgICBwYXltZW50X2FnZW50X2VtYWlsLFxuICAgICAgICBwYXltZW50X2FnZW50X2lkLFxuICAgICAgICBwYXltZW50X2FnZW50X25hbWUsXG4gICAgICAgIHBheW1lbnRfYWdlbnRfcGhvbmUsXG4gICAgICAgIHBheW1lbnRfYWdlbnRfdXJsLFxuICAgIH0pIHtcbiAgICAgICAgdGhpcy5yZWNlaXB0ID0ge1xuICAgICAgICAgICAgYW1vdW50X3RyYW5zZmVycmVkLFxuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9lbWFpbCxcbiAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfaWQsXG4gICAgICAgICAgICBwYXltZW50X2FnZW50X25hbWUsXG4gICAgICAgICAgICBwYXltZW50X2FnZW50X3Bob25lLFxuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF91cmwsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFkZFBheW1lbnRBZ2VudChwYXltZW50X2FnZW50KSB7XG4gICAgICAgIHRoaXMuYWdlbnRzLnB1c2goe1xuICAgICAgICAgICAgdGV4dDogcGF5bWVudF9hZ2VudC5uYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHBheW1lbnRfYWdlbnQucGF5bWVudGFnZW50X2xvZ2luaWQsXG4gICAgICAgICAgICBtYXhfd2l0aGRyYXdhbDogcGF5bWVudF9hZ2VudC5tYXhfd2l0aGRyYXdhbCxcbiAgICAgICAgICAgIG1pbl93aXRoZHJhd2FsOiBwYXltZW50X2FnZW50Lm1pbl93aXRoZHJhd2FsLFxuICAgICAgICAgICAgZW1haWw6IHBheW1lbnRfYWdlbnQuZW1haWwsXG4gICAgICAgICAgICBwaG9uZTogcGF5bWVudF9hZ2VudC50ZWxlcGhvbmUsXG4gICAgICAgICAgICB1cmw6IHBheW1lbnRfYWdlbnQudXJsLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgb25Nb3VudFBheW1lbnRBZ2VudFdpdGhkcmF3KCkge1xuICAgICAgICBjb25zdCB7IGNvbW1vbiwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IHNldExvYWRpbmcsIG9uTW91bnRDb21tb24gfSA9IG1vZHVsZXMuY2FzaGllci5nZW5lcmFsX3N0b3JlO1xuXG4gICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgIHRoaXMub25SZW1vdW50ID0gdGhpcy5vbk1vdW50UGF5bWVudEFnZW50V2l0aGRyYXc7XG4gICAgICAgIG9uTW91bnRDb21tb24oKTtcblxuICAgICAgICB0aGlzLnNldElzV2l0aGRyYXcodHJ1ZSk7XG4gICAgICAgIHRoaXMuc2V0SXNXaXRoZHJhd1N1Y2Nlc3NmdWwoZmFsc2UpO1xuICAgICAgICB0aGlzLnNldFJlY2VpcHQoe30pO1xuXG4gICAgICAgIGlmICghdGhpcy5hZ2VudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50X2FnZW50X2xpc3QgPSBhd2FpdCB0aGlzLmdldFBheW1lbnRBZ2VudExpc3QoKTtcbiAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfbGlzdC5wYXltZW50YWdlbnRfbGlzdC5saXN0LmZvckVhY2gocGF5bWVudF9hZ2VudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50QWdlbnQocGF5bWVudF9hZ2VudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhcGF5bWVudF9hZ2VudF9saXN0LnBheW1lbnRhZ2VudF9saXN0Lmxpc3QubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmVuZHNXaXRoKHJvdXRlcy5jYXNoaWVyX3BhKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29tbW9uLnJvdXRlVG8ocm91dGVzLmNhc2hpZXJfZGVwb3NpdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIHJlcXVlc3RUcnlQYXltZW50QWdlbnRXaXRoZHJhdyh7IGxvZ2luaWQsIGN1cnJlbmN5LCBhbW91bnQsIHZlcmlmaWNhdGlvbl9jb2RlIH0pIHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICBjb25zdCBwYXltZW50X2FnZW50X3dpdGhkcmF3ID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnBheW1lbnRBZ2VudFdpdGhkcmF3KHtcbiAgICAgICAgICAgIGxvZ2luaWQsXG4gICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlLFxuICAgICAgICAgICAgZHJ5X3J1bjogMSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgrcGF5bWVudF9hZ2VudF93aXRoZHJhdy5wYXltZW50YWdlbnRfd2l0aGRyYXcgPT09IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkX2FnZW50ID0gdGhpcy5hZ2VudHMuZmluZChhZ2VudCA9PiBhZ2VudC52YWx1ZSA9PT0gbG9naW5pZCk7XG4gICAgICAgICAgICB0aGlzLnNldENvbmZpcm1hdGlvbih7XG4gICAgICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIGxvZ2luaWQsXG4gICAgICAgICAgICAgICAgLi4uKHNlbGVjdGVkX2FnZW50ICYmIHsgcGF5bWVudF9hZ2VudF9uYW1lOiBzZWxlY3RlZF9hZ2VudC50ZXh0IH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldElzVHJ5V2l0aGRyYXdTdWNjZXNzZnVsKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UocGF5bWVudF9hZ2VudF93aXRoZHJhdy5lcnJvciwgdGhpcy5yZXNldFBheW1lbnRBZ2VudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgcmVzZXRQYXltZW50QWdlbnQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICAgICAgdGhpcy5zZXRJc1dpdGhkcmF3KGZhbHNlKTtcbiAgICAgICAgdGhpcy52ZXJpZmljYXRpb24uY2xlYXJWZXJpZmljYXRpb24oKTtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWJJbmRleCgwKTtcbiAgICB9O1xuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIG9uTW91bnRQYXltZW50QWdlbnRMaXN0KCkge1xuICAgICAgICBjb25zdCB7IHNldExvYWRpbmcsIG9uTW91bnRDb21tb24gfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcblxuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICB0aGlzLm9uUmVtb3VudCA9IHRoaXMub25Nb3VudFBheW1lbnRBZ2VudExpc3Q7XG4gICAgICAgIGF3YWl0IG9uTW91bnRDb21tb24oKTtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRQYXltZW50QWdlbnRMaXN0KCk7XG5cbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsUGF5bWVudEFnZW50TGlzdCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5XUy53YWl0KCdnZXRfc2V0dGluZ3MnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuV1MuYWxsUGF5bWVudEFnZW50TGlzdCh0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnJlc2lkZW5jZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldEFsbFBheW1lbnRBZ2VudExpc3QobGlzdCkge1xuICAgICAgICB0aGlzLmFsbF9wYXltZW50X2FnZW50X2xpc3QgPSBsaXN0O1xuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBpc19wYXltZW50X2FnZW50X3Zpc2libGVfaW5fb25ib2FyZGluZygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxfcGF5bWVudF9hZ2VudF9saXN0Py5wYXltZW50YWdlbnRfbGlzdD8ubGlzdD8ubGVuZ3RoO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyByZXF1ZXN0UGF5bWVudEFnZW50V2l0aGRyYXcoeyBsb2dpbmlkLCBjdXJyZW5jeSwgYW1vdW50LCB2ZXJpZmljYXRpb25fY29kZSB9KSB7XG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICAgICAgY29uc3QgcGF5bWVudF9hZ2VudF93aXRoZHJhdyA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5wYXltZW50QWdlbnRXaXRoZHJhdyh7XG4gICAgICAgICAgICBsb2dpbmlkLFxuICAgICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25fY29kZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgrcGF5bWVudF9hZ2VudF93aXRoZHJhdy5wYXltZW50YWdlbnRfd2l0aGRyYXcgPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkX2FnZW50ID0gdGhpcy5hZ2VudHMuZmluZChhZ2VudCA9PiBhZ2VudC52YWx1ZSA9PT0gbG9naW5pZCk7XG4gICAgICAgICAgICB0aGlzLnNldFJlY2VpcHQoe1xuICAgICAgICAgICAgICAgIGFtb3VudF90cmFuc2ZlcnJlZDogZm9ybWF0TW9uZXkoY3VycmVuY3ksIGFtb3VudCwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgLi4uKHNlbGVjdGVkX2FnZW50ICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9lbWFpbDogc2VsZWN0ZWRfYWdlbnQuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfaWQ6IHNlbGVjdGVkX2FnZW50LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50X2FnZW50X25hbWU6IHNlbGVjdGVkX2FnZW50LnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfcGhvbmU6IHNlbGVjdGVkX2FnZW50LnBob25lLFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50X2FnZW50X3VybDogc2VsZWN0ZWRfYWdlbnQudXJsLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIC4uLighc2VsZWN0ZWRfYWdlbnQgJiYge1xuICAgICAgICAgICAgICAgICAgICBwYXltZW50X2FnZW50X2lkOiBsb2dpbmlkLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldElzV2l0aGRyYXdTdWNjZXNzZnVsKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5zZXRJc1RyeVdpdGhkcmF3U3VjY2Vzc2Z1bChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnNldENvbmZpcm1hdGlvbih7fSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZShwYXltZW50X2FnZW50X3dpdGhkcmF3LmVycm9yLCB0aGlzLnJlc2V0UGF5bWVudEFnZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IGFjdGlvbiwgY29tcHV0ZWQsIG9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IHJvdXRlcyB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QWdlbnRUcmFuc2ZlclN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5XUyA9IFdTO1xuICAgIH1cblxuICAgIEBvYnNlcnZhYmxlIGNvbnRhaW5lciA9IENvbnN0YW50cy5jb250YWluZXJzLnBheW1lbnRfYWdlbnRfdHJhbnNmZXI7XG4gICAgQG9ic2VydmFibGUgZXJyb3IgPSBuZXcgRXJyb3JTdG9yZSgpO1xuICAgIEBvYnNlcnZhYmxlIGlzX3BheW1lbnRfYWdlbnQgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc190cnlfdHJhbnNmZXJfc3VjY2Vzc2Z1bCA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX3RyYW5zZmVyX3N1Y2Nlc3NmdWwgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBjb25maXJtID0ge307XG4gICAgQG9ic2VydmFibGUgcmVjZWlwdCA9IHt9O1xuICAgIEBvYnNlcnZhYmxlIHRyYW5zZmVyX2xpbWl0ID0ge307XG5cbiAgICBAY29tcHV0ZWRcbiAgICBnZXQgaXNfcGF5bWVudF9hZ2VudF90cmFuc2Zlcl92aXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc19wYXltZW50X2FnZW50O1xuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrSXNQYXltZW50QWdlbnQoKSB7XG4gICAgICAgIGNvbnN0IGdldF9zZXR0aW5ncyA9IChhd2FpdCB0aGlzLldTLmF1dGhvcml6ZWQuc3RvcmFnZS5nZXRTZXR0aW5ncygpKS5nZXRfc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuc2V0SXNQYXltZW50QWdlbnQoZ2V0X3NldHRpbmdzPy5pc19hdXRoZW50aWNhdGVkX3BheW1lbnRfYWdlbnQgPz8gZmFsc2UpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc1BheW1lbnRBZ2VudChpc19wYXltZW50X2FnZW50KSB7XG4gICAgICAgIGlmICghaXNfcGF5bWVudF9hZ2VudCAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuZW5kc1dpdGgocm91dGVzLmNhc2hpZXJfcGFfdHJhbnNmZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY29tbW9uLnJvdXRlVG8ocm91dGVzLmNhc2hpZXJfZGVwb3NpdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc19wYXltZW50X2FnZW50ID0gISFpc19wYXltZW50X2FnZW50O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc1RyeVRyYW5zZmVyU3VjY2Vzc2Z1bChpc190cnlfdHJhbnNmZXJfc3VjY2Vzc2Z1bCkge1xuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgICAgIHRoaXMuaXNfdHJ5X3RyYW5zZmVyX3N1Y2Nlc3NmdWwgPSBpc190cnlfdHJhbnNmZXJfc3VjY2Vzc2Z1bDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNUcmFuc2ZlclN1Y2Nlc3NmdWwoaXNfdHJhbnNmZXJfc3VjY2Vzc2Z1bCkge1xuICAgICAgICB0aGlzLmlzX3RyYW5zZmVyX3N1Y2Nlc3NmdWwgPSBpc190cmFuc2Zlcl9zdWNjZXNzZnVsO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRDb25maXJtYXRpb25QYXltZW50QWdlbnRUcmFuc2Zlcih7IGFtb3VudCwgY2xpZW50X2lkLCBjbGllbnRfbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgICAgICB0aGlzLmNvbmZpcm0gPSB7XG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICBjbGllbnRfaWQsXG4gICAgICAgICAgICBjbGllbnRfbmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRSZWNlaXB0UGF5bWVudEFnZW50VHJhbnNmZXIoeyBhbW91bnRfdHJhbnNmZXJyZWQsIGNsaWVudF9pZCwgY2xpZW50X25hbWUgfSkge1xuICAgICAgICB0aGlzLnJlY2VpcHQgPSB7XG4gICAgICAgICAgICBhbW91bnRfdHJhbnNmZXJyZWQsXG4gICAgICAgICAgICBjbGllbnRfaWQsXG4gICAgICAgICAgICBjbGllbnRfbmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDdXJyZW50UGF5bWVudEFnZW50KHJlc3BvbnNlX3BheW1lbnRfYWdlbnQpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgcGF5bWVudF9hZ2VudF9saXN0ZWQgPSByZXNwb25zZV9wYXltZW50X2FnZW50LnBheW1lbnRhZ2VudF9saXN0Lmxpc3QuZmluZChcbiAgICAgICAgICAgIGFnZW50ID0+IGFnZW50LnBheW1lbnRhZ2VudF9sb2dpbmlkID09PSBjbGllbnQubG9naW5pZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjdXJyZW50X3BheW1lbnRfYWdlbnQgPVxuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9saXN0ZWQgfHwgKGF3YWl0IG1vZHVsZXMuY2FzaGllci5wYXltZW50X2FnZW50LmdldFBheW1lbnRBZ2VudERldGFpbHMoKSk7XG4gICAgICAgIHJldHVybiBjdXJyZW50X3BheW1lbnRfYWdlbnQgPz8ge307XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldE1pbk1heFBheW1lbnRBZ2VudFRyYW5zZmVyKHsgbWluX3dpdGhkcmF3YWwsIG1heF93aXRoZHJhd2FsIH0pIHtcbiAgICAgICAgdGhpcy50cmFuc2Zlcl9saW1pdCA9IHtcbiAgICAgICAgICAgIG1pbjogbWluX3dpdGhkcmF3YWwsXG4gICAgICAgICAgICBtYXg6IG1heF93aXRoZHJhd2FsLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBvbk1vdW50UGF5bWVudEFnZW50VHJhbnNmZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhbF9zdG9yZSwgcGF5bWVudF9hZ2VudCB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllcjtcblxuICAgICAgICBnZW5lcmFsX3N0b3JlLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgIHRoaXMub25SZW1vdW50ID0gdGhpcy5vbk1vdW50UGF5bWVudEFnZW50VHJhbnNmZXI7XG4gICAgICAgIGF3YWl0IGdlbmVyYWxfc3RvcmUub25Nb3VudENvbW1vbigpO1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNmZXJfbGltaXQubWluX3dpdGhkcmF3YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcGF5bWVudF9hZ2VudC5nZXRQYXltZW50QWdlbnRMaXN0KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50X3BheW1lbnRfYWdlbnQgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRQYXltZW50QWdlbnQocmVzcG9uc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRNaW5NYXhQYXltZW50QWdlbnRUcmFuc2ZlcihjdXJyZW50X3BheW1lbnRfYWdlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGdlbmVyYWxfc3RvcmUuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHJlcXVlc3RUcnlQYXltZW50QWdlbnRUcmFuc2ZlciA9IGFzeW5jICh7IGFtb3VudCwgY3VycmVuY3ksIGRlc2NyaXB0aW9uLCB0cmFuc2Zlcl90byB9KSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICAgICAgY29uc3QgcGF5bWVudF9hZ2VudF90cmFuc2ZlciA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5wYXltZW50QWdlbnRUcmFuc2Zlcih7XG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdHJhbnNmZXJfdG8sXG4gICAgICAgICAgICBkcnlfcnVuOiAxLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCtwYXltZW50X2FnZW50X3RyYW5zZmVyLnBheW1lbnRhZ2VudF90cmFuc2ZlciA9PT0gMikge1xuICAgICAgICAgICAgLy8gc2hvdyBjb25maXJtYXRpb24gc2NyZWVuXG4gICAgICAgICAgICB0aGlzLnNldENvbmZpcm1hdGlvblBheW1lbnRBZ2VudFRyYW5zZmVyKHtcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IHRyYW5zZmVyX3RvLFxuICAgICAgICAgICAgICAgIGNsaWVudF9uYW1lOiBwYXltZW50X2FnZW50X3RyYW5zZmVyLmNsaWVudF90b19mdWxsX25hbWUsXG4gICAgICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldElzVHJ5VHJhbnNmZXJTdWNjZXNzZnVsKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UocGF5bWVudF9hZ2VudF90cmFuc2Zlci5lcnJvciwgdGhpcy5yZXNldFBheW1lbnRBZ2VudFRyYW5zZmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXltZW50X2FnZW50X3RyYW5zZmVyO1xuICAgIH07XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgcmVxdWVzdFBheW1lbnRBZ2VudFRyYW5zZmVyID0gYXN5bmMgKHsgYW1vdW50LCBjdXJyZW5jeSwgZGVzY3JpcHRpb24sIHRyYW5zZmVyX3RvIH0pID0+IHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICBjb25zdCBwYXltZW50X2FnZW50X3RyYW5zZmVyID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnBheW1lbnRBZ2VudFRyYW5zZmVyKHtcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0cmFuc2Zlcl90byxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgrcGF5bWVudF9hZ2VudF90cmFuc2Zlci5wYXltZW50YWdlbnRfdHJhbnNmZXIgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVjZWlwdFBheW1lbnRBZ2VudFRyYW5zZmVyKHtcbiAgICAgICAgICAgICAgICBhbW91bnRfdHJhbnNmZXJyZWQ6IGFtb3VudCxcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IHRyYW5zZmVyX3RvLFxuICAgICAgICAgICAgICAgIGNsaWVudF9uYW1lOiBwYXltZW50X2FnZW50X3RyYW5zZmVyLmNsaWVudF90b19mdWxsX25hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0SXNUcmFuc2ZlclN1Y2Nlc3NmdWwodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldElzVHJ5VHJhbnNmZXJTdWNjZXNzZnVsKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZmlybWF0aW9uUGF5bWVudEFnZW50VHJhbnNmZXIoe30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UocGF5bWVudF9hZ2VudF90cmFuc2Zlci5lcnJvciwgdGhpcy5yZXNldFBheW1lbnRBZ2VudFRyYW5zZmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXltZW50X2FnZW50X3RyYW5zZmVyO1xuICAgIH07XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgcmVzZXRQYXltZW50QWdlbnRUcmFuc2ZlciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRJc1RyYW5zZmVyU3VjY2Vzc2Z1bChmYWxzZSk7XG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBvYnNlcnZhYmxlIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBpc0NyeXB0b2N1cnJlbmN5IH0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zYWN0aW9uSGlzdG9yeVN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5XUyA9IFdTO1xuICAgIH1cbiAgICBAb2JzZXJ2YWJsZSBjcnlwdG9fdHJhbnNhY3Rpb25zID0gW107XG4gICAgQG9ic2VydmFibGUgaXNfY3J5cHRvX3RyYW5zYWN0aW9uc19jYW5jZWxfbW9kYWxfdmlzaWJsZSA9IGZhbHNlO1xuICAgIEBvYnNlcnZhYmxlIGlzX2NyeXB0b190cmFuc2FjdGlvbnNfc3RhdHVzX21vZGFsX3Zpc2libGUgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc19jcnlwdG9fdHJhbnNhY3Rpb25zX3Zpc2libGUgPSBmYWxzZTtcbiAgICBAb2JzZXJ2YWJsZSBpc19sb2FkaW5nID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgc2VsZWN0ZWRfY3J5cHRvX3RyYW5zYWN0aW9uX2lkID0gJyc7XG4gICAgQG9ic2VydmFibGUgc2VsZWN0ZWRfY3J5cHRvX3N0YXR1cyA9ICcnO1xuICAgIEBvYnNlcnZhYmxlIHNlbGVjdGVkX2NyeXB0b19zdGF0dXNfZGVzY3JpcHRpb24gPSAnJztcblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBvbk1vdW50KCkge1xuICAgICAgICBjb25zdCB7IGN1cnJlbmN5LCBzd2l0Y2hlZCB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcbiAgICAgICAgY29uc3QgaXNfY3J5cHRvID0gISFjdXJyZW5jeSAmJiBpc0NyeXB0b2N1cnJlbmN5KGN1cnJlbmN5KTtcblxuICAgICAgICBpZiAoaXNfY3J5cHRvICYmICFzd2l0Y2hlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnN1YnNjcmliZUNyeXB0b1RyYW5zYWN0aW9ucygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRDcnlwdG9UcmFuc2FjdGlvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgdW5zdWJzY3JpYmVDcnlwdG9UcmFuc2FjdGlvbnMoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5jYXNoaWVyUGF5bWVudHMoeyBwcm92aWRlcjogJ2NyeXB0bycsIHRyYW5zYWN0aW9uX3R5cGU6ICdhbGwnIH0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY3J5cHRvIH0gPSByZXNwb25zZS5jYXNoaWVyX3BheW1lbnRzO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3J5cHRvVHJhbnNhY3Rpb25zSGlzdG9yeShjcnlwdG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgZ2V0Q3J5cHRvVHJhbnNhY3Rpb25zKCkge1xuICAgICAgICBhd2FpdCB0aGlzLldTLnN1YnNjcmliZUNhc2hpZXJQYXltZW50cyhyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjcnlwdG8gfSA9IHJlc3BvbnNlLmNhc2hpZXJfcGF5bWVudHM7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDcnlwdG9UcmFuc2FjdGlvbnMoY3J5cHRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldENyeXB0b1RyYW5zYWN0aW9uc0hpc3RvcnkodHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIHRoaXMuY3J5cHRvX3RyYW5zYWN0aW9ucyA9IHRyYW5zYWN0aW9ucztcbiAgICAgICAgdGhpcy5zb3J0Q3J5cHRvVHJhbnNhY3Rpb25zKCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHVwZGF0ZUNyeXB0b1RyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgdHJhbnNhY3Rpb25zLmZvckVhY2godHJhbnNhY3Rpb24gPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmNyeXB0b190cmFuc2FjdGlvbnMuZmluZEluZGV4KGNyeXB0byA9PiBjcnlwdG8uaWQgPT09IHRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b190cmFuc2FjdGlvbnMucHVzaCh0cmFuc2FjdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jcnlwdG9fdHJhbnNhY3Rpb25zW2luZGV4XSwgdHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zb3J0Q3J5cHRvVHJhbnNhY3Rpb25zKCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNvcnRDcnlwdG9UcmFuc2FjdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuY3J5cHRvX3RyYW5zYWN0aW9ucyA9IHRoaXMuY3J5cHRvX3RyYW5zYWN0aW9ucy5zb3J0KChhLCBiKSA9PiBiLnN1Ym1pdF9kYXRlIC0gYS5zdWJtaXRfZGF0ZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIGNhbmNlbENyeXB0b1RyYW5zYWN0aW9uKHRyYW5zYWN0aW9uX2lkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuV1MuY2FuY2VsQ3J5cHRvVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25faWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRDcnlwdG9UcmFuc2FjdGlvbklkKCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWxWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5lcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRTZWxlY3RlZENyeXB0b1RyYW5zYWN0aW9uSWQoaWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF9jcnlwdG9fdHJhbnNhY3Rpb25faWQgPSBpZDtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2V0SXNDcnlwdG9UcmFuc2FjdGlvbnNDYW5jZWxNb2RhbFZpc2libGUoaXNfdmlzaWJsZSkge1xuICAgICAgICB0aGlzLmlzX2NyeXB0b190cmFuc2FjdGlvbnNfY2FuY2VsX21vZGFsX3Zpc2libGUgPSBpc192aXNpYmxlO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzaG93Q3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWwoaWQpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZENyeXB0b1RyYW5zYWN0aW9uSWQoaWQpO1xuICAgICAgICB0aGlzLnNldElzQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWxWaXNpYmxlKHRydWUpO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBoaWRlQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRDcnlwdG9UcmFuc2FjdGlvbklkKCcnKTtcbiAgICAgICAgdGhpcy5zZXRJc0NyeXB0b1RyYW5zYWN0aW9uc0NhbmNlbE1vZGFsVmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFNlbGVjdGVkQ3J5cHRvU3RhdHVzKHN0YXR1cykge1xuICAgICAgICB0aGlzLnNlbGVjdGVkX2NyeXB0b19zdGF0dXMgPSBzdGF0dXM7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldFNlbGVjdGVkQ3J5cHRvU3RhdHVzRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF9jcnlwdG9fc3RhdHVzX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldElzQ3J5cHRvVHJhbnNhY3Rpb25zU3RhdHVzTW9kYWxWaXNpYmxlKGlzX3Zpc2libGUpIHtcbiAgICAgICAgdGhpcy5pc19jcnlwdG9fdHJhbnNhY3Rpb25zX3N0YXR1c19tb2RhbF92aXNpYmxlID0gaXNfdmlzaWJsZTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgc2hvd0NyeXB0b1RyYW5zYWN0aW9uc1N0YXR1c01vZGFsKGRlc2NyaXB0aW9uLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRDcnlwdG9TdGF0dXNEZXNjcmlwdGlvbihkZXNjcmlwdGlvbik7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRDcnlwdG9TdGF0dXMobmFtZSk7XG4gICAgICAgIHRoaXMuc2V0SXNDcnlwdG9UcmFuc2FjdGlvbnNTdGF0dXNNb2RhbFZpc2libGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGhpZGVDcnlwdG9UcmFuc2FjdGlvbnNTdGF0dXNNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRJc0NyeXB0b1RyYW5zYWN0aW9uc1N0YXR1c01vZGFsVmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldExvYWRpbmcoaXNfbG9hZGluZykge1xuICAgICAgICB0aGlzLmlzX2xvYWRpbmcgPSBpc19sb2FkaW5nO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc0NyeXB0b1RyYW5zYWN0aW9uc1Zpc2libGUoaXNfdmlzaWJsZSkge1xuICAgICAgICB0aGlzLmlzX2NyeXB0b190cmFuc2FjdGlvbnNfdmlzaWJsZSA9IGlzX3Zpc2libGU7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGFjdGlvbiwgY29tcHV0ZWQsIG9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IGZvcm1hdE1vbmV5LCBnZXREZWNpbWFsUGxhY2VzLCBnZXRNaW5XaXRoZHJhd2FsLCBpc01vYmlsZSwgdmFsaWROdW1iZXIgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCB7IGxvY2FsaXplIH0gZnJvbSAnQGRlcml2L3RyYW5zbGF0aW9ucyc7XG5pbXBvcnQgeyBSZWFkTW9yZSB9IGZyb20gJ0BkZXJpdi9jb21wb25lbnRzJztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnQ29uc3RhbnRzL2NvbnN0YW50cyc7XG5pbXBvcnQgRXJyb3JTdG9yZSBmcm9tICcuL2Vycm9yLXN0b3JlJztcbmltcG9ydCBWZXJpZmljYXRpb25TdG9yZSBmcm9tICcuL3ZlcmlmaWNhdGlvbi1zdG9yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpdGhkcmF3U3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHsgV1MsIHJvb3Rfc3RvcmUgfSkge1xuICAgICAgICB0aGlzLnJvb3Rfc3RvcmUgPSByb290X3N0b3JlO1xuICAgICAgICB0aGlzLldTID0gV1M7XG4gICAgfVxuXG4gICAgQG9ic2VydmFibGUgYmxvY2tjaGFpbl9hZGRyZXNzID0gJyc7XG4gICAgQG9ic2VydmFibGUgY29udGFpbmVyID0gQ29uc3RhbnRzLmNvbnRhaW5lcnMud2l0aGRyYXc7XG4gICAgQG9ic2VydmFibGUgZXJyb3IgPSBuZXcgRXJyb3JTdG9yZSgpO1xuICAgIEBvYnNlcnZhYmxlIGlzXzEwa193aXRoZHJhd2FsX2xpbWl0X3JlYWNoZWQgPSB1bmRlZmluZWQ7XG4gICAgQG9ic2VydmFibGUgaXNfd2l0aGRyYXdfY29uZmlybWVkID0gZmFsc2U7XG4gICAgQG9ic2VydmFibGUgdmVyaWZpY2F0aW9uID0gbmV3IFZlcmlmaWNhdGlvblN0b3JlKHsgcm9vdF9zdG9yZTogdGhpcy5yb290X3N0b3JlLCBXUzogdGhpcy5XUyB9KTtcbiAgICBAb2JzZXJ2YWJsZSB3aXRoZHJhd19hbW91bnQgPSAnJztcbiAgICBAb2JzZXJ2YWJsZSBtYXhfd2l0aGRyYXdfYW1vdW50ID0gMDtcblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRJc1dpdGhkcmF3Q29uZmlybWVkKGlzX3dpdGhkcmF3X2NvbmZpcm1lZCkge1xuICAgICAgICBjb25zdCB7IGNvbnZlcnRlcl9mcm9tX2Ftb3VudCB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllci5jcnlwdG9fZmlhdF9jb252ZXJ0ZXI7XG4gICAgICAgIHRoaXMuaXNfd2l0aGRyYXdfY29uZmlybWVkID0gaXNfd2l0aGRyYXdfY29uZmlybWVkO1xuXG4gICAgICAgIGlmIChpc193aXRoZHJhd19jb25maXJtZWQpIHRoaXMuc2V0V2l0aGRyYXdBbW91bnQoY29udmVydGVyX2Zyb21fYW1vdW50KTtcblxuICAgICAgICBpZiAoIWlzX3dpdGhkcmF3X2NvbmZpcm1lZCAmJiB0aGlzLnZlcmlmaWNhdGlvbikge1xuICAgICAgICAgICAgdGhpcy52ZXJpZmljYXRpb24uY2xlYXJWZXJpZmljYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRXaXRoZHJhd0Ftb3VudChhbW91bnQpIHtcbiAgICAgICAgdGhpcy53aXRoZHJhd19hbW91bnQgPSBhbW91bnQ7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIHJlcXVlc3RXaXRoZHJhdyh2ZXJpZmljYXRpb25fY29kZSkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IGNyeXB0b19maWF0X2NvbnZlcnRlciwgZXJyb3JfZGlhbG9nIH0gPSBtb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgaWYgKCFjbGllbnQuaXNfbG9nZ2VkX2luKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNyeXB0b19maWF0X2NvbnZlcnRlci5jb252ZXJ0ZXJfZnJvbV9hbW91bnQpIHtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5zZXRDb252ZXJ0ZXJGcm9tRXJyb3IobG9jYWxpemUoJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5XUy5jcnlwdG9XaXRoZHJhdyh7XG4gICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmJsb2NrY2hhaW5fYWRkcmVzcyxcbiAgICAgICAgICAgIGFtb3VudDogK2NyeXB0b19maWF0X2NvbnZlcnRlci5jb252ZXJ0ZXJfZnJvbV9hbW91bnQsXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25fY29kZSxcbiAgICAgICAgICAgIGRyeV9ydW46IDEsXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JfZGlhbG9nLnNldEVycm9yTWVzc2FnZShyZXNwb25zZS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlV2l0aGRyYXcodmVyaWZpY2F0aW9uX2NvZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgc2F2ZVdpdGhkcmF3KHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgIGNvbnN0IHsgY29udmVydGVyX2Zyb21fYW1vdW50IH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyLmNyeXB0b19maWF0X2NvbnZlcnRlcjtcblxuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgICAgIGF3YWl0IHRoaXMuV1MuY3J5cHRvV2l0aGRyYXcoe1xuICAgICAgICAgICAgYWRkcmVzczogdGhpcy5ibG9ja2NoYWluX2FkZHJlc3MsXG4gICAgICAgICAgICBhbW91bnQ6ICtjb252ZXJ0ZXJfZnJvbV9hbW91bnQsXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25fY29kZSxcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZShyZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsZWFyIHZlcmlmaWNhdGlvbiBjb2RlIG9uIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVyaWZpY2F0aW9uLmNsZWFyVmVyaWZpY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRXaXRocmF3Rm9ybSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzV2l0aGRyYXdDb25maXJtZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICByZXNldFdpdGhyYXdGb3JtKCkge1xuICAgICAgICBjb25zdCB7IHNldENvbnZlcnRlckZyb21BbW91bnQsIHNldENvbnZlcnRlclRvQW1vdW50IH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyLmNyeXB0b19maWF0X2NvbnZlcnRlcjtcbiAgICAgICAgdGhpcy5zZXRCbG9ja2NoYWluQWRkcmVzcygnJyk7XG4gICAgICAgIHNldENvbnZlcnRlckZyb21BbW91bnQoJycpO1xuICAgICAgICBzZXRDb252ZXJ0ZXJUb0Ftb3VudCgnJyk7XG4gICAgICAgIHRoaXMudmVyaWZpY2F0aW9uLmNsZWFyVmVyaWZpY2F0aW9uKCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldEJsb2NrY2hhaW5BZGRyZXNzKGFkZHJlc3MpIHtcbiAgICAgICAgdGhpcy5ibG9ja2NoYWluX2FkZHJlc3MgPSBhZGRyZXNzO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICB3aWxsTW91bnRXaXRoZHJhdyh2ZXJpZmljYXRpb25fY29kZSkge1xuICAgICAgICBpZiAodmVyaWZpY2F0aW9uX2NvZGUpIHtcbiAgICAgICAgICAgIHRoaXMudmVyaWZpY2F0aW9uLmNsZWFyVmVyaWZpY2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgYXN5bmMgb25Nb3VudFdpdGhkcmF3KHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgYWN0aXZlX2NvbnRhaW5lciwgaXNfY3J5cHRvLCBvbk1vdW50Q29tbW9uLCBzZXRMb2FkaW5nLCBzZXRPblJlbW91bnQgfSA9IG1vZHVsZXMuY2FzaGllci5nZW5lcmFsX3N0b3JlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjaGVja0lmcmFtZUxvYWRlZCxcbiAgICAgICAgICAgIGNsZWFyVGltZW91dENhc2hpZXJVcmwsXG4gICAgICAgICAgICBjbGVhcklmcmFtZSxcbiAgICAgICAgICAgIGlzX3Nlc3Npb25fdGltZW91dCxcbiAgICAgICAgICAgIHNldENvbnRhaW5lckhlaWdodCxcbiAgICAgICAgICAgIHNldElmcmFtZVVybCxcbiAgICAgICAgICAgIHNldFNlc3Npb25UaW1lb3V0LFxuICAgICAgICAgICAgc2V0VGltZW91dENhc2hpZXJVcmwsXG4gICAgICAgIH0gPSBtb2R1bGVzLmNhc2hpZXIuaWZyYW1lO1xuICAgICAgICBjb25zdCB7IGlzX3ZpcnR1YWwgfSA9IGNsaWVudDtcbiAgICAgICAgY29uc3QgY3VycmVudF9jb250YWluZXIgPSBhY3RpdmVfY29udGFpbmVyO1xuXG4gICAgICAgIHNldE9uUmVtb3VudCh0aGlzLm9uTW91bnRXaXRoZHJhdyk7XG4gICAgICAgIGF3YWl0IG9uTW91bnRDb21tb24oKTtcblxuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgICAgIHNldENvbnRhaW5lckhlaWdodCgwKTtcbiAgICAgICAgY2xlYXJJZnJhbWUoKTtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcblxuICAgICAgICBpZiAoIWlzX3Nlc3Npb25fdGltZW91dCkge1xuICAgICAgICAgICAgY2hlY2tJZnJhbWVMb2FkZWQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHNlc3Npb24gaGFzIHRpbWVkIG91dCByZXNldCBldmVyeXRoaW5nXG4gICAgICAgIHNldElmcmFtZVVybCgnJyk7XG4gICAgICAgIGlmICghdmVyaWZpY2F0aW9uX2NvZGUgfHwgaXNfdmlydHVhbCkge1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAvLyBpZiB2aXJ0dWFsLCBjbGVhciBldmVyeXRoaW5nIGFuZCBkb24ndCBwcm9jZWVkIGZ1cnRoZXJcbiAgICAgICAgICAgIC8vIGlmIG5vIHZlcmlmaWNhdGlvbiBjb2RlLCB3ZSBzaG91bGQgcmVxdWVzdCBhZ2FpblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VfY2FzaGllciA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5jYXNoaWVyKGFjdGl2ZV9jb250YWluZXIsIHtcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBpZiB0YWIgY2hhbmdlZCB3aGlsZSB3YWl0aW5nIGZvciByZXNwb25zZSwgaWdub3JlIGl0XG4gICAgICAgIGlmIChjdXJyZW50X2NvbnRhaW5lciAhPT0gYWN0aXZlX2NvbnRhaW5lcikge1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3BvbnNlX2Nhc2hpZXIuZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IuaGFuZGxlQ2FzaGllckVycm9yKHJlc3BvbnNlX2Nhc2hpZXIuZXJyb3IpO1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICBzZXRTZXNzaW9uVGltZW91dCh0cnVlKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dENhc2hpZXJVcmwoKTtcbiAgICAgICAgICAgIGlmICh2ZXJpZmljYXRpb25fY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIGNsZWFyIHZlcmlmaWNhdGlvbiBjb2RlIG9uIGVycm9yXG4gICAgICAgICAgICAgICAgdGhpcy52ZXJpZmljYXRpb24uY2xlYXJWZXJpZmljYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc19jcnlwdG8pIHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgY2hlY2tJZnJhbWVMb2FkZWQoKTtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgc2V0SWZyYW1lVXJsKHJlc3BvbnNlX2Nhc2hpZXIuY2FzaGllcik7XG4gICAgICAgICAgICBzZXRTZXNzaW9uVGltZW91dChmYWxzZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0Q2FzaGllclVybCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIGFzeW5jIG9uTW91bnRDcnlwdG9XaXRoZHJhdyh2ZXJpZmljYXRpb25fY29kZSkge1xuICAgICAgICBjb25zdCB7IGNyeXB0b19maWF0X2NvbnZlcnRlciwgZ2VuZXJhbF9zdG9yZSwgaWZyYW1lIH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyO1xuXG4gICAgICAgIGdlbmVyYWxfc3RvcmUuc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3Qgc3RyX3JlZ19leHAgPSAvXlxcd3s4LDEyOH0kLztcbiAgICAgICAgbGV0IHJlc3BvbnNlX2Nhc2hpZXI7XG5cbiAgICAgICAgaWYgKHN0cl9yZWdfZXhwLnRlc3QodmVyaWZpY2F0aW9uX2NvZGUpKSB7XG4gICAgICAgICAgICByZXNwb25zZV9jYXNoaWVyID0gYXdhaXQgdGhpcy5XUy5jcnlwdG9XaXRoZHJhdyh7XG4gICAgICAgICAgICAgICAgYWRkcmVzczogdGhpcy5ibG9ja2NoYWluX2FkZHJlc3MsXG4gICAgICAgICAgICAgICAgYW1vdW50OiArY3J5cHRvX2ZpYXRfY29udmVydGVyLmNvbnZlcnRlcl9mcm9tX2Ftb3VudCxcbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25fY29kZSxcbiAgICAgICAgICAgICAgICBkcnlfcnVuOiAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNwb25zZV9jYXNoaWVyID0geyBlcnJvcjogeyBjb2RlOiAnSW52YWxpZFRva2VuJywgbWVzc2FnZTogJ1lvdXIgdG9rZW4gaGFzIGV4cGlyZWQgb3IgaXMgaW52YWxpZC4nIH0gfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZV9jYXNoaWVyLmVycm9yLmNvZGUgPT09ICdJbnZhbGlkVG9rZW4nKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yLmhhbmRsZUNhc2hpZXJFcnJvcihyZXNwb25zZV9jYXNoaWVyLmVycm9yKTtcbiAgICAgICAgICAgIGdlbmVyYWxfc3RvcmUuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICBpZnJhbWUuc2V0U2Vzc2lvblRpbWVvdXQodHJ1ZSk7XG4gICAgICAgICAgICBpZnJhbWUuY2xlYXJUaW1lb3V0Q2FzaGllclVybCgpO1xuICAgICAgICAgICAgaWYgKHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgdmVyaWZpY2F0aW9uIGNvZGUgb24gZXJyb3JcbiAgICAgICAgICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbi5jbGVhclZlcmlmaWNhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2VuZXJhbF9zdG9yZS5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBjb21wdXRlZFxuICAgIGdldCBpc193aXRoZHJhd2FsX2xvY2tlZCgpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvbiB9ID0gY2xpZW50LmFjY291bnRfc3RhdHVzO1xuXG4gICAgICAgIGlmICghY2xpZW50LmFjY291bnRfc3RhdHVzPy5zdGF0dXMpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgbmVlZF9wb2kgPSBhdXRoZW50aWNhdGlvbi5uZWVkc192ZXJpZmljYXRpb24uaW5jbHVkZXMoJ2lkZW50aXR5Jyk7XG4gICAgICAgIGNvbnN0IG5lZWRfYXV0aGVudGljYXRpb24gPSB0aGlzLmVycm9yLmlzX2Fza19hdXRoZW50aWNhdGlvbiAmJiBuZWVkX3BvaTtcblxuICAgICAgICByZXR1cm4gY2xpZW50LmlzX3dpdGhkcmF3YWxfbG9jayB8fCBuZWVkX2F1dGhlbnRpY2F0aW9uIHx8IHRoaXMuZXJyb3IuaXNfYXNrX2ZpbmFuY2lhbF9yaXNrX2FwcHJvdmFsO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRNYXhXaXRoZHJhd0Ftb3VudChhbW91bnQpIHtcbiAgICAgICAgdGhpcy5tYXhfd2l0aGRyYXdfYW1vdW50ID0gYW1vdW50O1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBhc3luYyBjaGVjazEwa0xpbWl0KCkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCB9ID0gdGhpcy5yb290X3N0b3JlO1xuXG4gICAgICAgIGNvbnN0IHJlbWFpbmRlciA9IChhd2FpdCBjbGllbnQuZ2V0TGltaXRzKCkpPy5nZXRfbGltaXRzPy5yZW1haW5kZXI7XG4gICAgICAgIHRoaXMuc2V0TWF4V2l0aGRyYXdBbW91bnQocmVtYWluZGVyKTtcbiAgICAgICAgY29uc3QgbWluX3dpdGhkcmF3YWwgPSBnZXRNaW5XaXRoZHJhd2FsKGNsaWVudC5jdXJyZW5jeSk7XG4gICAgICAgIGNvbnN0IGlzX2xpbWl0X3JlYWNoZWQgPSAhISh0eXBlb2YgcmVtYWluZGVyICE9PSAndW5kZWZpbmVkJyAmJiArcmVtYWluZGVyIDwgbWluX3dpdGhkcmF3YWwpO1xuICAgICAgICB0aGlzLnNldDEwa0xpbWl0YXRpb24oaXNfbGltaXRfcmVhY2hlZCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHNldDEwa0xpbWl0YXRpb24oaXNfbGltaXRfcmVhY2hlZCkge1xuICAgICAgICB0aGlzLmlzXzEwa193aXRoZHJhd2FsX2xpbWl0X3JlYWNoZWQgPSBpc19saW1pdF9yZWFjaGVkO1xuICAgIH1cblxuICAgIEBhY3Rpb24uYm91bmRcbiAgICBzZXRXaXRoZHJhd1BlcmNlbnRhZ2VTZWxlY3RvclJlc3VsdChhbW91bnQpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIsIGdlbmVyYWxfc3RvcmUgfSA9IG1vZHVsZXMuY2FzaGllcjtcbiAgICAgICAgY29uc3QgeyBjdXJyZW5jeSwgY3VycmVudF9maWF0X2N1cnJlbmN5IH0gPSBjbGllbnQ7XG5cbiAgICAgICAgaWYgKGFtb3VudCA+IDApIHtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KGFtb3VudCk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlV2l0aGRyYXdGcm9tQW1vdW50KCk7XG4gICAgICAgICAgICBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIub25DaGFuZ2VDb252ZXJ0ZXJGcm9tQW1vdW50KFxuICAgICAgICAgICAgICAgIHsgdGFyZ2V0OiB7IHZhbHVlOiBhbW91bnQgfSB9LFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRfZmlhdF9jdXJyZW5jeSB8fCAnVVNEJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5yZXNldENvbnZlcnRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5zZXRJc1RpbWVyVmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGdlbmVyYWxfc3RvcmUucGVyY2VudGFnZVNlbGVjdG9yU2VsZWN0aW9uU3RhdHVzKGZhbHNlKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uLmJvdW5kXG4gICAgdmFsaWRhdGVXaXRoZHJhd0Zyb21BbW91bnQoKSB7XG4gICAgICAgIGxldCBlcnJvcl9tZXNzYWdlID0gJyc7XG5cbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBiYWxhbmNlLCBjdXJyZW5jeSwgd2Vic2l0ZV9zdGF0dXMgfSA9IGNsaWVudDtcbiAgICAgICAgY29uc3QgeyBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIsIGVycm9yX2RpYWxvZyB9ID0gbW9kdWxlcy5jYXNoaWVyO1xuICAgICAgICBjb25zdCB7IGNvbnZlcnRlcl9mcm9tX2Ftb3VudCwgc2V0Q29udmVydGVyRnJvbUVycm9yIH0gPSBjcnlwdG9fZmlhdF9jb252ZXJ0ZXI7XG4gICAgICAgIGNvbnN0IHsgb3BlblJlYWRNb3JlRGlhbG9nIH0gPSBlcnJvcl9kaWFsb2c7XG5cbiAgICAgICAgY29uc3QgbWluX3dpdGhkcmF3X2Ftb3VudCA9IHdlYnNpdGVfc3RhdHVzLmNyeXB0b19jb25maWdbY3VycmVuY3ldLm1pbmltdW1fd2l0aGRyYXdhbDtcbiAgICAgICAgY29uc3QgbWF4X3dpdGhkcmF3X2Ftb3VudCA9ICt0aGlzLm1heF93aXRoZHJhd19hbW91bnQgPiArYmFsYW5jZSA/ICtiYWxhbmNlIDogK3RoaXMubWF4X3dpdGhkcmF3X2Ftb3VudDtcblxuICAgICAgICBjb25zdCBmb3JtYXRfYmFsYW5jZSA9IGZvcm1hdE1vbmV5KGN1cnJlbmN5LCBiYWxhbmNlLCB0cnVlKTtcbiAgICAgICAgY29uc3QgZm9ybWF0X21pbl93aXRoZHJhd19hbW91bnQgPSBmb3JtYXRNb25leShjdXJyZW5jeSwgbWluX3dpdGhkcmF3X2Ftb3VudCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IGZvcm1hdF9tYXhfd2l0aGRyYXdfYW1vdW50ID0gZm9ybWF0TW9uZXkoY3VycmVuY3ksIG1heF93aXRoZHJhd19hbW91bnQsIHRydWUpO1xuXG4gICAgICAgIGlmIChjb252ZXJ0ZXJfZnJvbV9hbW91bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXNfb2ssIG1lc3NhZ2UgfSA9IHZhbGlkTnVtYmVyKGNvbnZlcnRlcl9mcm9tX2Ftb3VudCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgZGVjaW1hbHM6IGdldERlY2ltYWxQbGFjZXMoY3VycmVuY3kpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWlzX29rKSBlcnJvcl9tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKCtiYWxhbmNlIDwgK2NvbnZlcnRlcl9mcm9tX2Ftb3VudCkgZXJyb3JfbWVzc2FnZSA9IGxvY2FsaXplKCdJbnN1ZmZpY2llbnQgZnVuZHMnKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKCtiYWxhbmNlIDwgK21pbl93aXRoZHJhd19hbW91bnQpIHtcbiAgICAgICAgICAgICAgICBlcnJvcl9tZXNzYWdlID0gbG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICdZb3VyIGJhbGFuY2UgKHt7Zm9ybWF0X2JhbGFuY2V9fSB7e2N1cnJlbmN5fX0pIGlzIGxlc3MgdGhhbiB0aGUgY3VycmVudCBtaW5pbXVtIHdpdGhkcmF3YWwgYWxsb3dlZCAoe3tmb3JtYXRfbWluX3dpdGhkcmF3X2Ftb3VudH19IHt7Y3VycmVuY3l9fSkuIFBsZWFzZSB0b3AgdXAgeW91ciBhY2NvdW50IHRvIGNvbnRpbnVlIHdpdGggeW91ciB3aXRoZHJhd2FsLicsXG4gICAgICAgICAgICAgICAgICAgIHsgZm9ybWF0X2JhbGFuY2UsIGN1cnJlbmN5LCBmb3JtYXRfbWluX3dpdGhkcmF3X2Ftb3VudCB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoK2NvbnZlcnRlcl9mcm9tX2Ftb3VudCA8ICttaW5fd2l0aGRyYXdfYW1vdW50IHx8ICtjb252ZXJ0ZXJfZnJvbV9hbW91bnQgPiArbWF4X3dpdGhkcmF3X2Ftb3VudCkge1xuICAgICAgICAgICAgICAgIGVycm9yX21lc3NhZ2UgPSBsb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgJ1RoZSBjdXJyZW50IGFsbG93ZWQgd2l0aGRyYXcgYW1vdW50IGlzIHt7Zm9ybWF0X21pbl93aXRoZHJhd19hbW91bnR9fSB0byB7e2Zvcm1hdF9tYXhfd2l0aGRyYXdfYW1vdW50fX0ge3tjdXJyZW5jeX19JyxcbiAgICAgICAgICAgICAgICAgICAgeyBmb3JtYXRfbWluX3dpdGhkcmF3X2Ftb3VudCwgZm9ybWF0X21heF93aXRoZHJhd19hbW91bnQsIGN1cnJlbmN5IH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNNb2JpbGUoKSAmJiBlcnJvcl9tZXNzYWdlLmxlbmd0aCA+IDM1KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JfY29udGVudCA9IGVycm9yX21lc3NhZ2U7XG4gICAgICAgICAgICAgICAgZXJyb3JfbWVzc2FnZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPFJlYWRNb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRfdGV4dD17bG9jYWxpemUoJ21vcmUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9e2Vycm9yX2NvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZV9sZW5ndGg9ezI4fVxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbkRpYWxvZz17KCkgPT4gb3BlblJlYWRNb3JlRGlhbG9nKGVycm9yX2NvbnRlbnQsIGxvY2FsaXplKCdPSycpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dfZGlhbG9nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRDb252ZXJ0ZXJGcm9tRXJyb3IoZXJyb3JfbWVzc2FnZSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbi5ib3VuZFxuICAgIHZhbGlkYXRlV2l0aGRyYXdUb0Ftb3VudCgpIHtcbiAgICAgICAgbGV0IGVycm9yX21lc3NhZ2UgPSAnJztcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBjdXJyZW50X2ZpYXRfY3VycmVuY3kgfSA9IGNsaWVudDtcbiAgICAgICAgY29uc3QgeyBjb252ZXJ0ZXJfdG9fYW1vdW50LCBzZXRDb252ZXJ0ZXJUb0Vycm9yIH0gPSBtb2R1bGVzLmNhc2hpZXIuY3J5cHRvX2ZpYXRfY29udmVydGVyO1xuXG4gICAgICAgIGlmIChjb252ZXJ0ZXJfdG9fYW1vdW50KSB7XG4gICAgICAgICAgICBjb25zdCB7IGlzX29rLCBtZXNzYWdlIH0gPSB2YWxpZE51bWJlcihjb252ZXJ0ZXJfdG9fYW1vdW50LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICBkZWNpbWFsczogZ2V0RGVjaW1hbFBsYWNlcyhjdXJyZW50X2ZpYXRfY3VycmVuY3kpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWlzX29rKSBlcnJvcl9tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldENvbnZlcnRlclRvRXJyb3IoZXJyb3JfbWVzc2FnZSk7XG4gICAgfVxuXG4gICAgQGNvbXB1dGVkXG4gICAgZ2V0IGFjY291bnRfcGxhdGZvcm1faWNvbigpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X2xpc3QsIGxvZ2luaWQgfSA9IHRoaXMucm9vdF9zdG9yZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IHBsYXRmb3JtX2ljb24gPSBhY2NvdW50X2xpc3QuZmluZChhY2MgPT4gbG9naW5pZCA9PT0gYWNjLmxvZ2luaWQpLmljb247XG5cbiAgICAgICAgcmV0dXJuIHBsYXRmb3JtX2ljb247XG4gICAgfVxufVxuIiwiaW1wb3J0IEFjY291bnRQcm9tcHREaWFsb2dTdG9yZSBmcm9tICcuL2FjY291bnQtcHJvbXB0LWRpYWxvZy1zdG9yZSc7XG5pbXBvcnQgQWNjb3VudFRyYW5zZmVyU3RvcmUgZnJvbSAnLi9hY2NvdW50LXRyYW5zZmVyLXN0b3JlJztcbmltcG9ydCBDcnlwdG9GaWF0Q29udmVydGVyU3RvcmUgZnJvbSAnLi9jcnlwdG8tZmlhdC1jb252ZXJ0ZXItc3RvcmUnO1xuaW1wb3J0IERlcG9zaXRTdG9yZSBmcm9tICcuL2RlcG9zaXQtc3RvcmUnO1xuaW1wb3J0IEVycm9yRGlhbG9nIGZyb20gJy4vZXJyb3ItZGlhbG9nLXN0b3JlJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuaW1wb3J0IEdlbmVyYWxTdG9yZSBmcm9tICcuL2dlbmVyYWwtc3RvcmUnO1xuaW1wb3J0IElmcmFtZVN0b3JlIGZyb20gJy4vaWZyYW1lLXN0b3JlJztcbmltcG9ydCBPblJhbXBTdG9yZSBmcm9tICcuL29uLXJhbXAtc3RvcmUnO1xuaW1wb3J0IFBheW1lbnRBZ2VudFN0b3JlIGZyb20gJy4vcGF5bWVudC1hZ2VudC1zdG9yZSc7XG5pbXBvcnQgUGF5bWVudEFnZW50VHJhbnNmZXJTdG9yZSBmcm9tICcuL3BheW1lbnQtYWdlbnQtdHJhbnNmZXItc3RvcmUnO1xuaW1wb3J0IFRyYW5zYWN0aW9uSGlzdG9yeVN0b3JlIGZyb20gJy4vdHJhbnNhY3Rpb24taGlzdG9yeS1zdG9yZSc7XG5pbXBvcnQgVmVyaWZpY2F0aW9uU3RvcmUgZnJvbSAnLi92ZXJpZmljYXRpb24tc3RvcmUnO1xuaW1wb3J0IFdpdGhkcmF3U3RvcmUgZnJvbSAnLi93aXRoZHJhdy1zdG9yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhc2hpZXJTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoeyByb290X3N0b3JlLCBXUyB9KSB7XG4gICAgICAgIHRoaXMuYWNjb3VudF9wcm9tcHRfZGlhbG9nID0gbmV3IEFjY291bnRQcm9tcHREaWFsb2dTdG9yZShyb290X3N0b3JlKTtcbiAgICAgICAgdGhpcy5hY2NvdW50X3RyYW5zZmVyID0gbmV3IEFjY291bnRUcmFuc2ZlclN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMuY3J5cHRvX2ZpYXRfY29udmVydGVyID0gbmV3IENyeXB0b0ZpYXRDb252ZXJ0ZXJTdG9yZSh7IHJvb3Rfc3RvcmUsIFdTIH0pO1xuICAgICAgICB0aGlzLmRlcG9zaXQgPSBuZXcgRGVwb3NpdFN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMuZXJyb3JfZGlhbG9nID0gbmV3IEVycm9yRGlhbG9nKCk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBuZXcgRXJyb3JTdG9yZSgpO1xuICAgICAgICB0aGlzLmdlbmVyYWxfc3RvcmUgPSBuZXcgR2VuZXJhbFN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMuaWZyYW1lID0gbmV3IElmcmFtZVN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMub25yYW1wID0gbmV3IE9uUmFtcFN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMucGF5bWVudF9hZ2VudCA9IG5ldyBQYXltZW50QWdlbnRTdG9yZSh7IHJvb3Rfc3RvcmUsIFdTIH0pO1xuICAgICAgICB0aGlzLnBheW1lbnRfYWdlbnRfdHJhbnNmZXIgPSBuZXcgUGF5bWVudEFnZW50VHJhbnNmZXJTdG9yZSh7IHJvb3Rfc3RvcmUsIFdTIH0pO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uX2hpc3RvcnkgPSBuZXcgVHJhbnNhY3Rpb25IaXN0b3J5U3RvcmUoeyByb290X3N0b3JlLCBXUyB9KTtcbiAgICAgICAgdGhpcy52ZXJpZmljYXRpb24gPSBuZXcgVmVyaWZpY2F0aW9uU3RvcmUoeyByb290X3N0b3JlLCBXUyB9KTtcbiAgICAgICAgdGhpcy53aXRoZHJhdyA9IG5ldyBXaXRoZHJhd1N0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Stores/cashier-store.js\n");

/***/ }),

/***/ "../../../node_modules/prop-types/factoryWithThrowingShims.js":
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(\"../../../node_modules/prop-types/lib/ReactPropTypesSecret.js\");\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzP2RjMDciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9IHJlcXVpcmUoJy4vbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0Jyk7XG5cbmZ1bmN0aW9uIGVtcHR5RnVuY3Rpb24oKSB7fVxuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbldpdGhSZXNldCgpIHt9XG5lbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LnJlc2V0V2FybmluZ0NhY2hlID0gZW1wdHlGdW5jdGlvbjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gc2hpbShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkge1xuICAgIGlmIChzZWNyZXQgPT09IFJlYWN0UHJvcFR5cGVzU2VjcmV0KSB7XG4gICAgICAvLyBJdCBpcyBzdGlsbCBzYWZlIHdoZW4gY2FsbGVkIGZyb20gUmVhY3QuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoXG4gICAgICAnQ2FsbGluZyBQcm9wVHlwZXMgdmFsaWRhdG9ycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gJyArXG4gICAgICAnVXNlIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpIHRvIGNhbGwgdGhlbS4gJyArXG4gICAgICAnUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcydcbiAgICApO1xuICAgIGVyci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIHRocm93IGVycjtcbiAgfTtcbiAgc2hpbS5pc1JlcXVpcmVkID0gc2hpbTtcbiAgZnVuY3Rpb24gZ2V0U2hpbSgpIHtcbiAgICByZXR1cm4gc2hpbTtcbiAgfTtcbiAgLy8gSW1wb3J0YW50IVxuICAvLyBLZWVwIHRoaXMgbGlzdCBpbiBzeW5jIHdpdGggcHJvZHVjdGlvbiB2ZXJzaW9uIGluIGAuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzLmpzYC5cbiAgdmFyIFJlYWN0UHJvcFR5cGVzID0ge1xuICAgIGFycmF5OiBzaGltLFxuICAgIGJvb2w6IHNoaW0sXG4gICAgZnVuYzogc2hpbSxcbiAgICBudW1iZXI6IHNoaW0sXG4gICAgb2JqZWN0OiBzaGltLFxuICAgIHN0cmluZzogc2hpbSxcbiAgICBzeW1ib2w6IHNoaW0sXG5cbiAgICBhbnk6IHNoaW0sXG4gICAgYXJyYXlPZjogZ2V0U2hpbSxcbiAgICBlbGVtZW50OiBzaGltLFxuICAgIGVsZW1lbnRUeXBlOiBzaGltLFxuICAgIGluc3RhbmNlT2Y6IGdldFNoaW0sXG4gICAgbm9kZTogc2hpbSxcbiAgICBvYmplY3RPZjogZ2V0U2hpbSxcbiAgICBvbmVPZjogZ2V0U2hpbSxcbiAgICBvbmVPZlR5cGU6IGdldFNoaW0sXG4gICAgc2hhcGU6IGdldFNoaW0sXG4gICAgZXhhY3Q6IGdldFNoaW0sXG5cbiAgICBjaGVja1Byb3BUeXBlczogZW1wdHlGdW5jdGlvbldpdGhSZXNldCxcbiAgICByZXNldFdhcm5pbmdDYWNoZTogZW1wdHlGdW5jdGlvblxuICB9O1xuXG4gIFJlYWN0UHJvcFR5cGVzLlByb3BUeXBlcyA9IFJlYWN0UHJvcFR5cGVzO1xuXG4gIHJldHVybiBSZWFjdFByb3BUeXBlcztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../../node_modules/prop-types/factoryWithThrowingShims.js\n");

/***/ }),

/***/ "../../../node_modules/prop-types/index.js":
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (false) { var throwOnDirectAccess, ReactIs; } else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(\"../../../node_modules/prop-types/factoryWithThrowingShims.js\")();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanM/NzBkNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBSZWFjdElzID0gcmVxdWlyZSgncmVhY3QtaXMnKTtcblxuICAvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBkZXZlbG9wbWVudCBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICB2YXIgdGhyb3dPbkRpcmVjdEFjY2VzcyA9IHRydWU7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9mYWN0b3J5V2l0aFR5cGVDaGVja2VycycpKFJlYWN0SXMuaXNFbGVtZW50LCB0aHJvd09uRGlyZWN0QWNjZXNzKTtcbn0gZWxzZSB7XG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IHByb2R1Y3Rpb24gYmVoYXZpb3IuXG4gIC8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2RcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVGhyb3dpbmdTaGltcycpKCk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../../node_modules/prop-types/index.js\n");

/***/ }),

/***/ "../../../node_modules/prop-types/lib/ReactPropTypesSecret.js":
/***/ ((module) => {

"use strict";
eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2xpYi9SZWFjdFByb3BUeXBlc1NlY3JldC5qcz9hZDgzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVzU2VjcmV0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../node_modules/prop-types/lib/ReactPropTypesSecret.js\n");

/***/ }),

/***/ "@deriv/components":
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__deriv_components__;

/***/ }),

/***/ "@deriv/shared":
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__deriv_shared__;

/***/ }),

/***/ "@deriv/translations":
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__deriv_translations__;

/***/ }),

/***/ "mobx":
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_mobx__;

/***/ }),

/***/ "react":
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "cashier/js/cashier." + chunkId + "." + "a007a79dd7345a890a13" + ".js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get mini-css chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference all chunks
/******/ 		__webpack_require__.miniCssF = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return undefined;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "@deriv/cashier:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			;
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "/";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"cashier-store": 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						} else installedChunks[chunkId] = 0;
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 		
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunk_deriv_cashier"] = self["webpackChunk_deriv_cashier"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./Stores/cashier-store.js");
/******/ 	__webpack_exports__ = __webpack_exports__["default"];
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});